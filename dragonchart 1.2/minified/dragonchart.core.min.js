Function.prototype.__extends=function(a){for(var b in a){this.prototype[b]=a[b]}return this};Date.prototype.format=function(a){var o={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"S":this.getMilliseconds()};if(/(y+)/.test(a)){a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))}for(var k in o){if(new RegExp("("+k+")").test(a)){a=a.replace(RegExp.$1,(RegExp.$1.length==1)?(o[k]):(("00"+o[k]).substr((""+o[k]).length)))}}return a};Date.prototype.addMinutes=function(a){var b=this.getMinutes();this.setMinutes(b+a);return this};Date.prototype.addDays=function(a){var b=this.getDate();this.setDate(b+a);return this};Date.prototype.shortOf=function(a,b){switch(a){case"s":return parseInt((b-this)/1000);case"n":return parseInt((b-this)/60000);case"h":return parseInt((b-this)/3600000);case"d":return parseInt((b-this)/86400000);case"w":return parseInt((b-this)/(86400000*7));case"m":return(b.getMonth()+1)+((b.getFullYear()-this.getFullYear())*12)-(this.getMonth()+1);case"y":return b.getFullYear()-this.getFullYear();default:return undefined}};Array.prototype.__copy=function(){var a=[];for(var i=0;i<this.length;i++){a.push(this[i])}return a};Array.prototype.__multiply=function(a){for(var i=0;i<this.length;i++){this[i]=this[i]*a}};Array.prototype.__sum=function(){var a=0;for(var i=0;i<this.length;i++){a+=this[i]}return a};Array.prototype.__contains=function(a){var b=false;for(var i=0;i<this.length;i++){if(this[i]===a){b=true;break}}return b};Array.prototype.__only=function(a){var b=true;for(var i=0;i<this.length;i++){if(this[i]!==a){b=false;break}}return b};window.DChart={};DChart.Methods={JudgeNormalObject:function(a){return a&&typeof a=='object'&&!DChart.Methods.IsArray(a)&&!DChart.Methods.IsDate(a)},StringIsDate:function(a){return!isNaN(Date.parse(a.replace(/-/g,'/')))},DeepCopy:function(e){var f={};var g=function(a,b,c){backupPath=c;for(var d in b){c+=d+'.';if(DChart.Methods.JudgeNormalObject(b[d])&&!DChart.Const.Exceps.__contains(c.substring(0,c.length-1))){a[d]={};g(a[d],b[d],c)}else{if(b.hasOwnProperty(d)){a[d]=b[d]}}c=backupPath}};g(f,e,'');return f},Override:function(f,g,h){var i=DChart.Methods.DeepCopy(f);var j=function(a,b,c){var d=c;for(var e in b){c+=e+'.';if(a[e]!==undefined&&b.hasOwnProperty(e)){if(DChart.Methods.JudgeNormalObject(b[e])&&DChart.Methods.JudgeNormalObject(a[e])&&!DChart.Const.Exceps.__contains(c.substring(0,c.length-1))){j(a[e],b[e],c)}else if(!h||b[e]!=null){a[e]=b[e]}}c=d}};j(i,g,'');return i},Extend:function(f,g,h){var i=DChart.Methods.DeepCopy(f);var j=function(a,b,c){var d=c;for(var e in b){c+=e+'.';if(b.hasOwnProperty(e)){if(DChart.Methods.JudgeNormalObject(b[e])&&!DChart.Const.Exceps.__contains(c.substring(0,c.length-1))){if(!DChart.Methods.JudgeNormalObject(a[e])){a[e]={}}j(a[e],b[e],c)}else{if(a[e]===undefined||!h||b[e]!=null){a[e]=b[e]}}}c=d}};j(i,g,'');return i},CapValue:function(a,b,c){if(DChart.Methods.IsNumber(b)&&a>b){return b}if(DChart.Methods.IsNumber(c)&&a<c){return c}return a},GetRandomString:function(a){return Math.random().toString().substring(5)},GetCurrentAngle:function(x,y,a,b){var c=Math.asin((y-b)/Math.sqrt(Math.pow(x-a,2)+Math.pow(y-b,2)));if(c!=0){if(x<a&&y>b){c=Math.PI-c}else if(x<a&&y<b){c=-Math.PI-c}}else{if(x<a){c=Math.PI}}return c},JudgeBetweenAngle:function(a,b,c){var d=false;var e=Math.PI;while(c<=b){if(c>=a){d=true;break}c+=e*2}if(!d){while(c>=a){if(c<=b){d=true;break}c-=e*2}}return d},judgeClockwiseBehind:function(a,b,c,d){a=a*Math.PI;b=b*Math.PI;var e=function(r){while(r<a){r+=2*Math.PI}while(r>b){r-=2*Math.PI}return r};c=e(c);d=e(d);return c<d},CopyInnerValue:function(a,b){if(a=='d'||a=='t'){return new Date(b.getTime())}return b},AddInnerValue:function(a,b,c){if(a=='d'){b=b.addDays(c)}else if(a=='t'){b=b.addMinutes(c)}else{b+=c}return b},FormatLinePosition:function(b,x,y){var b=Math.ceil(b);var c=function(a){var i=Math.floor(a);if(b%2==0){return a-i>0.5?i+1:i}else{return i+0.5}};if(arguments.length==3){return{x:c(x),y:c(y)}}else{return c(x)}},ObjectHaveSameValues:function(a,b,c){var d=true;for(var i=0,field;field=c[i];i++){if(a[field]!==b[field]){d=false;break}}return d},IsArray:function(a){return Object.prototype.toString.call(a)==='[object Array]'},IsNumber:function(n){return!isNaN(parseFloat(n))&&isFinite(n)},IsColor:function(a){return DChart.Const.RegExps.HexColor.test(a)||DChart.Const.RegExps.RGBColor.test(a)||DChart.Const.RegExps.RGBAColor.test(a)},ParseDate:function(a){return new Date(Date.parse(a.replace(/-/g,"/")))},IsDate:function(a){return(typeof a=='object')&&a.constructor==Date},FormatNumber:function(a){if(typeof a!='number'){return a}var b=a;for(var i=0;i<8;i++){var c=parseFloat(a.toFixed(i));if(Math.abs(c-a)<0.00001){b=c;break}}return b},getDarkenColor:function(a,b){b=b||0.7;var c=DChart.Methods.getRGBA(a);if(c){var d='rgba('+(c.R*b).toFixed(0)+','+(c.G*b).toFixed(0)+','+(c.B*b).toFixed(0)+','+c.A.toFixed(Math.abs((c.A-1))<0.001?0:1)+')';return d}else{return null}},getRGBA:function(a){if(DChart.Const.RegExps.HexColor.test(a)){return{R:parseInt(a.substring(1,3),16),G:parseInt(a.substring(3,5),16),B:parseInt(a.substring(5),16),A:1}}else if(DChart.Const.RegExps.RGBColor.test(a)){var b=a.split(',');return{R:parseInt(b[0].substring(4)),G:parseInt(b[1]),B:parseInt(b[2].substring(0,b[2].indexOf(')'))),A:1}}else if(DChart.Const.RegExps.RGBAColor.test(a)){var b=a.split(',');return{R:parseInt(b[0].substring(5)),G:parseInt(b[1]),B:parseInt(b[2]),A:parseFloat(b[3].substring(0,b[3].indexOf(')')))}}else{return null}},tranferLocation:function(a,b,c,d){if(d){return{X:a.X*b,Y:a.Y*c}}else{return{X:a.X/b,Y:a.Y/c}}},judgeIE678:function(){var a=!!window.ActiveXObject&&!document.createElement('canvas').getContext;var b=a&&(navigator.userAgent.indexOf("MSIE 6.0")>0||navigator.userAgent.indexOf("MSIE 7.0")>0);var c=a&&navigator.userAgent.indexOf("MSIE 8.0")>0;return{isIE678:a,isIE67:b,isIE8:c}}};DChart.Const={Language:{CN:{NotSupportHtml5:'您的浏览器不支持HTML5！',PluginParamWrong:'添加组合图的参数错误，图形类别不为字符串或图形类别不支持！',PluginNotSupportedType:'不能作为组合图，只能作为主图！',GraphicTypeNotQuoted:'图形未引用，请引用DChart相关图形的js！',MainGraphicMustBeAxis:'主图必须是坐标图！',WrongParam:'参数错误！',WrongData:'数据错误！',WrongSet:'设置错误！',NeedDiv:'需传入一个div节点元素或其id。',DataMustBeArray:'数据不能为空且必须为数组格式。',FirstValueShouldBeString:'数据第一个项必须为字符串以表示text',ValueMustNotBeUndefined:'数据的值不能为空',HexColorMalformed:'十六进制的颜色表达形式格式错误。',RGBColorMalformed:'rgb的颜色表达形式格式错误。',RGBAChangeTransparencyWrongParam:'RGBA表达式格式错误，或透明度值错误，必须>=0且<=1。',NeedDateData:'数据必须是日期格式。',NeedNumberData:'数据必须是数字格式。',OuterRadiusShouldBigger:'环状图外部半径应大于内部半径',AxisMaxLessThanMin:'坐标设定的最大值应该大于最小值。',AxisMaxLessThanActual:'坐标设定的最大值应该大于实际数据的最大值。',AxisMinMoreThanActual:'坐标设定的最小值应该小于实际数据的最小值。',LabelAxisValueTypeCannotBePercent:'文本轴的数据类型不能为百分数。',LabelDistanceExceedMax:'文本开始间距与结束间距不能为负数且之和不能超出最大值。',ValueTypeMustBeNumberOrPercent:'值轴的数据类型必须为n或p。',ValueTypeMustNotBePercent:'值轴的数据类型不能为p。',AxisVauleShouldBeDArray:'数据必须为二维数组（第一个元素为文本轴值，第二个元素为值轴值）。',ValueAxisValueShouldBeDArray:'值轴数据必须为二位数组（第一个元素为较小值，第二个元素为较大值）。',DataMustGreaterThanZero:'数据必须为不小于零的数字。',SubItemsValueShouldEqualSuperValue:'子节点值的总和应该等于上级母节点的值。',DataMustBeMultipleArray:'数据必须为多维数组。',SumOfLengthsMustBeLessThanRadius:'环状图的宽度之和应小于半径',OptionShouldNotBeUndefined:'选项值不能为undefined',OptionShouldBeString:'选项值必须为字符串格式。',OptionShouldBeBoolean:'选项值必须为布尔格式。',OptionShouldBeNumber:'选项值必须为数字格式。',OptionShouldBeDate:'选项值必须为日期格式。',OptionShouldBeColorStr:'选项值必须为颜色格式的字符串。',OptionShouldBeFunction:'选项值必须为一个function。',OptionShouldBeColorArray:'选项值必须为由颜色字符串组成的数组。',OptionShouldBeStringArray:'选项值必须为由字符串组成的数组。',OptionShouldBeNumberArray:'选项值必须为由数字组成的数组。',WrongLegendSet:'错误的图例位置设置，不允许X和Y方向上都居中或者当type为\"row\"时Y方向居中。',WrongSplitPoint:'错误的临界值设定，该值必须大于实际最小值并小于实际最大值。',MarbleShouldBeBigger:'3D坐标轴\"大理石\"的宽度应大于\"舞台\"加\"窗帘\"的宽度',WrongSightAngle:'大理石宽线与Y轴线的夹角取值范围应为0至0.5。'},EN:{NotSupportHtml5:'Your browser does not support HTML5',PluginParamWrong:'Wrong paramers to add a plugin graphic, grapihc type is not a string or the type is not supported!',PluginNotSupportedType:'cannot be used as a plugin, this type must be used as main graphic!',GraphicTypeNotQuoted:'The graphic is not quoted, please quote dragonchart.[type].(min).js',MainGraphicMustBeAxis:'Main graphic must ba a draw-axis type!',WrongParam:'Wrong parameter!',WrongData:'Wrong data!',WrongSet:'Wrong set！',NeedDiv:'A div DOM element or its id is needed.',DataMustBeArray:'data must not be empty and be an array.',FirstValueShouldBeString:'To indicate text property that the first item of data must be a string.',ValueMustNotBeUndefined:'The value of data must not be null or undefined.',HexColorMalformed:'Hex color expression is wrong.',RGBColorMalformed:'Rgb color expression is wrong.',RGBAChangeTransparencyWrongParam:'RGBA expression is wrong，or transparency number is unqualified, it must be >=0 and <=1.',NeedDateData:'Data must be a date format.',NeedNumberData:'Data must be a number format.',OuterRadiusShouldBigger:'Ring graphic outer radius should be larger than the internal radius',AxisMaxLessThanMin:'The maximum value set of axis should be greater than the minimum value.',AxisMaxLessThanActual:'The maximum value set of axis should be greater than the actual maximum value.',AxisMinMoreThanActual:'The minimum value set of axis should be less than the actual minimum value.',LabelAxisValueTypeCannotBePercent:'The valueType of text-axis cannot be percent.',LabelDistanceExceedMax:'label distance should not be negative and the sum of label distance should be less than the max length.',ValueTypeMustBeNumberOrPercent:'The valueType of value-axis must be n or p.',ValueTypeMustNotBePercent:'The valueType of value-axis cannot be percent.',AxisVauleShouldBeDArray:'Data must be double-array(first value for label axis，second for value axis).',ValueAxisValueShouldBeDArray:'Data of value axis must be double-array(first value for smaller value，second for bigger value).',DataMustGreaterThanZero:'Data must not be less than zero.',SubItemsValueShouldEqualSuperValue:'The sum of value of subitems should equal the value of mother node.',DataMustBeMultipleArray:'Data must be multiple array.',SumOfLengthsMustBeLessThanRadius:'The sum of lengths in multiring picture must be less than the radius set',OptionShouldNotBeUndefined:'Option value should not be undefined.',OptionShouldBeString:'Option value should be a string.',OptionShouldBeBoolean:'Option value should be a boolean.',OptionShouldBeNumber:'Option value should be a number.',OptionShouldBeDate:'Option value should be a date.',OptionShouldBeColorStr:'Option value should be a string array.',OptionShouldBeFunction:'Option value should be a function.',OptionShouldBeColorArray:'Option value should be a color array.',OptionShouldBeStringArray:'Option value should be a string array.',OptionShouldBeNumberArray:'Option value should be a number array.',WrongLegendSet:'Wrong legend position sets, direction X and direction Y cannot be center(middle) at the same time, and when type is \"row\" direction Y cannot be middle.',WrongSplitPoint:'Wrong split point, the value should be less than min data value and more than max data value.',MarbleShouldBeBigger:'The width of \"marble\" should be more than sum of width of the \"stage\" and the \"curtain\".',WrongSightAngle:'The sightangle should be bewteen 0 and 0.5.'}},CustomCss:{tip_blue:'{box-shadow: 0px 0px 4px rgb(102, 102, 102); border: 2px solid rgb(13, 142, 207); border-radius: 5px 5px 5px 5px; position: absolute; z-index: 999; text-align: left; padding: 4px 5px; cursor: default; background-color: rgba(239, 239, 239, 0.85); font-size: 12px; color: rgb(13, 142, 207); opacity: 1; transition: opacity 0.3s ease-out 0s, top 0.1s ease-out 0s, left 0.1s ease-out 0s; top: 245.66px; left: 308.333px; visibility: visible;}',tip_red:'{box-shadow: 0px 0px 4px rgb(102, 102, 102); border: 2px solid rgb(176, 23,  31); border-radius: 5px 5px 5px 5px; position: absolute; z-index: 999; text-align: left; padding: 4px 5px; cursor: default; background-color: rgba(239, 239, 239, 0.85); font-size: 12px; color: rgb(176, 23,  31); opacity: 1; transition: opacity 0.3s ease-out 0s, top 0.1s ease-out 0s, left 0.1s ease-out 0s; top: 245.66px; left: 308.333px; visibility: visible;}',tip_dark:'{box-shadow: 0px 0px 4px rgb(102, 102, 102); border: 2px solid rgb(79 , 79, 79  ); border-radius: 5px 5px 5px 5px; position: absolute; z-index: 999; text-align: left; padding: 4px 5px; cursor: default; background-color: rgba(239, 239, 239, 0.85); font-size: 12px; color: rgb(79 , 79, 79  ); opacity: 1; transition: opacity 0.3s ease-out 0s, top 0.1s ease-out 0s, left 0.1s ease-out 0s; top: 245.66px; left: 308.333px; visibility: visible;}',tip_purple:'{box-shadow: 0px 0px 4px rgb(102, 102, 102); border: 2px solid rgb(138,43,226); border-radius: 5px 5px 5px 5px; position: absolute; z-index: 999; text-align: left; padding: 4px 5px; cursor: default; background-color: rgba(239, 239, 239, 0.85); font-size: 12px; color: rgb(138,43,226); opacity: 1; transition: opacity 0.3s ease-out 0s, top 0.1s ease-out 0s, left 0.1s ease-out 0s; top: 245.66px; left: 308.333px; visibility: visible;}',tip_yellow:'{box-shadow: 0px 0px 4px rgb(102, 102, 102); border: 2px solid rgb(255,128,0); border-radius: 5px 5px 5px 5px; position: absolute; z-index: 999; text-align: left; padding: 4px 5px; cursor: default; background-color: rgba(239, 239, 239, 0.85); font-size: 12px; color: rgb(255,128,0); opacity: 1; transition: opacity 0.3s ease-out 0s, top 0.1s ease-out 0s, left 0.1s ease-out 0s; top: 245.66px; left: 308.333px; visibility: visible;}',tip_bisque:'{box-shadow: 0px 0px 4px rgb(102, 102, 102); border: 2px solid #BEBEBE; border-radius: 5px 5px 5px 5px; position: absolute; z-index: 999; text-align: left; padding: 4px 5px; cursor: default; background-color: rgba(239, 239, 239, 0.85); font-size: 12px; color: rgb(190,190,190);; opacity: 1; transition: opacity 0.3s ease-out 0s, top 0.1s ease-out 0s, left 0.1s ease-out 0s; top: 245.66px; left: 308.333px; visibility: visible;}'},CustomCss_IE678:{tip_blue:'{box-shadow: 0px 0px 4px rgb(102, 102, 102); border: 2px solid rgb(13, 142, 207); border-radius: 5px 5px 5px 5px; position: absolute; z-index: 999; text-align: left; padding: 4px 5px; cursor: default; background-color: #efefef; font-size: 12px; color: rgb(13, 142, 207); opacity: 1; transition: opacity 0.3s ease-out 0s, top 0.1s ease-out 0s, left 0.1s ease-out 0s; top: 245.66px; left: 308.333px; visibility: visible;}',tip_red:'{box-shadow: 0px 0px 4px rgb(102, 102, 102); border: 2px solid rgb(176, 23,  31); border-radius: 5px 5px 5px 5px; position: absolute; z-index: 999; text-align: left; padding: 4px 5px; cursor: default; background-color: #efefef; font-size: 12px; color: rgb(176, 23,  31); opacity: 1; transition: opacity 0.3s ease-out 0s, top 0.1s ease-out 0s, left 0.1s ease-out 0s; top: 245.66px; left: 308.333px; visibility: visible;}',tip_dark:'{box-shadow: 0px 0px 4px rgb(102, 102, 102); border: 2px solid rgb(79 , 79, 79  ); border-radius: 5px 5px 5px 5px; position: absolute; z-index: 999; text-align: left; padding: 4px 5px; cursor: default; background-color: #efefef; font-size: 12px; color: rgb(79 , 79, 79  ); opacity: 1; transition: opacity 0.3s ease-out 0s, top 0.1s ease-out 0s, left 0.1s ease-out 0s; top: 245.66px; left: 308.333px; visibility: visible;}',tip_purple:'{box-shadow: 0px 0px 4px rgb(102, 102, 102); border: 2px solid rgb(138,43,226); border-radius: 5px 5px 5px 5px; position: absolute; z-index: 999; text-align: left; padding: 4px 5px; cursor: default; background-color: #efefef; font-size: 12px; color: rgb(138,43,226); opacity: 1; transition: opacity 0.3s ease-out 0s, top 0.1s ease-out 0s, left 0.1s ease-out 0s; top: 245.66px; left: 308.333px; visibility: visible;}',tip_yellow:'{box-shadow: 0px 0px 4px rgb(102, 102, 102); border: 2px solid rgb(255,128,0); border-radius: 5px 5px 5px 5px; position: absolute; z-index: 999; text-align: left; padding: 4px 5px; cursor: default; background-color: #efefef; font-size: 12px; color: rgb(255,128,0); opacity: 1; transition: opacity 0.3s ease-out 0s, top 0.1s ease-out 0s, left 0.1s ease-out 0s; top: 245.66px; left: 308.333px; visibility: visible;}',tip_bisque:'{box-shadow: 0px 0px 4px rgb(102, 102, 102); border: 2px solid #BEBEBE; border-radius: 5px 5px 5px 5px; position: absolute; z-index: 999; text-align: left; padding: 4px 5px; cursor: default; background-color: #efefef; font-size: 12px; color: rgb(190,190,190);; opacity: 1; transition: opacity 0.3s ease-out 0s, top 0.1s ease-out 0s, left 0.1s ease-out 0s; top: 245.66px; left: 308.333px; visibility: visible;}'},AnimationAlgorithms:{linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){if((t/=1/2)<1)return 1/2*t*t;return-1/2*((--t)*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){if((t/=1/2)<1)return 1/2*t*t*t;return 1/2*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){if((t/=1/2)<1)return 1/2*t*t*t*t;return-1/2*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){if((t/=1/2)<1)return 1/2*t*t*t*t*t;return 1/2*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-1/2*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return(t==0)?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return(t==1)?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){if(t==0)return 0;if(t==1)return 1;if((t/=1/2)<1)return 1/2*Math.pow(2,10*(t-1));return 1/2*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){if(t>=1)return t;return-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){if((t/=1/2)<1)return-1/2*(Math.sqrt(1-t*t)-1);return 1/2*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var s=1.70158;var p=0;var a=1;if(t==0)return 0;if((t/=1)==1)return 1;if(!p)p=1*.3;if(a<Math.abs(1)){a=1;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(1/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*1-s)*(2*Math.PI)/p))},easeOutElastic:function(t){var s=1.70158;var p=0;var a=1;if(t==0)return 0;if((t/=1)==1)return 1;if(!p)p=1*.3;if(a<Math.abs(1)){a=1;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(1/a);return a*Math.pow(2,-10*t)*Math.sin((t*1-s)*(2*Math.PI)/p)+1},easeInOutElastic:function(t){var s=1.70158;var p=0;var a=1;if(t==0)return 0;if((t/=1/2)==2)return 1;if(!p)p=1*(.3*1.5);if(a<Math.abs(1)){a=1;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(1/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*1-s)*(2*Math.PI)/p));return a*Math.pow(2,-10*(t-=1))*Math.sin((t*1-s)*(2*Math.PI)/p)*.5+1},easeInBack:function(t){var s=1.70158;return 1*(t/=1)*t*((s+1)*t-s)},easeOutBack:function(t){var s=1.70158;return 1*((t=t/1-1)*t*((s+1)*t+s)+1)},easeInOutBack:function(t){var s=1.70158;if((t/=1/2)<1)return 1/2*(t*t*(((s*=(1.525))+1)*t-s));return 1/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)},easeInBounce:function(t){return 1-DChart.Const.AnimationAlgorithms.easeOutBounce(1-t)},easeOutBounce:function(t){if((t/=1)<(1/2.75)){return 1*(7.5625*t*t)}else if(t<(2/2.75)){return 1*(7.5625*(t-=(1.5/2.75))*t+.75)}else if(t<(2.5/2.75)){return 1*(7.5625*(t-=(2.25/2.75))*t+.9375)}else{return 1*(7.5625*(t-=(2.625/2.75))*t+.984375)}},easeInOutBounce:function(t){if(t<1/2)return DChart.Const.AnimationAlgorithms.easeInBounce(t*2)*.5;return DChart.Const.AnimationAlgorithms.easeOutBounce(t*2-1)*.5+1*.5}},RegExps:{BlankCharacter:/\s/g,HexColor:/^#[a-fA-F0-9]{5}[a-fA-F0-9]$/,RGBColor:/^(rgb)\([0-9]{0,3},[0-9]{0,3},[0-9]{0,3}\)/,RGBAColor:/^(rgba)\([0-9]{0,3},[0-9]{0,3},[0-9]{0,3},(0.)?[0-9]+\)/,ReturnFunction:/function *\(.*\) *\{.*return.*\}$/,NormalFunction:/function *\(.*\) *\{.*\}$/},Defaults:{FillColors:['#3F5C71','#2F4F4F','#0d233a','#910000','#2A962A','#778088','#4F7DE7','#b5bcc5','#1aadce','#484848','#3883bd','#a5aaaa','#782A56','#B97944','#7A3C9C','#a6bfd2','#008B8B','#7d7f97','#4F4F4F','#9F2626'],TransparentColors:['rgba(72,72,72,0.5)','rgba(56,131,189,0.5)','rgba(13,35,58,0.5)','rgba(42,150,42,0.5)','rgba(119,128,136,0.5)','rgba(79,125,231,0.5)','rgba(26,173,206,0.5)','rgba(165,170,170,0.5)','rgba(145,0,0,0.5)','rgba(120,42,86,0.5)','rgba(47,79,79,0.5)','rgba(185,121,68,0.5)','rgba(122,60,156,0.5)','rgba(166,191,210,0.5)','rgba(0,139,139,0.5)','rgba(63,92,113,0.5)','rgba(159,38,38,0.5)','rgba(125,127,151,0.5)','rgba(181,188,197,0.5)','rgba(79,79,79,0.5)'],Language:'CN',SavedPicName:'exportCanvas_'+(new Date()).getTime(),LineColor:'#BEBEBE',FontColor:'#000000',FontSize:13,FontFamily:'Arial',LineWidth:1,LegendType:'s',TipType:'tip_blue',InnerLabelColor:'#ffffff',OuterLabelColor:'#000000',ValueType:'n',ScaleLineColor:'#BEBEBE',AxisLineColor:'#000000',FooterFontColor:'#8B8386',AlignLineColor:'#21251e',FooterBottomDistance:0.01,FooterRightDistance:0.03,LengthReferCutForPies:60,LengthReferCutForAxis:90,OffXCutForPies:20,OffXCutForAxis:70,AxisXDrawableCut:6,AxisYDrawableCut:{n:9,p:9,d:7,t:7},AxisYTitleLocation:{n:0.7,p:0.7,d:0.75,t:0.75},AxisXTitleLocation:{n:0.8,p:0.8,d:0.8,t:0.8}},Exceps:['background.fillstyle'],NotDrawAxis:['Pie','Ring','MultiRing','Polar','Radar','NestedPie','Pie3D','Ring3D','MultiRing3D','Polar3D','NestedPie3D'],DrawAxis:['Bar','HeapBar','RangeBar','Histogram','Histogram3D','HeapHistogram','HeapHistogram3D','RangeHistogram','RangeHistogram3D','Line','Points','Area','RangeArea','QueueBar','QueueHistogram','QueueHistogram3D'],AxisFromFirstLeft:['Line','Area','Points','RangeArea'],ComputeSplitPoint:['QueueBar','QueueHistogram','QueueHistogram3D'],DrawSplitLine:['QueueBar','QueueHistogram'],AsPlugins:['Pie','Pie3D','Ring','Ring3D','MultiRing','MultiRing3D','Polar','Polar3D','Radar','NestedPie','NestedPie3D','Line','Points'],Draw3DAxis:['Histogram3D','HeapHistogram3D','RangeHistogram3D','QueueHistogram3D'],Skins:{BlackAndWhite:{BackGround:{BorderWidth:1,BorderColor:null,BackColor:'#ffffff',LinearGradient:null,RadialGradient:null},TipType:null,FontColor:null,LineColor:null,FontFamily:null,TitleColor:null,SubTitleColor:null,LegendFontColor:null,LegendBorderColor:null,ScaleLineColor:null,ScaleBackColors:['rgba(150,150,150,0.3)','rgba(210,210,210,0.3)'],LabelAxisLineColor:null,LabelAxisFontColor:null,ValueAxisLineColor:null,ValueAxisFontColor:null,MarbleLineColor:null,MarbleTopColor:null,MarbleRightColor:null,MarbleFaceColor:null,SplitLineColor:null,CrossLineColor:null,CloseLineColor:null,CaptionFontColor:null,XAxisTitleFontColor:null,YAxisTitleFontColor:null,FooterFontColor:'rgba(110,110,110,0.8)',ShadowColor:'#000000'}},Interval:{n:[1,2,3,4,5,8,10,20,30,40,50,80,100,200,300,500,800,1000],p:[1,2,3,4,5,8,10,20,25,50],d:[1,2,3,5,7,10,14,20,21,30,60,90,365],t:[1,2,5,10,20,30,60,120,180,240,300,480,720,1440]}};DChart.getCore=function(){var W=function(T,U){var V=this;V.ChangeLanguage=function(a){V.Language=DChart.Const.Language[a]!=undefined?a:'CN';V._messages=DChart.Const.Language[V.Language]};V.ChangeLanguage(U);V._initial=function(){V._configs={};V._configs._isIE678=DChart.Methods.judgeIE678();V._configs.basicoptions={Off:0,OffLeft:null,OffRight:null,OffTop:null,OffBottom:null,Width:null,Height:null};V.onStart=null;V.onBeforeAnimation=null;V.onAnimation=null;V.onFinish=null;var a=null;var b=false;if(T){if(typeof T=='string'&&T.constructor==String){var c=document.getElementById(T);if(c!=null&&c.nodeName.toLowerCase()=='div'){a=c}else{b=true}}else if(typeof T=='object'&&T.nodeName!=undefined&&T.nodeName.toLowerCase()=='div'){a=T}else{b=true}}else{b=true}if(b){throw new Error(V._messages.WrongParam+V._messages.NeedDiv);}else{if(a.clientWidth==0){a.style.width="800px"}if(a.clientHeight==0){a.style.height=(a.clientWidth/2).toString()+"px"}a.style.position='relative';a.style.left='0px';a.style.top='0px';a.style.padding=''}V.parentdiv=a;var d=document.getElementsByTagName('head')[0];var e=d.getElementsByTagName('style');for(var i=0,f;f=e[i];i++){if(f.id.indexOf('DChart')==0){d.removeChild(f)}}var f=document.createElement('style');f.id='dragonchart_style_';d.appendChild(f);V._configs.classes={};var g=V._configs._isIE678.isIE678?DChart.Const.CustomCss_IE678:DChart.Const.CustomCss;for(var h in g){if(g.hasOwnProperty(h)){var j=h+DChart.Methods.GetRandomString();V._configs.classes[h]=j;var k='.'+j+g[h]+'\n';if(f.styleSheet){f.styleSheet.cssText+=k}else{f.appendChild(document.createTextNode(k))}}}V.ID='DChart_'+DChart.Methods.GetRandomString();V.Initial()};V._computeBasic=function(b){var c=function(a){if(a!=null){return a<0?0:a}else{return null}};var d=b||V._configs.basicoptions;var e=c(d.Off);var f=c(d.OffLeft)||e||0;var g=c(d.offright)||e||0;var h=c(d.offtop)||e||0;var i=c(d.offbottom)||e||0;var j=c(V.parentdiv.clientWidth-f-g);var k=c(V.parentdiv.clientHeight-h-i);var l=DChart.Methods.CapValue(d.Width||j,V.parentdiv.clientWidth,0);var m=DChart.Methods.CapValue(d.Height||k,V.parentdiv.clientHeight,0);var n={offleft:f,offright:g,offtop:h,offbottom:i,width:l,height:m};if(!b){V._configs.calculatedBasic=n}return n};V.Initial=function(){var a=V.parentdiv.children;for(var i=0,child;child=a[i];i++){if(child.nodeName.toLowerCase()=='canvas'){V.parentdiv.removeChild(child);break}}var b=V._computeBasic();var c=document.createElement('canvas');c.setAttribute('id',V.ID);c.width=b.width;c.height=b.height;style='margin:'+b.offtop+'px '+b.offright+'px '+b.offbottom+'px '+b.offleft+'px;';c.innerHTML='<p>'+V._messages.NotSupportHtml5+'</p>';c.setAttribute('style',style);if(V._configs._isIE678.isIE678){c=window.G_vmlCanvasManager.initElement(c)}V.parentdiv.appendChild(c);V.canvas=c;V.ctx=c.getContext('2d');V._configs.needCheckSkin=true;V._configs.optionsBackup={};V._configs.pluginZIndex=0;V._configs.cursorPointer=false;V.plugins=[];V.customDraws=[];V._configs.eventlisteners={click:[],mousemove:[]};V.SetDefaultOptions();V.ClearBackGround()};V.SetBasicOptions=function(a){var b=V._computeBasic(a);var c=V._configs.calculatedBasic;if(c&&DChart.Methods.ObjectHaveSameValues(c,b,['offleft','offright','offtop','offbottom','height','width'])){return}V._configs.basicoptions=DChart.Methods.Override(V._configs.basicoptions,a);V.Initial();return V};V._addEventListener=function(a,b){if(!V.innerOptions.supportMouseEvents){return}if(V._configs._isIE678.isIE678){V.canvas.attachEvent('on'+a,b)}else{V.canvas.addEventListener(a,b)}V._configs.eventlisteners[a].push(b)};V.ClearBackGround=function(){V.parentdiv.style.backgroundColor='';V.ctx.clearRect(0,0,V.canvas.width,V.canvas.height);var a=V.parentdiv.children;for(var i=0,child;child=a[i];i++){if(child.nodeName&&child.nodeName.toLowerCase()!='canvas'){V.parentdiv.removeChild(child);i--}}for(var i=0,eventlistener;eventlistener=V._configs.eventlisteners.click[i];i++){if(V._configs._isIE678.isIE678){V.canvas.detachEvent('onclick',eventlistener)}else{V.canvas.removeEventListener('click',eventlistener,false)}}V._configs.eventlisteners.click.length=0;for(var i=0,eventlistener;eventlistener=V._configs.eventlisteners.mousemove[i];i++){if(V._configs._isIE678.isIE678){V.canvas.detachEvent('onmousemove',eventlistener)}else{V.canvas.removeEventListener('mousemove',eventlistener,false)}}V._configs.eventlisteners.mousemove.length=0;V.canvas.style.cursor='auto'};V.SetDefaultOptions=function(){V._resetSharedOpions();V.innerOptions=DChart[V.GraphType]._getDefaultOptions(V._configs.originalCommonOptions);return V};V._resetSharedOpions=function(){if(V._configs.originalCommonOptions){return}V._configs.originalCommonOptions={valueType:null,animation:!V._configs._isIE678.isIE678,animationSteps:100,animationEasing:'easeInOutQuart',scaleOverlay:false,lineColor:null,fontFamily:null,fontColor:null,background:{bordercolor:null,borderwidth:null,fillstyle:null},title:{show:true,content:null,color:null,fontfamily:null,fontsize:null,fontweight:null,offtop:null,height:null},subTitle:{show:true,content:null,color:null,fontfamily:null,fontsize:null,fontweight:null,height:null},legend:{show:true,enablecontrol:false,strikethrough:true,type:null,elementtype:null,placeX:null,placeY:null,sidelength:null,offX:null,offY:null,bordercolor:null,borderwidth:1,fontcolor:null,fontsize:null,fontfamily:null},scale:{linewidth:1,linecolor:null,backcolors:null},labelAxis:{labels:null,startlength:null,endlength:null,length:null,linewidth:1,linecolor:null,fontcolor:null,fontsize:null,fontfamily:null,fontweight:null,fontrotate:null},valueAxis:{length:null,content:function(a){if(this.valueType=='d'){return a.format('yyyy-MM-dd')}else if(this.valueType=='t'){return a.format('MM-dd hh:mm')}else if(this.valueType=='p'){return a.toFixed(0).toString()+'%'}else{return a.toString()}},minvalue:null,maxvalue:null,interval:null,verticalcomputeP:false,linewidth:null,linecolor:null,fontcolor:null,fontsize:null,fontfamily:null,fontweight:null,fontrotate:null},axis3d:{sightangle:null,marbleheight:null,marblewidth:null,marblelinewidth:0,marblelinecolor:null,stagewidth:null,marbletopcolor:null,marblerightcolor:null,marblefacecolor:null,curtainwidth:null},splitLine:{show:false,linecolor:null,linewidth:null},cross:{show:true,length:null,linewidth:null,linecolor:null},close:{show:true,linewidth:null,linecolor:null},caption:{content:null,fontcolor:null,fontsize:null,fontfamily:null,fontweight:null},xAxisTitle:{content:null,fontcolor:null,fontsize:null,fontfamily:null,fontweight:null,titlelocation:null},yAxisTitle:{content:null,fontcolor:null,fontsize:null,fontfamily:null,fontweight:null,titlelocation:null},footer:{content:null,fontcolor:null,fontsize:null,fontfamily:null,fontweight:null,rightdistance:null,bottomdistance:null},shadow:{show:true,color:null,blur:null,offsetX:null,offsetY:null},supportMouseEvents:true,tip:{show:true,content:function(a){var b=a.value.toString();if(this.valueType=='d'){b=a.value.format('yyyy-MM-dd')}else if(this.valueType=='t'){b=a.value.format('MM-dd hh:mm')}return'<div>&nbsp;'+a.text+'：'+b+'&nbsp;</div>'},tiptype:null},click:null,mouseover:null,mouseleave:null,mouseoverTransparency:0.3,mouseoverChangeCursor:true,onAnimationComplete:null}};V.SetSkin=function(a){if(!DChart.Const.Skins[a]){a='BlackAndWhite'}var b=DChart.Const.Skins[a];var c={};c.fontColor=b.FontColor||null;c.lineColor=b.LineColor||null;c.fontFamily=b.FontFamily||null;c.background={};c.background.fillstyle=null;if(b.BackGround){c.background.bordercolor=b.BackGround.BorderColor||null;c.background.borderwidth=b.BackGround.BorderWidth||null;if(b.BackGround.BackColor){c.background.fillstyle=b.BackGround.BackColor}else{var d=b.BackGround.LinearGradient;if(d&&d.Location&&d.ColorStops&&d.ColorStops.length){var e=d.Location;var f=V.ctx.createLinearGradient(e.minX||0,e.minY||0,e.maxX||V.canvas.width,e.maxY||V.canvas.height);for(var i=0,stop;stop=d.ColorStops[i];i++){f.addColorStop(stop.offset,stop.color)}c.background.fillstyle=f}else{d=b.BackGround.RadialGradient;if(d&&d.Location&&d.ColorStops&&d.ColorStops.length){var e=d.Location;var f=V.ctx.createRadialGradient(e.x0||V.canvas.width/2,e.y0||V.canvas.height/2,e.r0||0,e.x1||V.canvas.width/2,e.y1||V.canvas.height/2,e.r1||Math.max(V.canvas.width,V.canvas.height));for(var i=0,stop;stop=d.ColorStops[i];i++){f.addColorStop(stop.offset,stop.color)}c.background.fillstyle=f}}}}c.title={};c.title.color=b.TitleColor||null;c.subTitle={};c.subTitle.color=b.SubTitleColor||null;c.legend={};c.legend.fontcolor=b.LegendFontColor||null;c.legend.bordercolor=b.LegendBorderColor||null;c.title={};c.title.color=b.TitleColor||null;c.scale={};c.scale.linecolor=b.ScaleLineColor||null;c.scale.backcolors=b.ScaleBackColors||null;c.labelAxis={};c.labelAxis.linecolor=b.LabelAxisLineColor||null;c.labelAxis.fontcolor=b.LabelAxisFontColor||null;c.valueAxis={};c.valueAxis.linecolor=b.ValueAxisLineColor||null;c.valueAxis.fontcolor=b.ValueAxisFontColor||null;c.axis3d={};c.axis3d.marblelinecolor=b.MarbleLineColor||null;c.axis3d.marbletopcolor=b.MarbleTopColor||null;c.axis3d.marblerightcolor=b.MarbleRightColor||null;c.axis3d.marblefacecolor=b.MarbleFaceColor||null;c.splitLine={};c.splitLine.linecolor=b.SplitLineColor||null;c.cross={};c.cross.linecolor=b.CrossLineColor||null;c.close={};c.close.linecolor=b.CloseLineColor||null;c.caption={};c.caption.fontcolor=b.CaptionFontColor||null;c.xAxisTitle={};c.xAxisTitle.fontcolor=b.XAxisTitleFontColor||null;c.yAxisTitle={};c.yAxisTitle.fontcolor=b.YAxisTitleFontColor||null;c.footer={};c.footer.fontcolor=b.FooterFontColor||null;c.shadow={};c.shadow.color=b.ShadowColor||null;c.tip={};c.tip.tiptype=b.TipType||null;V._configs.skinCommonOptions=c;V._configs.skinID=a;V._configs.needCheckSkin=true;return V};V.RemoveSkin=function(){V._configs.skinCommonOptions=null;V._configs.skinID=null;V._configs.needCheckSkin=true};V._transferArrayDataToObject=function(a){var b={};if(a[0]&&typeof a[0]=='string'){b.text=a[0]}else{throw new Error(V._messages.WrongParam+'\''+a+'\''+V._messages.FirstValueShouldBeString);}if(a[1]!=null){b.value=a[1]}else{throw new Error(V._messages.WrongParam+'\''+a+'\''+V._messages.ValueMustNotBeUndefined);}var c=2;if(DChart.Methods.IsArray(a[c])){var d=a[c];if(DChart.Methods.IsArray(d[0])&&d[0].length>0&&typeof d[0][0]=='string'){for(var i=0;i<d.length;i++){d[i]=V._transferArrayDataToObject(d[i])}}b.subitems=d;c++}if(typeof a[c]=='string'){b.color=a[c];c++}if(typeof a[c]=='function'){b.click=a[c];c++}if(typeof a[c]=='function'){b.mouseover=a[c];c++}if(typeof a[c]=='function'){b.mouseleave=a[c]}return b};V._judgeArrayDataSource=function(a){if(DChart.Methods.IsArray(a[0])&&a[0].length>0&&typeof a[0][0]=='string'){var b=[];for(var i=0,item;item=a[i];i++){var c=V._transferArrayDataToObject(item);b.push(c)}a=b}return a};V.SetData=function(a){if((!a||!DChart.Methods.IsArray(a))&&(!V.innerData||!DChart.Methods.IsArray(V.innerData))){throw new Error(V._messages.WrongParam+V._messages.DataMustBeArray);}if(a){V.innerData=V._judgeArrayDataSource(a);V._configs.dataBackup=[];for(var i=0;i<V.innerData.length;i++){V._configs.dataBackup[i]=DChart.Methods.DeepCopy(V.innerData[i])}V._configs.legendSize=null;V._configs.legendcontrol={hidelegend:[],mouseoverindex:null}}return V};V.SetOptions=function(a){if(!V.innerOptions){V.SetDefaultOptions()}if(a){V.innerOptions=DChart.Methods.Override(V.innerOptions,a);V._configs.needCheckSkin=true}if(a||!V._configs.optionsBackup.mainOptions){V._configs.optionsBackup.mainOptions=V.innerOptions}return V};V._checkOptions=function(){var k=function(b,c,d){var e=function(a){throw new Error(V._messages.WrongParam+b+V._messages[a]);};if(c===null){return null}else if(c===undefined){e('OptionShouldNotBeUndefined');}var f=null;switch(d){case's':if(typeof c!='string'){e('OptionShouldBeString');}break;case'd':case't':var g=DChart.Methods.IsDate(c);var h=typeof c=='string'&&DChart.Methods.StringIsDate(c);if(!g&&!h){e('OptionShouldBeDate');}if(h){f=DChart.Methods.ParseDate(c)}break;case'b':if(typeof c!='boolean'){e('OptionShouldBeBoolean');}break;case'c':if(typeof c!='string'||!DChart.Methods.IsColor(c)){e('OptionShouldBeColorStr');}break;case'f':if(typeof c!='function'){e('OptionShouldBeFunction');}break;case'ca':if(typeof c=='string'&&DChart.Methods.IsColor(c)){f=[c]}else{var j=true;if(DChart.Methods.IsArray(c)&&c.length){for(var i=0,str;str=c[i];i++){if(typeof str!='string'||!DChart.Methods.IsColor(str)){j=false}}}else{j=false}if(!j){e('OptionShouldBeColorArray');}}break;case'sa':if(typeof c=='string'){f=[c]}else{var j=true;if(DChart.Methods.IsArray(c)&&c.length){for(var i=0,str;str=c[i];i++){if(typeof str!='string'){j=false}}}else{j=false}if(!j){e('OptionShouldBeStringArray');}}break;case'na':if(typeof c=='number'&&DChart.Methods.IsNumber(c)){f=[c]}else{var j=true;if(DChart.Methods.IsArray(c)&&c.length){for(var i=0;i<c.length;i++){if(typeof c[i]!='number'||!DChart.Methods.IsNumber(c[i])){j=false}}}else{j=false}if(!j){e('OptionShouldBeNumberArray');}}break;default:if(typeof c!='number'||!DChart.Methods.IsNumber(c)){e('OptionShouldBeNumber');}break}return f};var l={__top:[['valueType','s'],['animation','b'],['animationSteps','n'],['animationEasing','s'],['scaleOverlay','b'],['lineColor','c'],['fontFamily','s'],['fontColor','c'],['supportMouseEvents','b'],['click','f'],['mouseover','f'],['mouseleave','f'],['mouseoverTransparency','n'],['mouseoverChangeCursor','b'],['onAnimationComplete','f']],title:[['show','b'],['content','s'],['offtop','n'],['height','n'],['color','c'],['fontsize','n'],['fontfamily','s'],['fontweight','s']],subTitle:[['show','b'],['content','s'],['height','n'],['color','c'],['fontsize','n'],['fontfamily','s'],['fontweight','s']],legend:[['show','b'],['enablecontrol','b'],['strikethrough','b'],['type','s'],['elementtype','s'],['placeX','s'],['placeY','s'],['sidelength','n'],['offX','n'],['offY','n'],['bordercolor','c'],['borderwidth','n'],['fontcolor','c'],['fontsize','n'],['fontfamily','s']],background:[['bordercolor','c'],['borderwidth','n']],scale:[['linewidth','n'],['linecolor','c'],['backcolors','ca']],labelAxis:[['labels','sa'],['startlength','n'],['endlength','n'],['length','n'],['linewidth','n'],['linecolor','c'],['fontcolor','c'],['fontsize','n'],['fontfamily','s'],['fontweight','s'],['fontrotate','n']],valueAxis:[['length','n'],['content','f'],['interval','n'],['verticalcomputeP','b'],['linewidth','n'],['linecolor','c'],['fontcolor','c'],['fontsize','n'],['fontfamily','s'],['fontweight','s'],['fontrotate','n']],axis3d:[['sightangle','n'],['marbleheight','n'],['marblewidth','n'],['marblelinewidth','n'],['marblelinecolor','c'],['stagewidth','n'],['marbletopcolor','c'],['marblerightcolor','c'],['marblefacecolor','c'],['curtainwidth','n']],splitLine:[['show','b'],['linewidth','n'],['linecolor','c']],cross:[['show','b'],['length','n'],['linewidth','n'],['linecolor','c']],close:[['show','b'],['linewidth','n'],['linecolor','c']],caption:[['content','s'],['fontcolor','c'],['fontsize','n'],['fontfamily','s'],['fontweight','s']],xAxisTitle:[['content','s'],['fontcolor','c'],['fontsize','n'],['fontfamily','s'],['fontweight','s'],['titlelocation','n']],yAxisTitle:[['content','s'],['fontcolor','c'],['fontsize','n'],['fontfamily','s'],['fontweight','s'],['titlelocation','n']],footer:[['content','s'],['fontcolor','c'],['fontsize','n'],['fontfamily','s'],['fontweight','s'],['rightdistance','n'],['bottomdistance','n']],shadow:[['show','b'],['color','c'],['blur','n'],['offsetX','n'],['offsetY','n']],tip:[['show','b'],['content','f'],['tiptype','s']]};var m=function(a,b){for(var c in a){var d=c=='__top'?b:b[c];for(var i=0,subitem;subitem=a[c][i];i++){var e=c=='__top'?subitem[0]:c+'.'+subitem[0];var f=d[subitem[0]];var g=subitem[1];var h=k(e,f,g);if(h!=null){d[subitem[0]]=h}}}};var n=V.innerOptions;m(l,n);m(DChart[V.GraphType]._getCheckOptions(),n);for(var i=0,plugin;plugin=V.plugins[i];i++){m(l,plugin.pluginOptions);m(DChart[plugin.pluginType]._getCheckOptions(),plugin.pluginOptions)}if(n.labelAxis.valueType!==undefined){n.labelAxis.minvalue=k('labelAxis.minvalue',n.labelAxis.minvalue,n.labelAxis.valueType)||n.labelAxis.minvalue;n.labelAxis.maxvalue=k('labelAxis.maxvalue',n.labelAxis.maxvalue,n.labelAxis.valueType)||n.labelAxis.maxvalue}if(n.splitpoint!==undefined){n.splitpoint=k('splitpoint',n.splitpoint,n.valueType)||n.splitpoint}n.valueAxis.minvalue=k('valueAxis.minvalue',n.valueAxis.minvalue,n.valueType)||n.valueAxis.minvalue;n.valueAxis.maxvalue=k('valueAxis.maxvalue',n.valueAxis.maxvalue,n.valueType)||n.valueAxis.maxvalue};V.AddPlugin=function(a,b,c,d){if(typeof a!='string'||!DChart.Const.DrawAxis.__contains(a)&&!DChart.Const.NotDrawAxis.__contains(a)){throw new Error(V._messages.PluginParamWrong);}if(!DChart.Const.AsPlugins.__contains(a)){throw new Error('"'+a+'"'+V._messages.PluginNotSupportedType);}if(DChart[a]==undefined){throw new Error('\''+a+'\''+V._messages.GraphicTypeNotQuoted);}if(arguments.length===2&&!DChart.Methods.IsArray(arguments[1])){c=arguments[1];b=null}if(b){b=V._judgeArrayDataSource(b)}if(!c){c=DChart[a]._getDefaultOptions(V._configs.originalCommonOptions)}else{c=DChart.Methods.Override(DChart[a]._getDefaultOptions(V._configs.originalCommonOptions),c)}var e='pluginID_'+DChart.Methods.GetRandomString();if(!DChart.Methods.IsNumber(d)){d=V._configs.pluginZIndex+1;V._configs.pluginZIndex++}else{var f=false;if(d==0){d=1}for(var i=0,g;g=V.plugins[i];i++){if(g.zIndex==d){f=true}if(f){g.zIndex++}if(g.zIndex==0){g.zIndex++}}if(V.plugins.length>0){V._configs.pluginZIndex=Math.max(V.plugins[V.plugins.length-1].zIndex,0)}}var g={pluginID:e,pluginType:a,pluginData:b,pluginOptions:c,zIndex:d};V._configs.optionsBackup[e]=c;V._configs.needCheckSkin=true;V.plugins.push(g);V.plugins.sort(function(x,y){return x.zIndex-y.zIndex});return e};V.RemovePlugin=function(a){var b=false;var c=V.plugins;for(var i=0,n=0;i<c.length;i++){if(c[i].pluginID!=a){c[n++]=c[i]}else{b=true}}if(b){c.length-=1;var d={mainOptions:V._configs.optionsBackup.mainOptions};for(var i=0,plugin;plugin=V.plugins[i];i++){d[plugin.pluginID]=V._configs.optionsBackup[plugin.pluginID]}V._configs.optionsBackup=d}return V};V.ClearPlugins=function(){if(V.plugins.length>0){V.plugins.length=0;var a={mainOptions:V._configs.optionsBackup.mainOptions};V._configs.optionsBackup=a}};V._reApplySkinOptions=function(){var f=V._configs.skinCommonOptions;if(V._configs.needCheckSkin){V._configs.needCheckSkin=false;var g=function(a,b){var c={};var d=DChart.Const.Skins[V._configs.skinID][b];if(DChart.Const.Skins[V._configs.skinID]&&d){DChart[b]._spreadSkin(c,d)}var e=DChart.Methods.Extend(f,c);return DChart.Methods.Extend(e,a,true)};if(f){V.innerOptions=g(V._configs.optionsBackup.mainOptions,V.GraphType);for(var i=0,plugin;plugin=V.plugins[i];i++){plugin.pluginOptions=g(V._configs.optionsBackup[plugin.pluginID],plugin.pluginType)}}else{V.innerOptions=V._configs.optionsBackup.mainOptions;for(var i=0,plugin;plugin=V.plugins[i];i++){plugin.pluginOptions=V._configs.optionsBackup[plugin.pluginID]}}}};V.Draw=function(a,b){if(arguments.length===1){if(!DChart.Methods.IsArray(arguments[0])){b=arguments[0];a=undefined}}V.SetData(a);V.SetOptions(b);V._checkOptions();V.canvas.onclick=null;V.canvas.onmousemove=null;V.shapes={};V.coordinates={};V._configs.specificConfig={};if(V.onStart){V.onStart()}V._reApplySkinOptions();V._configs.specificConfig[V.ID]={};var c=[];if(V.innerData.length>0){V._configs.axisData=null;V._configs.axisSize=null;V._configs.coordinate=null;var d=V.innerOptions;var e=DChart[V.GraphType]._drawgraphic(V,V.ID,V.innerData,d);e.zIndex=0;c.push(e);for(var i=0,plugin;plugin=V.plugins[i];i++){var f=plugin.pluginData||V.innerData;if(f.length>0){V._configs.specificConfig[plugin.pluginID]={};var g=DChart[plugin.pluginType]._drawgraphic(V,plugin.pluginID,f,plugin.pluginOptions);g.zIndex=plugin.zIndex;c.push(g)}}c.sort(function(x,y){return x.zIndex-y.zIndex});if(d.animateRotate!=undefined){if(!d.animateRotate&&!d.animateScale){d.animation=false}}if(d.animateY!=undefined){if(!d.animateY&&!d.animateX){d.animation=false}}}V.ClearBackGround();V._startDrawAndAnimation(c)};V._createAssists=function(a){V._createBackground();V._createTitle(a);V._createLegend();V._createAxis(a);V._createFooter()};V._startDrawAndAnimation=function(r){var s=V.innerOptions;var t=(s.animation)?1/DChart.Methods.CapValue(s.animationSteps,50,1):1;var u=DChart.Const.AnimationAlgorithms[s.animationEasing];var v=(s.animation&&V.innerData.length>0)?0:1;var w=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1000/60)};var z=V._calculateOutersValid();if(!V._configs.recreateAssists){V._createAssists(z)}var A=V._getDrawableCoordinate();if(V.onBeforeAnimation){V.onBeforeAnimation()}var B=function(){v+=t;if(V.onAnimation){V.onAnimation(v)}var j=(s.animation)?DChart.Methods.CapValue(u(v),null,0):1;V._clearDrawable(A);if(!z.AxisValid||V._configs.recreateAssists||V._configs._isIE678.isIE678){V._createAssists(z)}if(!s.scaleOverlay){V._createScales(z,true,true)}if(s.scaleOverlay){V._createScales(z,true)}for(var i=0,task;task=r[i];i++){if(s.scaleOverlay){task.drawSegments(j,v)}else{task.drawSegments(j,v)}}if(s.scaleOverlay){V._createScales(z,false,true)}for(var i=0,customdraw;customdraw=V.customDraws[i];i++){V.DrawFigures[customdraw.funcname].apply(V,customdraw.options)}if(v<1){w(B)}else{V.redrawAll=function(){V._clearDrawable(A);V._createAssists();if(!s.scaleOverlay){V._createScales(z,true,true)}if(s.scaleOverlay){V._createScales(z,true)}for(var i=0,task;task=r[i];i++){task.redraw()}if(s.scaleOverlay){V._createScales(z,false,true)}for(var i=0,customdraw;customdraw=V.customDraws[i];i++){V.DrawFigures[customdraw.funcname].apply(V,customdraw.options)}};for(var i=0,task;task=r[i];i++){if(s.supportMouseEvents&&typeof task.mouseEvents=='function'){task.mouseEvents()}}var k=V.coordinates.legend;if(k&&s.legend.enablecontrol){var l=V._configs.legendcontrol;var m=function(e){var a=V._getMouseLoction(e);var x=a.X;var y=a.Y;var b=null;if(x>k.left+k.borderwidth/2&&x<k.left+k.width-k.borderwidth/2&&y>k.top+k.borderwidth/2&&y<k.top+k.height-k.borderwidth/2){var c=V._computeLegend();var d=c.elementtype=='l';for(var i=0;i<k.points.length;i++){var f=k.points[i];if(c.type=='column'){var g=d?f.length/2:f.length;var h=d?f.top-g/2:f.top;if(y>h&&y<h+g){V._configs.cursorPointer=true;b=i;break}}else{if(x>f.left&&x<f.left+c.sidelength+c.sidedistance+c.textlengths[i]){V._configs.cursorPointer=true;b=i;break}}}};return b};var o=function(e){var e=window.event||e;var a=m(e);if(a!=l.mouseoverindex){l.mouseoverindex=a;V.redrawAll()}};V._addEventListener('mousemove',o);var p=function(e){var e=window.event||e;var a=m(e);if(a!=null){if(l.hidelegend.__contains(a)){var b=[];for(var i=0,n=0;i<l.hidelegend.length;i++){if(l.hidelegend[i]!=a){b[n++]=l.hidelegend[i]}}l.hidelegend=b;V.innerData=[];for(var i=0;i<V._configs.dataBackup.length;i++){if(!l.hidelegend.__contains(i)){V.innerData.push(V._configs.dataBackup[i])}}}else{l.hidelegend.push(a);V.innerData=[];for(var i=0;i<V._configs.dataBackup.length;i++){if(!l.hidelegend.__contains(i)){V.innerData.push(V._configs.dataBackup[i])}}}V.Draw()}};V._addEventListener('click',p)}var q=function(){if(s.mouseoverChangeCursor&&V._configs.cursorPointer){V.canvas.style.cursor='pointer'}else{V.canvas.style.cursor='auto'}V._configs.cursorPointer=false};V._addEventListener('mousemove',q);if(typeof s.onAnimationComplete=='function'){s.onAnimationComplete()}if(V.onFinish){V.onFinish()}}};w(B)};V._createBackground=function(){var a=V.innerOptions.background;var b=V.canvas;if(a.fillstyle){V.DrawFigures.createRectangleFill(0,0,b.width,b.height,a.fillstyle)}else{V.ctx.clearRect(0,0,V.canvas.width,V.canvas.height)}var c=a.borderwidth||0;if(c>0){V.DrawFigures.createRectangleBorder(0,0,b.width,b.height,c*2,a.bordercolor)}V.coordinates.canvas={width:b.width,height:b.height,borderwidth:c}};V._createTip=function(a,b,c){var d=document.createElement('span');var e=V.innerOptions.tip.tiptype||DChart.Const.Defaults.TipType;d.setAttribute(V._configs._isIE678.isIE67?'className':'class',V._configs.classes[e]);d.style.position='absolute';d.style.left=b+V._configs.calculatedBasic.offleft+'px';d.style.top=c+V._configs.calculatedBasic.offtop+'px';d.innerHTML=a;V.parentdiv.appendChild(d);return d};V._changeTip=function(a,b,c){if(b){a.style.left=b+V._configs.calculatedBasic.offleft+'px'}if(c){a.style.top=c+V._configs.calculatedBasic.offtop+'px'}};V._getDrawableCoordinate=function(){if(!V._configs.coordinate){var a=V.innerOptions;var b=V._calculateOutersValid();var c,minY,maxX,maxY;if(b.AxisValid){var d=V._configs.axisSize||V._computeAxis(b);c=d.minX-1;minY=d.minY-1;maxX=d.maxX+1;maxY=d.maxY+1}else{var e=b.legendValid?V._computeLegend():null;c=(e?e.occupyLeft:0);maxX=V.canvas.width-(e?e.occupyRight:0);if(b.titleValid){minY=V._computeTitle(b).occupyTop}else{minY=0}minY+=(e?e.occupyTop:0);maxY=V.canvas.height-(e?e.occupyBottom:0);var f=a.background.borderwidth||0;c+=f;maxX-=f;minY+=f;maxY-=f}var g=(maxX+c)/2;var h=(maxY+minY)/2;V._configs.coordinate={minX:Math.ceil(c),maxX:Math.ceil(maxX),minY:Math.ceil(minY),maxY:Math.ceil(maxY),centerX:g,centerY:h}}return V._configs.coordinate};V._clearDrawable=function(a){var b=V.innerOptions.background;a=a||V._getDrawableCoordinate();V.ctx.clearRect(a.minX+1,a.minY+1,a.maxX-a.minX-2,a.maxY-a.minY-2);if(b.fillstyle){V.DrawFigures.createRectangleFill(a.minX+1,a.minY+1,a.maxX-a.minX-2,a.maxY-a.minY-2,b.fillstyle)}};V._computeTitle=function(a){var a=a||V._calculateOutersValid();var b=V.innerOptions.title;var c=V.innerOptions.background.borderwidth||0;var d=Math.min(V.canvas.height-c*2,V.canvas.width/2-c);var e=b.height!=null?b.height:d/15;var f=b.offtop!=null?b.offtop:e/8;var g=b.fontsize||e*0.8;b=V.innerOptions.subTitle;var h=b.height!=null?b.height:d/18;var i=b.fontsize!=null?b.fontsize:h*0.8;var j=(a.titleValid?e+f:0)+(a.titleValid&&a.subTitleValid?h:0)+g/4;return{title:{height:e,offtop:f,fontsize:g},subTitle:{height:h,fontsize:i},occupyTop:j}};V._createTitle=function(a){var a=a||V._calculateOutersValid();var b=V.innerOptions.title;if(!a.titleValid){return}var c=V._computeTitle(a);var d=V.innerOptions.background.borderwidth||0;var e=V.canvas.width/2;var f=d+c.title.offtop+c.title.height/2+c.title.fontsize/2;var g=V.DrawFigures.createText(b.content,e,f,'center',(b.fontweight||'bold'),c.title.fontsize,b.fontfamily,b.color);V.coordinates.title={left:e-g/2,right:e+g/2,top:f-c.title.fontsize,bottom:f,fontsize:c.title.fontsize,length:g};b=V.innerOptions.subTitle;if(!a.subTitleValid){return}f=d+c.title.offtop+c.title.height+c.subTitle.height;g=V.DrawFigures.createText(b.content,e,f,'center',(b.fontweight||'bold'),c.subTitle.fontsize,b.fontfamily,b.color);V.coordinates.subTitle={left:e-g/2,right:e+g/2,top:f-c.subTitle.fontsize,bottom:f,fontsize:c.subTitle.fontsize,length:g}};V._computeLegend=function(a){if(V._configs.legendSize){return V._configs.legendSize}var a=a||V._calculateOutersValid();var b=V.innerOptions.background.borderwidth||0;var c=V.canvas.width-b*2;var d=V.canvas.height-b*2;var e=V.innerOptions.legend;var f=V.innerData;var g=0;var h=0;var j=e.type!='row'?'column':e.type;var k=e.placeX!='left'&&e.placeX!='center'?'right':e.placeX;var l=e.placeY!='top'&&e.placeY!='bottom'?'middle':e.placeY;if(l=='middle'&&k=='center'||j=='row'&&l=='middle'){throw new Error(V._messages.WrongLegendSet);}var m=e.elementtype||DChart.Const.Defaults.LegendType;var n=e.sidelength||Math.max(c,d)/(a.AxisValid?DChart.Const.Defaults.LengthReferCutForAxis:DChart.Const.Defaults.LengthReferCutForPies);var o=n/2;var p=j=='row'?n/3:n;var q=n/2;var r=e.borderwidth&&e.borderwidth>0?e.borderwidth:0;var s=e.fontsize||n*1.2;var t=e.fontfamily||V.innerOptions.fontFamily||DChart.Const.Defaults.FontFamily;var u=0;var v=[];var w=[];for(var i=0,item;item=f[i];i++){v[i]=item.text||'';if(typeof item.text=='string'){var x=V.DrawFigures.measureText(item.text,null,s,t);w[i]=x;if(u<x){u=x}}}var y=e.offX==null?c/(a.AxisValid?DChart.Const.Defaults.OffXCutForAxis:DChart.Const.Defaults.OffXCutForPies):e.offX;var z=e.offY==null?n/2:e.offY;if(m=='l'){n*=2}if(j=='column'){g=q*2+n+o+u+r*2;h=f.length*((m=='l'?n/2:n)+o)-o+p*2+r*2}else{g=f.length*(n+o*2)+w.__sum()-o+q*2+r*2;h=p*2+(m=='l'?n/2:n)+r*2}var A=(k=='left'?y:(k=='center'?c/2-g/2:c+b-y-g))+r;var B=a.titleValid?V._computeTitle(a).occupyTop:V.canvas.height/45;var C=z+b+B;var D=(a.AxisValid?d/7.5:0);if(l=='bottom'){C=d+b-h-z-(k=='center'||j=='row'?0:D)}else if(l=='middle'){C=(d-B-h)/2+b+B-D/2}var E=l=='top'&&(j=='row'||j=='column'&&k=='center')?h+z+b+n/3:0;var F=l=='bottom'&&(j=='row'||j=='column'&&k=='center')?h+z+b+n/3:0;var G=k=='left'&&j=='column'?g+y:0;var H=k=='right'&&j=='column'?g+y:0;V._configs.legendSize={legendWidth:g,legendHeight:h,type:j,placeX:k,placeY:l,elementtype:m,sidelength:n,sidedistance:o,sideoffY:p,sideoffX:q,borderwidth:r,fontsize:s,fontfamily:t,maxTextLength:u,texts:v,textlengths:w,left:A,top:C,occupyTop:E,occupyBottom:F,occupyLeft:G,occupyRight:H};return V._configs.legendSize};V._createLegend=function(a){var a=a||V._calculateOutersValid();if(!a.legendValid){return}var b=V.innerOptions.legend;var c=V._computeLegend();var d=V._configs.legendColors||DChart.Const.Defaults.FillColors;var e=c.elementtype=='l';var f=[];var g=[];var h=V._configs.legendcontrol;var j='rgba(255,255,255,0.4)';var k='#CCCCCC';var l=0;for(var i=0,item;item=V._configs.dataBackup[i];i++){var m=c.left+c.sideoffX+c.borderwidth;if(c.type=='row'){m+=i*(c.sidelength+c.sidedistance*2)+c.textlengths.slice(0,i).__sum()}var n=c.top+c.sideoffY+c.borderwidth;if(c.type=='column'){n+=i*((e?c.sidelength/2:c.sidelength)+c.sidedistance)}var o=h.hidelegend.__contains(i);var p=!h.hidelegend.__contains(i)&&h.mouseoverindex==i;var q=o?k:(item.color||d[l%d.length]);if(!o){l++}if(e){var r=n+c.sidelength*0.3;V.DrawFigures.createLine(m,r,m+c.sidelength,r,3,q);if(p){V.DrawFigures.createLine(m,r,m+c.sidelength,r,3,j)}g[i]={length:c.sidelength,left:m,top:r}}else{V.DrawFigures.createPointElement(c.elementtype,m,n,c.sidelength,q,c.elementtype!='x',q,2,c.elementtype=='x');if(p){V.DrawFigures.createPointElement(c.elementtype,m,n,c.sidelength,j,c.elementtype!='x',j,2,c.elementtype=='x')}g[i]={length:c.sidelength,left:m,top:n}}var s=m+c.sidelength+(c.elementtype=='x'?5:3);var t=n+c.sidelength*(e?0.45:0.9);var u=V.DrawFigures.createText(c.texts[i],s,t,null,null,c.fontsize,c.fontfamily,o?k:b.fontcolor,null);if(o&&b.strikethrough){var v=t-c.fontsize/3;V.DrawFigures.createLine(s,v,s+u,v,1,k)}f[i]={length:u,left:s,top:t-c.fontsize,right:s+u,bottom:t}}var w=c.borderwidth;var x={borderwidth:w,left:c.left+w/2,top:c.top+w/2,width:c.legendWidth-w,height:c.legendHeight-w,points:g,texts:f};V.coordinates.legend=x;if(w>0){V.DrawFigures.createRectangleBorder(x.left,x.top,x.width,x.height,w,b.bordercolor)}};V._getFormatDiff=function(a,b,c){if(b>c){var d=b;b=c;c=d}if(a=='d'){return b.shortOf('d',c)}else if(a=='t'){return b.shortOf('n',c)}else{return c-b}};V._getComputed=function(g,h,j,k,l,m){var n=j.minvalue;var o=j.maxvalue;var p=function(a,b,c){if(Math.abs(a-b)<0.00001){return b/2}var d=V._getFormatDiff(c,n!=null&&n<a?n:a,o!=null&&o>b?o:b)/m;var e=DChart.Const.Interval[c].__copy();var f=false;while(!f){if(d<e[0]){e.__multiply(0.1)}if(d>e[e.length-1]){e.__multiply(10)}for(var i=1;i<e.length;i++){if(e[i-1]<=d&&e[i]>=d){f=true;d=d-e[i-1]<e[i]-d?e[i-1]:e[i];break}}}return d};var q=j.interval;if(!q){q=p(k,l,h)}if(n==null){if(h=='d'||h=='t'){var r=q*60000*(h=="d"?1440:1);n=new Date(k-r*g);if(h=='d'){n=new Date(Date.parse(n.format('yyyy/MM/dd')))}}else if(h=='p'&&(k/q)<3){n=0}else{n=(Math.floor(k/q)-g)*q}}if(g&&n<0&&V._configs.notAllowValueNegative){n=0}if(o==null){if(h=='d'||h=='t'){var r=q*60000*(h=="d"?1440:1);o=new Date(n.getTime()+(Math.ceil((l.getTime()-n.getTime())/r)+g)*r)}else{o=n+(Math.ceil((l-n)/q)+g)*q}}if(h=='p'&&o>100){o=100}var s=0;var t=DChart.Methods.CopyInnerValue(h,n);var u=DChart.Methods.AddInnerValue(h,t,q);while(u<=o||((h=='p'||h=='n')&&Math.abs(o-u)<0.0001)){u=DChart.Methods.AddInnerValue(h,u,q);s++}o=DChart.Methods.AddInnerValue(h,u,-q);if((h=='p'||h=='n')&&o<l){o+=q;s++}o=DChart.Methods.FormatNumber(o);n=DChart.Methods.FormatNumber(n);q=DChart.Methods.FormatNumber(q);if(o<n){throw new Error(V._messages.WrongParam+V._messages.AxisMaxLessThanMin);}if(o<l){throw new Error(V._messages.WrongParam+V._messages.AxisMaxLessThanActual);}if(n>k){throw new Error(V._messages.WrongParam+V._messages.AxisMinMoreThanActual);}return{interval:q,maxvalue:o,minvalue:n,scalecount:s}};V._formatAxisData=function(e){if(!DChart.Const.DrawAxis.__contains(V.GraphType)){throw new Error(V._messages.MainGraphicMustBeAxis);}if(V._configs.axisData){return V._configs.axisData}var f=V.innerOptions;var g=V.innerData;var h=f.labelAxis.valueType;var l=V._configs.valueAxiaDataIsRange;var m=(!l&&!h&&g[0].value.length>1)||(!l&&h&&g[0].value.length&&g[0].value[0].length==2)||(l&&g[0].value.length>1&&g[0].value[0].length==2);var n=f.valueType||DChart.Const.Defaults.ValueType;var e=e&&m&&!h&&(n=='p'||n=='n');var o=(e||f.valueAxis.verticalcomputeP&&m&&!h)&&n=='p';var p=null;var q=null;var r=null;var s=null;var t=g.length;if(m){t=g[0].value.length}var u=1;if(m){u=g.length}var v=[];if(n=='p'||e){if(m){if(o||e){for(var i=0;i<t;i++){var w=0;for(var j=0,item;item=g[j];j++){w+=(h?item.value[i][1]:item.value[i])}v[i]=w}}else{for(var i=0,item;item=g[i];i++){var w=0;for(var j=0;j<item.value.length;j++){w+=(h?item.value[j][1]:item.value[j])}v[i]=w}}}else{v=0;for(var i=0,item;item=g[i];i++){v+=(h?item.value[1]:item.value)}}}var z=function(a,b,c,i,j,k){if((b=='d'||b=='t')&&!c.getDate){var d=Date.parse(c.toString().replace(/-/g,"/"));if(isNaN(d)){throw new Error(V._messages.WrongData+"'"+c+"'"+V._messages.NeedDateData);}else{c=new Date(d);if(k==undefined){if(j==undefined){g[i].value=c}else{g[i].value[j]=c}}else{if(l&&a&&h){g[i].value[j][1][k]=c}else if(l&&!a){g[i].value[j][0]=c}else{g[i].value[j][k]=c}}}}else if(b=='n'||b=='p'){if(typeof c!='number'){throw new Error(V._messages.WrongData+"'"+c+"'"+V._messages.NeedNumberData);}if(b=='p'){if(c<0){throw new Error(V._messages.WrongData+'\''+c+'\''+V._messages.DataMustGreaterThanZero);}if(k==undefined){if(j==undefined){c=(c/v)*100;g[i].percent=c}else{c=(c/(m?(o?v[j]:v[i]):v))*100;if(m&&!g[i].percent){g[i].percent=[]}if(m){g[i].percent[j]=c}else{g[i].percent=c}}}else{c=(c/(o?v[j]:v[i]))*100;if(!g[i].percent){g[i].percent=[]}g[i].percent[j]=c}}else{if(a&&V._configs.notAllowValueNegative&&c<0){throw new Error(V._messages.WrongData+'\''+c+'\''+V._messages.DataMustGreaterThanZero);}}}return c};var A=function(a){if(r===null||a>r){r=a}if(s===null||a<s){s=a}};var B=function(a){if(p===null||a>p){p=a}if(q===null||a<q){q=a}};var C=V._configs.computeSplitPoint;var D=[];var E=function(a,b,c){if(!C){return}if(c){D[b]=[null,null]}if(D[b][0]==null||a<D[b][0]){D[b][0]=a}if(D[b][1]==null||a>D[b][1]){D[b][1]=a}};if(m){for(var i=0,item;item=g[i];i++){for(var j=0;j<item.value.length;j++){var F=item.value[j];var G=null;var H=F;if(h){if(F.length!=2){throw new Error(V._messages.WrongData+"'"+F+"'"+V._messages.AxisVauleShouldBeDArray);}G=F[0];H=F[1];if(l&&H.length!=2){throw new Error(V._messages.ValueAxisValueShouldBeDArray);}}if(G!=null){G=z(false,h,G,i,j,0);A(G)}if(l){for(var k=0;k<=1;k++){var I=H[k];I=z(true,n,I,i,j,k);B(I)}}else{H=z(true,n,H,i,j,h?1:undefined);B(H);E(H,i,j==0)}}}if(e){if(n=='n'){for(var i=0;i<t;i++){B(v[i])}}else{p=100;q=0}}}else{for(var i=0,item;item=g[i];i++){var G=null;var H=item.value;if(h){if(item.value.length!=2){throw new Error(V._messages.WrongData+"'"+item.value+"'"+V._messages.AxisVauleShouldBeDArray);}G=item.value[0];H=item.value[1];if(l&&H.length!=2){throw new Error(V._messages.ValueAxisValueShouldBeDArray);}}if(G!=null){G=z(false,h,G,i,0);A(G)}if(l){for(var j=0;j<=1;j++){var I=H[j];I=z(true,n,I,i,j);B(I)}}else{var H=z(true,n,H,i,h?1:undefined);B(H)}}}var J=null;if(C){var K=null;var L=null;for(var i=0,point;point=D[i];i++){var M=point[0];var N=point[1];if(K==null){K=N;L=M}if(N>L&&(K>L||M<L)){L=M}if(M<K&&(K>L||N>K)){K=N}}if(n=='d'||n=='t'){J=new Date((K.getTime()+L.getTime())/2);if(n=='d'){J=new Date(Date.parse(J.format('yyyy/MM/dd')))}}else{J=(K+L)/2}}if(h&&f.labelAxis.sort){var O=function(x,y){if(y.value){if(y.value[0]>x.value[0]){return-1}else{return 1}}else{if(y[0]>x[0]){return-1}else{return 1}}};if(m){for(var i=0,item;item=g[i];i++){item.value.sort(O)}}else{g.sort(O)}}var P=V._getComputed(1,n,f.valueAxis,q,p,6);var Q={vValueType:n,lValueType:h,heapCompute:e,multiple:m,vMaxval:p,vMinval:q,vInterval:P.interval,vMaxValue:P.maxvalue,vMinValue:P.minvalue,vScalecount:P.scalecount,tuftCount:t,demanCount:u,splitpoint:J};if(h){P=V._getComputed(0,h,f.labelAxis,s,r,6);Q.lValueType=h;Q.lInterval=P.interval;Q.lMaxval=r;Q.lMinval=s;Q.lMaxValue=P.maxvalue;Q.lMinValue=P.minvalue;Q.lScalecount=P.scalecount}var R=function(){var a=[];var b=f.valueAxis.content;var c=DChart.Methods.CopyInnerValue(Q.vValueType,Q.vMinValue);for(var i=0;i<=Q.vScalecount;i++){a[i]=b.call(f,DChart.Methods.AddInnerValue(Q.vValueType,c,Q.vInterval*i));c=DChart.Methods.CopyInnerValue(Q.vValueType,Q.vMinValue)}return a};var S=function(){var a=[];if(Q.lValueType){var b=[];var c=f.labelAxis.content;if(typeof c=='function'){var d=DChart.Methods.CopyInnerValue(Q.lValueType,Q.lMinValue);for(var i=0;i<=Q.lScalecount;i++){b[i]=c.call(f.labelAxis,DChart.Methods.AddInnerValue(Q.lValueType,d,Q.lInterval*i));d=DChart.Methods.CopyInnerValue(Q.lValueType,Q.lMinValue)}}a=b}else{if(Q.multiple){a=f.labelAxis.labels||[]}else{for(var i=0,data;data=V.innerData[i];i++){a[i]=data.text||' '}if(a.__only(' ')&&f.labelAxis.labels&&f.labelAxis.labels.length){a=f.labelAxis.labels}}}return a};Q.vLabels=R();Q.vScalecount=Q.vLabels.length-1;Q.lLabels=S();Q.lScalecount=Q.lLabels.length-1;V._configs.axisData=Q;return Q};V._computeAxis=function(a){if(!a.AxisValid){return null}if(V._configs.axisSize){return V._configs.axisSize}var b=V.innerOptions;var c=V._configs.axisData;var d=V._configs.invertAxis;var e=V.innerOptions.background.borderwidth||0;var a=a||V._calculateOutersValid();var f=a.legendValid?V._computeLegend():null;var g=V.canvas.height/30;if(a.titleValid){g=V._computeTitle(a).occupyTop}var h=DChart.Const.Draw3DAxis.__contains(V.GraphType);var i=V.canvas.width-e*2-(f?f.occupyLeft:0)-(f?f.occupyRight:0);var j=V.canvas.height-e*2-g-(f?f.occupyTop:0)-(f?f.occupyBottom:0);var k=i/(d?8:DChart.Const.Defaults.AxisYDrawableCut[c.vValueType]);var l=j/DChart.Const.Defaults.AxisXDrawableCut;var m=b.labelAxis.length||(d?k:l);var n=b.valueAxis.length||(d?l:k);var o=d?m:n;var p=d?n:m;var q=a.legendValid&&f.placeY=='middle'?o/8:o/2;var r=a.titleValid?p/10:p/6;if(!d&&(typeof b.caption.content=='string'||b.caption.content!='')){r+=p/10}if(f&&f.occupyTop>0){r=0}var s=b.scale.linewidth==null?1:b.scale.linewidth;var t=b.close.linewidth||s||1;var u=b.labelAxis.linewidth==null?1:b.labelAxis.linewidth;var v=b.valueAxis.linewidth==null?1:b.valueAxis.linewidth;var w=d?v:u;var x=d?u:v;var y=b.cross.length||n/15;var z=null;if(h){var A=b.axis3d;z={};z.draw3daxis=true;z.sightangle=Math.PI*(A.sightangle||(c.multiple?0.2:0.3));z.sinsightangle=Math.sin(z.sightangle);z.cossightangle=Math.cos(z.sightangle);z.marbleheight=A.marbleheight||m/3;z.marblewidth=A.marblewidth||m*0.5;z.stagewidth=A.stagewidth||z.marblewidth*2/3;z.curtainwidth=A.curtainwidth||z.marblewidth/7;if(z.curtainwidth+z.stagewidth>z.marblewidth){throw new Error(V._messages.MarbleShouldBeBigger);}if(z.sightangle<=0||z.sightangle>Math.PI/2){throw new Error(V._messages.WrongSightAngle);}}var B=V.canvas.width-e-q-(f?f.occupyRight:0);var C=V.canvas.height-p-e-(f?f.occupyBottom:0);var D=e+o+(f?f.occupyLeft:0);var E=e+g+r+(f&&f.occupyTop>0?f.occupyTop:p/10);if(z){D+=z.sinsightangle*z.stagewidth;C-=z.cossightangle*z.stagewidth}var F=(d?B-D:C-E)/c.vScalecount;var G=c.multiple;var H=c.lLabels.length||(G?V.innerData[0].value.length:V.innerData.length);var I=DChart.Const.AxisFromFirstLeft.__contains(V.GraphType);var J=0;var K=0;var L=d?C-E:B-D;var M=d?B-D:C-E;if(!I){J=b.labelAxis.startlength;K=b.labelAxis.endlength;if(J==null&&K==null){J=L/(H+1/3)*2/3;K=J}else if(J==null&&K!=null){J=K}else if(K==null&&J!=null){K=J}if(J<0||K<0||J+K>L){throw new Error(V._messages.WrongParam+V._messages.LabelDistanceExceedMax);}}var N=(d?C:D)+(d?-K:J);var O=(L-J-K)/(H-1);var P=null;if(DChart.Const.ComputeSplitPoint.__contains(V.GraphType)){P=(d?D:E)+M*V._getFormatDiff(c.vValueType,(d?c.vMinValue:c.vMaxValue),c.splitpoint)/V._getFormatDiff(c.vValueType,c.vMinValue,c.vMaxValue)}var Q={labelAxisLength:m,valueAxisLength:n,yAxisWidth:o,xAxisHeight:p,minX:Math.ceil(D),maxX:Math.ceil(B),minY:Math.ceil(E),maxY:Math.ceil(C),axisValueCut:F,crossLength:y,scaleLineWidth:s,closeLineWidth:t,labelAxisLineWidth:u,valueAxisLineWidth:v,xAxisLineWidth:w,yAxisLineWidth:x,startPos:N,labelDistance:O,splitLinePos:P};V._configs.axisSize=z?DChart.Methods.Extend(Q,z):Q;return V._configs.axisSize};V._createAxis=function(o){var o=o||V._calculateOutersValid();if(!o.AxisValid||V.innerData.length==0){return}V.coordinates.axis={};var p=V.innerOptions;var q=p.background.borderwidth||0;if(typeof p.valueAxis.content!='function'){return}var r=V._configs.axisData;var s=V._configs.axisSize||V._computeAxis(o);var t=V._configs.invertAxis;var u=r.vValueType=='d'||r.vValueType=='t';var v=r.lValueType=='d'||r.lValueType=='t';var w=p.valueAxis.fontsize||(t?1.3:1)*(s.valueAxisLength-s.valueAxisLineWidth)/(u?7:5);var z=p.valueAxis.fontweight||'normal';var A=p.valueAxis.fontfamily||p.fontFamily||DChart.Const.Defaults.FontFamily;var B=p.valueAxis.fontcolor;var C=p.valueAxis.linecolor||DChart.Const.Defaults.AxisLineColor;var D=(p.cross.show?s.crossLength:3)+s.valueAxisLineWidth+3;var E=function(a,b,c,d,e,f){if(a==null){a=0;var g=true;while(g){var h=false;var j=Math.cos(a*Math.PI);var k=Math.abs(a*Math.PI);for(var i=0;i<=c.length-1;i++){var l=V.DrawFigures.measureText(c[i],d,e,f);if(b){if(l*j>s.yAxisWidth-D){h=true;break}}else{var m=i==0?0:V.DrawFigures.measureText(c[i-1],d,e,f);var n=t?s.valueAxisLength:s.labelDistance;if(i>0&&n*k<e&&(l+m>2*n/j)){h=true;break}}}g=h;if(h){a-=0.01}}}return a};var F=function(){if(s.valueAxisLineWidth&&s.valueAxisLineWidth>0){if(t){var y=s.maxY+s.valueAxisLineWidth/2;V.DrawFigures.createLine(s.minX-s.labelAxisLineWidth,y,s.maxX+s.valueAxisLength/20,y,s.valueAxisLineWidth,C)}else{var x=s.minX-s.valueAxisLineWidth/2;V.DrawFigures.createLine(x,s.maxY+s.labelAxisLineWidth+1,x,s.minY-s.valueAxisLength/20,s.valueAxisLineWidth,C)}}if(s.labelAxisLineWidth&&s.labelAxisLineWidth>0){if(t){var x=s.minX-s.labelAxisLineWidth/2;V.DrawFigures.createLine(x,s.minY-(p.close.show?s.closeLineWidth:0),x,s.maxY,s.labelAxisLineWidth,p.labelAxis.linecolor||DChart.Const.Defaults.AxisLineColor)}else{var y=s.maxY+s.labelAxisLineWidth/2+1;V.DrawFigures.createLine(s.minX-1,y,s.maxX+(p.close.show?s.closeLineWidth:0),y,s.labelAxisLineWidth,p.labelAxis.linecolor||DChart.Const.Defaults.AxisLineColor)}}};var G=function(){var a=Math.cos(s.sightangle);var b=s.minX-s.stagewidth*s.sinsightangle;var c=s.maxY+s.stagewidth*s.cossightangle;var d=p.axis3d.marblefacecolor||'#cccccc';var e=p.axis3d.marbletopcolor||DChart.Methods.getDarkenColor(d,0.7);var f=p.axis3d.marblerightcolor||DChart.Methods.getDarkenColor(d,0.8);V.DrawFigures.create3DHistogram(b,c,s.maxX-s.minX,s.marbleheight,d,p.axis3d.marblelinewidth,s.sightangle,s.marblewidth,p.axis3d.marblelinecolor,e,f);var g=[[s.minX,s.minY],[s.minX+s.curtainwidth*s.sinsightangle,s.minY-s.curtainwidth*s.cossightangle],[s.maxX+s.curtainwidth*s.sinsightangle,s.minY-s.curtainwidth*s.cossightangle],[s.maxX,s.minY]];V.DrawFigures.createCloseFigure(g,e);var h=[[s.maxX,s.minY],[s.maxX+s.curtainwidth*s.sinsightangle,s.minY-s.curtainwidth*s.cossightangle],[s.maxX+s.curtainwidth*s.sinsightangle,s.maxY-s.curtainwidth*s.cossightangle],[s.maxX,s.maxY]];V.DrawFigures.createCloseFigure(h,f)};var H=function(a,x,y,b){var c=r.vLabels;var d=s.minX-D;var e=s.maxY+(p.cross.show?s.crossLength:3)+s.valueAxisLineWidth+3+w;var f=E(p.valueAxis.fontrotate,!t,c,z,w,A);V.coordinates.axis.vlabels=[];for(var i=0;i<=r.vScalecount;i++){if(t){var g=s.minX+i*s.axisValueCut;var h=V.DrawFigures.createText(c[i],g,e,'center',z,w,A,B,f,'right');V.coordinates.axis.vlabels[i]={index:i,left:g-h/2,right:g+h/2,top:e-w,bottom:e,fontsize:w,length:h}}else{var j=s.maxY-i*s.axisValueCut+s.scaleLineWidth/2+w/3;var h=V.DrawFigures.createText(c[i],d,j,'right',z,w,A,B,f);V.coordinates.axis.vlabels[i]={index:i,left:d-h,right:d,top:j-w,bottom:j,fontsize:w,length:h}}}};var I=function(){var a=r.lLabels;var b=p.labelAxis.fontsize||(v?s.xAxisHeight/6:s.xAxisHeight/4.5);var c=p.labelAxis.fontweight||z;var d=p.labelAxis.fontfamily||A;var e=p.labelAxis.fontcolor||B;var f=E(p.labelAxis.fontrotate,t,a,c,b,d);V.coordinates.axis.llabels=[];for(var i=0,label;label=a[i];i++){if(t){var g=s.minX-s.labelAxisLineWidth-b*(f<0?1:0.5);var h=s.startPos-(s.labelDistance)*i+b/2;var j=V.DrawFigures.createText(label,g,h,'right',c,b,d,e,f);V.coordinates.axis.llabels[i]={index:i,left:g-j,right:g,top:h-b,bottom:h,fontsize:b,length:j}}else{var k=s.draw3daxis?-s.stagewidth*Math.sin(s.sightangle):0;var l=s.draw3daxis?s.stagewidth*Math.cos(s.sightangle)+s.marbleheight/2-b:0;var m=s.startPos+(s.labelDistance)*i;var h=s.maxY+s.labelAxisLineWidth+b*1.2;var j=V.DrawFigures.createText(label,m+k,h+l,'center',c,b,d,e,f,'right');V.coordinates.axis.llabels[i]={index:i,left:m-j/2,right:m+j/2,top:h-b,bottom:h,fontsize:b,length:j}}}};var J=function(){if(typeof p.caption.content!='string'){return}var a=p.caption.fontsize||(w+(u?2:-1));if(t){var b=Math.min(s.maxX+a*1.5,V.canvas.width-q-a);var c=s.maxY+s.xAxisLineWidth/2;var d=V.DrawFigures.createText(p.caption.content,b,c,'center',p.caption.fontweight,a,p.caption.fontfamily,p.caption.fontcolor||B,0.5);V.coordinates.axis.caption={left:b,right:b+a,top:c-d/2,bottom:c+d/2,fontsize:a,length:d}}else{var b=s.minX-s.valueAxisLineWidth/2;var e=s.minY-a;var d=V.DrawFigures.createText(p.caption.content,b,e,'center',p.caption.fontweight,a,p.caption.fontfamily,p.caption.fontcolor||B);V.coordinates.axis.caption={left:b-d/2,right:b+d/2,top:e-a,bottom:e,fontsize:a,length:d}}};var K=function(){if(!p.cross.show){return}var a=p.scale.backcolors&&p.scale.backcolors.length>1;var b=p.cross.linewidth;var c=p.cross.linecolor||C;var d=s.crossLength;if(t){var e=s.maxY+s.valueAxisLineWidth;var f=s.maxY+s.valueAxisLineWidth+s.crossLength;var g=Math.floor((s.scaleLineWidth+0.1)/2);for(var i=1;i<=r.vScalecount;i++){var x=s.maxX-i*s.axisValueCut;if(i==r.vScalecount&&x<s.minX){x=s.minX}if(a&&i<r.vScalecount){x-=g}V.DrawFigures.createLine(x+s.axisValueCut,e,x+s.axisValueCut,f,p.cross.linewidth,c)}V.DrawFigures.createLine(s.minX-1,e,s.minX-1,f,p.cross.linewidth,c)}else{var h=s.minX-s.valueAxisLineWidth;var j=h-s.crossLength;for(var i=1;i<=r.vScalecount;i++){var y=s.maxY-i*s.axisValueCut;if(a){y+=s.scaleLineWidth/2}V.DrawFigures.createLine(j,y,h,y,b,c)}V.DrawFigures.createLine(j,s.maxY+1,h,s.maxY+1,b,c)}};var L=function(){if(!(p.close.show&&s.closeLineWidth&&s.closeLineWidth>0)){return}var a=p.close.linecolor||p.scale.linecolor||DChart.Const.Defaults.ScaleLineColor;if(t){var b=s.minY-s.closeLineWidth/2;V.DrawFigures.createLine(s.minX,b,s.maxX+1,b,s.closeLineWidth,a)}else{var c=s.maxX+s.closeLineWidth/2;V.DrawFigures.createLine(c,s.maxY+1,c,s.minY,s.closeLineWidth,a)}};var M=function(){var a=p.yAxisTitle;if(!a.content){return}var b=a.fontsize||s.yAxisWidth/5;var c=a.fontweight||'bold';var d=(s.minY+s.maxY)/2;var e=s.minX-s.yAxisLineWidth-(s.yAxisWidth-s.yAxisLineWidth)*(a.titlelocation||(t?0.75:DChart.Const.Defaults.AxisYTitleLocation[r.vValueType]));var f=V.DrawFigures.createText(a.content,e,d,'center',c,b,a.fontfamily,a.fontcolor,-0.5);V.coordinates.axis.yAxisTitle={top:d-f/2,bottom:d+f/2,left:e-b,right:e,fontsize:b,length:f}};var N=function(){var a=p.xAxisTitle;if(!a.content){return}var b=a.fontsize||s.xAxisHeight/5;var c=a.fontweight||'bold';var d=V.canvas.width/2;var e=s.maxY+s.xAxisLineWidth+(s.xAxisHeight-s.xAxisLineWidth)*(a.titlelocation||(t?0.75:DChart.Const.Defaults.AxisXTitleLocation[r.vValueType]));var f=V.DrawFigures.createText(a.content,d,e,'center',c,b,a.fontfamily,a.fontcolor);V.coordinates.axis.xAxisTitle={top:e-b,bottom:e,left:d-f/2,right:d+f/2,fontsize:b,length:f}};if(s.draw3daxis){G()}else{F()}J();M();N();H();I();K();L();V.coordinates.axis.yAxis={width:s.yAxisWidth};V.coordinates.axis.xAxis={height:s.xAxisHeight}};V._createFooter=function(){var a=V.innerOptions.footer;if(!a.content){return}var b=V.coordinates.canvas;var c=a.fontsize||Math.min(b.height/25,b.width/50);var d=b.height*(1-(a.bottomdistance||DChart.Const.Defaults.FooterBottomDistance))-b.borderwidth-c/2;var e=b.width*(1-(a.rightdistance||DChart.Const.Defaults.FooterRightDistance))-b.borderwidth;var f=a.fontcolor||DChart.Const.Defaults.FooterFontColor;var g=V.DrawFigures.createText(a.content,e,d,'right',a.fontweight,c,a.fontfamily,f);V.coordinates.footer={top:d-c,bottom:d,right:e,left:e-g,fontsize:c,length:g}};V._createScales=function(a,b,c){var a=a||V._calculateOutersValid();if(!a.AxisValid||V.innerData.length==0){return}var d=V.innerOptions;var e=V._configs.axisSize||V._computeAxis(a);var f=V._configs.axisData;var g=e.scaleLineWidth;var h=Math.floor((g+0.1)/2);var j=d.scale.linecolor||DChart.Const.Defaults.ScaleLineColor;var k=d.scale.backcolors;var l=V._configs.invertAxis;if(b&&k&&k.length==1){V.DrawFigures.createRectangleFill(e.minX,e.minY,e.maxX-e.minX,e.maxY-e.minY,k[0])}for(var i=1;i<=f.vScalecount;i++){if(l){var x=e.maxX-i*e.axisValueCut;if(i==f.vScalecount&&x<e.minX){x=e.minX}if(b&&k&&k.length>1){var m=k.length?k[(i-1)%k.length]:null;if(i<f.vScalecount){x-=h}V.DrawFigures.createRectangleFill(x,e.minY,e.axisValueCut-h,e.maxY-e.minY,m)}if(c&&g>0){V.DrawFigures.createLine(x+e.axisValueCut,e.minY,x+e.axisValueCut,e.maxY,g,j)}}else{var y=e.maxY-i*e.axisValueCut;if(b&&k&&k.length>1){var m=k.length?k[(i-1)%k.length]:null;y+=g/2;var n=e.axisValueCut-g/2;if(i==1){n+=1}V.DrawFigures.createRectangleFill(e.minX,y,e.maxX-e.minX,n,m)}if(c&&g>0){V.DrawFigures.createLine(e.minX,y,e.maxX,y,g,j)}}}if(c&&d.scale.drawvertical){var o=d.close.show&&e.closeLineWidth&&e.closeLineWidth>0;for(var i=1;i<f.lScalecount+(o?0:1);i++){if(l){var p=e.startPos-i*e.labelDistance;if(g>0){V.DrawFigures.createLine(e.minX,p,e.maxX,p,g,j)}}else{var p=e.startPos+i*e.labelDistance;if(g>0){V.DrawFigures.createLine(p,e.minY,p,e.maxY+1,g,j)}}}}if(c&&DChart.Const.DrawSplitLine.__contains(V.GraphType)&&d.splitLine.show){var q=d.splitLine.linecolor;var r=d.splitLine.linewidth;if(l){V.DrawFigures.createLine(e.splitLinePos,e.minY,e.splitLinePos,e.maxY,r||1,q)}else{V.DrawFigures.createLine(e.minX,e.splitLinePos,e.maxX,e.splitLinePos,r||1,q)}}};V._calculateOutersValid=function(){var a=V.innerOptions;var b=a.legend.show;if(V._configs.axisData&&!V._configs.axisData.multiple||V._configs.legendInvalid){b=false}var c=a.title&&a.title.show&&a.title.content;var d=c&&a.subTitle&&a.subTitle.show&&a.subTitle.content;var e=DChart.Const.DrawAxis.__contains(V.GraphType);return{legendValid:b,titleValid:c,subTitleValid:d,AxisValid:e}};V._getMouseLoction=function(e){if(e.offsetX!=null){return{X:e.offsetX,Y:e.offsetY}}else{var c=function(a){var b={x:0,y:0};while(a){b.x+=a.offsetLeft;b.y+=a.offsetTop;a=a.offsetParent}return b};var d=e.target;if(d.offsetLeft==undefined){d=d.parentNode}var f=c(d);var g={x:window.pageXOffset+e.clientX,y:window.pageYOffset+e.clientY};return{X:g.x-f.x,Y:g.y-f.y}}};V.DrawFigures={};V._addCustomDraw=function(a,b){V.customDraws.push({funcname:a,options:b})};V.ClearCustomDraws=function(a){V.customDraws.length=0;if(a){V.redrawAll()}};V.DrawFigures.createPointElement=function(a,X,Y,b,c,d,e,f,g,h){if(arguments.length<5){return}if(d==null){d=true}var i=V.ctx;i.save();i.beginPath();switch(a){case'c':if(h){i.arc(X,Y,b/2,0,Math.PI*2)}else{i.arc(X+b/2,Y+b/2,b/2,0,Math.PI*2)}break;case't':if(h){i.moveTo(X-b/2,Y+b/2);i.lineTo(X+b/2,Y+b/2);i.lineTo(X,Y-b/2);i.lineTo(X-b/2,Y+b/2)}else{i.moveTo(X,Y+b);i.lineTo(X+b,Y+b);i.lineTo(X+b/2,Y);i.lineTo(X,Y+b)}break;case'x':if(h){i.moveTo(X-b/2,Y-b/2);i.lineTo(X+b/2,Y+b/2);i.moveTo(X-b/2,Y+b/2);i.lineTo(X+b/2,Y-b/2)}else{i.moveTo(X,Y);i.lineTo(X+b,Y+b);i.moveTo(X,Y+b);i.lineTo(X+b,Y)}break;default:if(h){i.rect(X-b/2,Y-b/2,b,b)}else{i.rect(X,Y,b,b)}break}i.closePath();if(g&&(f>0||a=='x')){i.strokeStyle=(a=='x'?c:e);i.lineWidth=f*2;i.stroke()}if(d&&a!='x'){i.fillStyle=c;i.fill()}i.restore()};V.createPoint=function(a,X,Y,b,c,d,e,f,g,h){V._addCustomDraw('createPointElement',[a,X,Y,b,c,d,e,f,g,h])}V.DrawFigures.createArc=function(a,b,c,d,e,f,g,h,i){if(arguments.length<4){return}var j=V.ctx;g=g||0;h=h||Math.PI*2;j.save();j.beginPath();j.arc(a,b,c,g,h);if(i&&Math.abs(h-g)<Math.PI*2-0.01){j.lineTo(a,b)}j.closePath();if(d>0){j.strokeStyle=e||DChart.Const.Defaults.LineColor;j.lineWidth=d;j.stroke()}if(f){j.fillStyle=f;j.fill()}j.restore()};V.createArc=function(a,b,c,d,e,f,g,h,i){V._addCustomDraw('createArc',[a,b,c,d,e,f,g,h,i])}V.DrawFigures.createRing=function(a,b,c,d,e,f,g,h,i){var j=V.ctx;j.save();j.beginPath();j.moveTo(a+d*Math.cos(f),b+d*Math.sin(f));j.arc(a,b,d,f,g);j.lineTo(a+c*Math.cos(g),b+c*Math.sin(g));j.arc(a,b,c,g,f,true);j.closePath();j.fillStyle=e;j.fill();if(h>0){j.lineWidth=h;j.strokeStyle=i||DChart.Const.Defaults.LineColor;j.stroke()}j.restore()};V.createRing=function(a,b,c,d,e,f,g,h,i){V._addCustomDraw('createRing',[a,b,c,d,e,f,g,h,i])}V.DrawFigures.createRingReflection=function(a,b,c,d,e,f){var g=V.ctx;g.beginPath();g.moveTo(a.iStartX,a.iStartY);g.arc(a.centerX,a.centerY,a.innerRadius,a.angleMin,a.angleMax);g.lineTo(a.d_iEndX,a.d_iEndY);g.arc(a.darkCenterX,a.darkCenterY,a.innerRadius,a.angleMax,a.angleMin,true);g.closePath();g.fillStyle=b;g.fill();g.moveTo(a.oStartX,a.oStartY);g.arc(a.centerX,a.centerY,a.outerRadius,a.angleMin,a.angleMax);g.lineTo(a.d_oEndX,a.d_oEndY);g.arc(a.darkCenterX,a.darkCenterY,a.outerRadius,a.angleMax,a.angleMin,true);g.closePath();g.fillStyle=b;g.fill();V.DrawFigures.createRing(a.darkCenterX,a.darkCenterY,a.innerRadius,a.outerRadius,b,a.angleMin,a.angleMax);if(c>0){if(DChart.Methods.JudgeBetweenAngle(0,Math.PI,a.angleMin)&&!f){V.DrawFigures.createLine(a.oStartX,a.oStartY,a.d_oStartX,a.d_oStartY,c,d)}if(DChart.Methods.JudgeBetweenAngle(Math.PI,Math.PI*2,a.angleMin)&&!e){V.DrawFigures.createLine(a.iStartX,a.iStartY,a.d_iStartX,a.d_iStartY,c,d)}if(DChart.Methods.JudgeBetweenAngle(0,Math.PI,a.angleMax)&&!f){V.DrawFigures.createLine(a.oEndX,a.oEndY,a.d_oEndX,a.d_oEndY,c,d)}if(DChart.Methods.JudgeBetweenAngle(Math.PI,Math.PI*2,a.angleMax)&&!e){V.DrawFigures.createLine(a.iEndX,a.iEndY,a.d_iEndX,a.d_iEndY,c,d)}}g.restore()};V.DrawFigures.measureText=function(a,b,c,d){var e=V.ctx;e.save();e.font=(b||'normal')+' '+(c||DChart.Const.Defaults.FontSize)+'px '+(d||V.innerOptions.fontFamily||DChart.Const.Defaults.FontFamily);var f=e.measureText(a).width;e.restore();return f};V.DrawFigures.createText=function(a,x,y,b,c,d,e,f,g,h){var i=V.ctx;i.save();i.textAlign=b||'left';i.font=(c||'normal')+' '+(d||DChart.Const.Defaults.FontSize)+'px '+(e||V.innerOptions.fontFamily||DChart.Const.Defaults.FontFamily);var j=i.measureText(a).width;i.fillStyle=f||V.innerOptions.fontColor||DChart.Const.Defaults.FontColor;if(g){if(b=='center'&&h=='right'){y-=Math.sin(g*Math.PI)*j/2}i.translate(x,y);i.rotate(g*Math.PI);i.fillText(a,0,0)}else{i.fillText(a,x,y)}i.restore();return j};V.createText=function(a,x,y,b,c,d,e,f,g,h){V._addCustomDraw('createText',[a,x,y,b,c,d,e,f,g,h])}V.DrawFigures.createRectangleFill=function(a,b,c,d,e,f){if(c<=0||d<=0){return}var g=V.ctx;g.save();g.fillStyle=e;if(f){if(f.color){g.shadowColor=f.color}if(f.blur){g.shadowBlur=f.blur}if(f.offsetX){g.shadowOffsetX=f.offsetX}if(f.offsetY){g.shadowOffsetY=f.offsetY}}g.fillRect(a,b,c,d);g.restore()};V.createRect=function(a,b,c,d,e,f){V._addCustomDraw('createRectangleFill',[a,b,c,d,e,f])}V.DrawFigures.createRectangleBorder=function(a,b,c,d,e,f){var g=V.ctx;g.save();g.beginPath();g.lineWidth=e||DChart.Const.Defaults.LineWidth;g.rect(a,b,c,d);g.closePath();g.strokeStyle=f||V.innerOptions.lineColor||DChart.Const.Defaults.LineColor;g.stroke();g.restore()};V.DrawFigures.createLine=function(a,b,c,d,e,f){var e=Math.ceil(e);if(a==c){a=c=DChart.Methods.FormatLinePosition(e,a)}else if(b==d){b=d=DChart.Methods.FormatLinePosition(e,b)}var g=V.ctx;g.save();g.lineWidth=e||DChart.Const.Defaults.LineWidth;g.strokeStyle=f||V.innerOptions.lineColor||DChart.Const.Defaults.LineColor;g.beginPath();g.moveTo(a,b);g.lineTo(c,d);g.stroke();g.restore()};V.createLine=function(a,b,c,d,e,f){V._addCustomDraw('createLine',[a,b,c,d,e,f])}V.DrawFigures.createQuadraticCurve=function(a,b,c,d,e,f,g,h){var g=Math.ceil(g);var i=V.ctx;i.save();i.beginPath();i.moveTo(a,b);i.quadraticCurveTo(c,d,e,f);i.lineWidth=g||DChart.Const.Defaults.LineWidth;i.strokeStyle=h||V.innerOptions.lineColor||DChart.Const.Defaults.LineColor;i.stroke();i.restore()};V.DrawFigures.curveSmoothPoints=function(a,b,c,d){var e=(b[0]+c[0])/2;var f=(b[1]+c[1])/2;if(d){a.quadraticCurveTo(b[0],0.5*f+0.5*b[1],e,f);a.quadraticCurveTo(c[0],0.5*f+0.5*c[1],c[0],c[1])}else{a.quadraticCurveTo(0.5*e+0.5*b[0],b[1],e,f);a.quadraticCurveTo(0.5*e+0.5*c[0],c[1],c[0],c[1])}};V.DrawFigures.createSmoothLine=function(a,b,c,d){var e=V.ctx;var f=a.length;if(f<3){return}e.save();e.lineWidth=b||DChart.Const.Defaults.LineWidth;e.strokeStyle=c||V.innerOptions.lineColor||DChart.Const.Defaults.LineColor;e.beginPath();e.moveTo(a[0][0],a[0][1]);for(var i=0;i<f-1;i++){V.DrawFigures.curveSmoothPoints(e,a[i],a[i+1],d)}e.stroke();e.restore()};V.DrawFigures.createCloseFigure=function(a,b,c,d,e,f,g){var h=V.ctx;h.save();h.beginPath();var j=a.length;h.moveTo(a[0][0],a[0][1]);for(var i=0;i<j-1;i++){if(!e){h.lineTo(a[i+1][0],a[i+1][1])}else{V.DrawFigures.curveSmoothPoints(h,a[i],a[i+1],f)}}h.closePath();if(g){if(g.color){h.shadowColor=g.color}if(g.blur){h.shadowBlur=g.blur}if(g.offsetX){h.shadowOffsetX=g.offsetX}if(g.offsetY){h.shadowOffsetY=g.offsetY}}h.fillStyle=b;h.fill();if(c>0&&d){h.lineWidth=c;h.strokeStyle=d;h.stroke()}h.restore()};V.DrawFigures.createPointsLine=function(a,b,c){if(a.length<2){return}var d=a[0][0];var e=a[0][1];for(var i=1,point;point=a[i];i++){var f=a[i][0];var g=a[i][1];V.DrawFigures.createLine(d,e,f,g,b,c);d=f;e=g}};V.DrawFigures.create3DHistogram=function(a,b,c,d,e,f,g,h,i,j,k,l){j=j||DChart.Methods.getDarkenColor(e);k=k||j;i=i||'#ffffff';f=f||0;g=g||Math.PI*0.30;if(g<=0||g>Math.PI*0.5){throw new Error("偏移角度必须介于0-0.5间");}h=h||c/2;var m=a+Math.sin(g)*h+c;var n=b-Math.cos(g)*h;var o=[[a,b],[a+c,b],[a+c,b+d],[a,b+d]];var p=[[a,b],[m-c,n],[m,n],[a+c,b]];var q=[[a+c,b],[m,n],[m,n+d],[a+c,b+d]];var r=[[a,b],[m-c,n],[m,n],[m,n+d],[a+c,b+d],[a,b+d]];V.DrawFigures.createCloseFigure(r,e,0,null,false,false,l);V.DrawFigures.createCloseFigure(o,e,f,i);V.DrawFigures.createCloseFigure(p,j,f,i);V.DrawFigures.createCloseFigure(q,k,f,i)};V.SavePic=function(e,f){f=f||'png';var g=function(a){a=a.toLowerCase().replace(/jpg/i,'jpeg');var r=a.match(/png|jpeg|bmp|gif/)[0];return'image/'+r};var h=function(a,b){var c=document.createElementNS('http://www.w3.org/1999/xhtml','a');c.href=a;c.download=b;var d=document.createEvent('MouseEvents');d.initMouseEvent('click',true,false,window,0,0,0,0,0,false,false,false,false,0,null);c.dispatchEvent(d)};var i=V.canvas.toDataURL(g(f));i=i.replace(g(f),'image/octet-stream');var e=(e||DChart.Const.Defaults.SavedPicName)+'.'+f;h(i,e)};V._computeRadiusForPies=function(a,b,c){var d=V._getDrawableCoordinate();var e=DChart.Methods.IsNumber(a.offX)?a.offX:0;var f=DChart.Methods.IsNumber(a.offY)?a.offY:0;var g=(d.maxX-d.minX)/2;var h=(d.maxY-d.minY)/2;var i=Math.min(g,h);var j=a.margin==null&&(a.radar||a.outerLabel.show)?i/6:i/10;if(DChart.Methods.IsNumber(a.margin)&&a.margin>0){j=a.margin}if(e<0&&g<-e){e=-g/2}if(e>0&&g<e){e=g/2}if(f<0&&h<-f){f=-h/2}if(f>0&&h<f){f=h/2}var k=Math.min(g-Math.abs(e),h-Math.abs(f))-j;var l=b||1;var m=c||1;k=k/Math.max(l,m);var n=(d.centerX+e)/l;var o=(d.centerY+f)/(c?c*1.07:1);return{coordinate:d,maxRadius:k,centerX:n,centerY:o}};V._computeSegmentTotal=function(b){var c=null;var d=null;var e=0;var f=[];var g=b[0].value.length;var h=g!=undefined;var j=function(a){if(typeof a!='number'){throw new Error(V._messages.WrongData+'\''+a+'\''+V._messages.NeedNumberData);}else if(a<0){throw new Error(V._messages.WrongData+'\''+a+'\''+V._messages.DataMustGreaterThanZero);}else{if(d==null){c=d=a}else{if(a>d){d=a}else if(a<c){c=a}}return a}};for(var k=0;k<(h?g:1);k++){var l=0;for(var i=0,item;item=b[i];i++){var m=j(h?item.value[k]:item.value);e+=m;l+=m}f[k]=l}return{multiple:h,segmentTotal:e,segmentTotals:f,minval:c,maxval:d}};V._methodsFor3D={computeLoc:function(a){a.isRight=DChart.Methods.JudgeBetweenAngle(-Math.PI*0.5,Math.PI*0.5,a.midAngle);a.isBottom=DChart.Methods.JudgeBetweenAngle(a.angleMin,a.angleMax,Math.PI/2);a.isTop=DChart.Methods.JudgeBetweenAngle(a.angleMin,a.angleMax,-Math.PI/2)},pieshapeSort:function(a,b){if(a.isBottom){return 1}else if(b.isBottom){return-1}else if(a.isTop){return-1}else if(b.isTop){return 1}else{if(a.isRight==b.isRight){if(a.isRight){return DChart.Methods.judgeClockwiseBehind(-0.5,0.5,a.midAngle,b.midAngle)?-1:1}else{return DChart.Methods.judgeClockwiseBehind(0.5,1.5,a.midAngle,b.midAngle)?1:-1}}else{if(a.isRight){return-1}else{return 1}}}}};V._initial()};return W};