if(!window.DChart){throw new Error('未能加载dragonchart.core.js，该js必须在其他DChart框架的js加载之前被引用。\n'+'Not loaded dragonchart.core.js which must be loaded before other DChart\'s js.');}else{DChart.Const.Skins.BlackAndWhite.RangeBar={SmallLabelColor:null,BigLabelColor:null}}DChart.RangeBar=DChart.getCore().__extends({GraphType:'RangeBar',SetDefaultOptions:function(){this._resetSharedOpions();this.innerOptions=DChart.Methods.Extend(this.originalDefaultOptions,{animateY:true,animateX:true,bar:{colors:null,length:null,gap:null,useSameColor:true},tip:{content:function(a){var b=null;if(this.valueType=='d'){b='<br/>Small Value: '+a.value[0].format('yyyy-MM-dd')+'<br/>Big Value: '+a.value[1].format('yyyy-MM-dd')}else if(this.valueType=='t'){b='<br/>Small Value: '+a.value[0].format('MM-dd hh:mm')+'<br/>Big Value: '+a.value[1].format('MM-dd hh:mm')}else{b='<br/>Small Value: '+a.value[0]+'<br/>Big Value: '+a.value[1]}return'<div>'+a.text+'：'+b+'&nbsp;</div>'}},smallLabel:{show:true,content:function(a){if(this.valueType=='d'){return a.format('yyyy-MM-dd')}else if(this.valueType=='t'){return a.format('MM-dd hh:mm')}else{return a.toString()}},color:null,fontweight:null,fontsize:null,fontfamily:null},bigLabel:{show:true,content:function(a){if(this.valueType=='d'){return a.format('yyyy-MM-dd')}else if(this.valueType=='t'){return a.format('MM-dd hh:mm')}else{return a.toString()}},color:null,fontweight:null,fontsize:null,fontfamily:null}});return this},Draw:function(z,A){var B=this;if(arguments.length===1){if(!DChart.Methods.IsArray(arguments[0])){A=arguments[0];z=undefined}}B.SetOptions(A);B._checkOptions();var C=B.innerOptions;if(!C.animateY&&!C.animateX){C.animation=false}B.SetData(z);var D=DChart.Const.Language[B.Language];if(C.valueType=='p'){throw new Error(D.WrongParam+D.ValueTypeMustNotBePercent);}B._onStart();B.tempData.upturnAxis=true;B.tempData.valueAxiaDataIsRange=true;B.shapes.bars=[];var E=B._formatAxisData();var F=B._calculateOutersValid();var G=B._computeAxis(F);var H=B._getDrawableCoordinate();B.coordinates.draw=H;var I=C.shadow.show?C.shadow:null;var J=function(a,b,c,d,e,f,g){B.DrawFigures.createRectangleFill(a,b,c,d,e,g||I);if(f){var h=f.value[0];var i=f.value[1];if(h>i){h=f.value[1];i=f.value[0]}var j=C.smallLabel;if(j.show){var k=typeof j.content=='function'?j.content.call(C,h):'';if(k){var l=f.smallfontsize||j.fontsize||DChart.Methods.CapValue(d,18,11);var m=f.smallfontweight||j.fontweight;var n=f.smallfontcolor||j.color;var o=a-l/2;var p=b+d/2+l/3;B.DrawFigures.createText(k,o,p,'right',m,l,j.fontfamily,n)}}j=C.bigLabel;if(j.show){var q=typeof j.content=='function'?j.content.call(C,i):'';if(q){var l=f.bigfontsize||j.fontsize||DChart.Methods.CapValue(d,18,11);var m=f.bigfontweight||j.fontweight;var n=f.bigfontcolor||j.color;var r=a+c+l/2;var p=b+d/2+l/3;B.DrawFigures.createText(q,r,p,'left',m,l,j.fontfamily,n)}}}};var K=function(d,f,g,h,i,j,k,l){this.indexX=d;this.indexY=f;this.left=g;this.top=h;this.width=i;this.height=j;this.data=l;this.isHovered=false;this.color=k;this.redraw=function(a){var b=I;if(I&&I.show&&a){var c=B.Language;b=DChart.Methods.DeepCopy(I);b.color=a}J(this.left,this.top,this.width,this.height,a||this.color,C.shadow.show?this.data:null,b)};this.click=function(e){var a=typeof this.data.click=='function'?this.data.click:(C.click||null);if(a){a(this.data,e)}};if(C.tip.show&&typeof C.tip.content=='function'){this.tip=null;this.showTip=function(){if(this.tip){this.tip.style.display='inline'}else{var a=this.left+this.width/2+5;var b=this.top+this.height/2;this.tip=B._createTip(C.tip.content.call(C,this.data),a,b);var c=this;c.tip.onclick=function(e){c.click(e)}}};this.hideTip=function(){if(this.tip){this.tip.style.display='none'}}}};var L=null;var M=0;var N=(C.bar.colors&&C.bar.colors.length>0?C.bar.colors:null)||DChart.Const.Defaults.FillColors;B.tempData.legendColors=N;var O=E.vValueType=='p';var P=function(e,f){if(E.multiple&&!M){var g=C.bar.gap;if(g&&g>0){var h=(G.labelDistance-E.demanCount*2)/(E.demanCount+1);M=Math.min(g,h)}else{M=G.labelDistance/20}}if(!L){var j=C.bar.length;if(j&&j>0){var l=E.multiple?((G.labelDistance-(E.demanCount+1)*M)/E.demanCount):G.labelDistance*0.8;L=Math.min(j,l)}else{L=(G.labelDistance-(E.demanCount+1)*M)/(E.multiple?(E.demanCount+0.5):1.5)}}var m=function(a,b,c){var d=(c&&C.animateX?e:1)*(G.maxX-G.minX)*B._getFormatDiff(E.vValueType,a,b)/B._getFormatDiff(E.vValueType,E.vMinValue,E.vMaxValue);return d};B.coordinates.bars=[];for(var i=0,item;item=B.innerData[i];i++){var n=(C.animateY?e:1)*L;if(E.multiple){var o=item.color||N[i%N.length];var p=O?item.percent:item.value;for(var k=0;k<p.length;k++){var q=p[k];var r=E.demanCount/2-i;var s=G.startPos+G.labelDistance*k-r*L-(r-0.5)*M;var t=m(q[0],q[1],true);var u=G.minX+m(E.vMinValue,Math.min(q[0],q[1]));if(f>=1){var v={click:item.click,mouseover:item.mouseover,mouseleave:item.mouseleave,text:item.text,indexX:k,indexY:i,bigfontcolor:item.bigfontcolor,bigfontsize:item.bigfontsize,bigfontweight:item.bigfontweight,smallfontcolor:item.smallfontcolor,smallfontsize:item.smallfontsize,smallfontweight:item.smallfontweight};if(O){v.percent=q;v.value=item.value[k]}else{v.value=q}var w=new K(k,i,u,s,t,n,o,v);B.shapes.bars.push(w);J(u,s,t,n,o,v);if(!B.coordinates.bars[k]){B.coordinates.bars[k]=[]}B.coordinates.bars[k][i]={left:u,top:s,width:t,height:n,color:o}}else{J(u,s,t,n,o)}}}else{var s=G.startPos+G.labelDistance*i-L/2;var q=O?item.percent:item.value;var t=m(q[0],q[1],true);var u=G.minX+m(E.vMinValue,Math.min(q[0],q[1]));var o=item.color||(C.bar.useSameColor?'rgba(69,114,167,1)':N[i%N.length]);if(f>=1){item.indexX=i;item.indexY=1;var w=new K(i,1,u,s,t,n,o,item);B.shapes.bars.push(w);J(u,s,t,n,o,item);B.coordinates.bars[i]={left:u,top:s,width:t,height:n,color:o}}else{J(u,s,t,n,o)}}}};var Q=function(){var h=function(x,y){var a=null;for(var i=0,shape;shape=B.shapes.bars[i];i++){if(shape.left<=x&&shape.left+shape.width>=x&&shape.top<=y&&shape.top+shape.height>=y){a=shape;break}}return a};B.canvas.onclick=function(e){var e=window.event||e;var a=B._getMouseLoction(e);var b=h(a.X,a.Y);if(b){b.click(e)}};B.canvas.onmousemove=function(e){var e=window.event||e;var a=B._getMouseLoction(e);var b=h(a.X,a.Y);if(B.tempData.currentMouseShape!=b){var c=B.tempData.currentMouseShape;if(c){var d=typeof c.data.mouseleave=='function'?c.data.mouseleave:(C.mouseleave||null);if(d){d(c.data,e)}}B.tempData.currentMouseShape=b;if(C.shadow.show){B._clearDrawable(H);B._createScales(F)}for(var i=0,c;c=B.shapes.bars[i];i++){if(c!=b&&(C.shadow.show||c.isHovered)){c.isHovered=false;c.redraw();if(c.hideTip){c.hideTip()}}}if(b){b.isHovered=true;if(C.mouseoverChangeCursor){B.canvas.style.cursor='pointer'}b.redraw();var f=C.mouseoverTransparency;b.redraw('rgba(255,255,255,'+(f>0&&f<1?f:0.2)+')');if(b.showTip){b.showTip()}var g=typeof b.data.mouseover=='function'?b.data.mouseover:(C.mouseover||null);if(g){g(b.data,e)}}else{if(C.mouseoverChangeCursor){B.canvas.style.cursor='auto'}}}}};B._startDrawAndAnimation(P,Q)},_spreadSkin:function(a,b){var c=DChart.Const.Skins;if(c[a]&&c[a].RangeBar){var d=c[a].RangeBar;b.smallLabel={};b.smallLabel.color=d.SmallLabelColor||null;b.bigLabel={};b.bigLabel.color=d.BigLabelColor||null}},_getCheckOptions:function(){return{__top:[['animateY','b'],['animateX','b']],bar:[['colors','ca'],['length','n'],['gap','n'],['useSameColor','b']],smallLabel:[['show','b'],['content','f'],['color','c'],['fontweight','s'],['fontsize','n'],['fontfamily','s']],bigLabel:[['show','b'],['content','f'],['color','c'],['fontweight','s'],['fontsize','n'],['fontfamily','s']]}}});