if(!window.DChart){throw new Error('未能加载dragonchart.core.js，该js必须在其他DChart框架的js加载之前被引用。\n'+'Not loaded dragonchart.core.js which must be loaded before other DChart\'s js.');}else{DChart.Const.Skins.BlackAndWhite.RangeArea={NodeLineColor:'#ffffff',NodeFillColor:'#000000',AlignlineLineColor:null}}DChart.RangeArea=DChart.getCore().__extends({GraphType:'RangeArea',SetDefaultOptions:function(){this._resetSharedOpions();this.innerOptions=DChart.Methods.Extend(this.originalDefaultOptions,{upturnAxis:false,area:{linecolors:null,linewidth:null,smoothline:false,fillcolors:null},labelAxis:{valueType:null,content:function(a){if(this.valueType=='d'){return a.format('yyyy-MM-dd')}else if(this.valueType=='t'){return a.format('MM-dd hh:mm')}else{return a.toString()}},minvalue:null,maxvalue:null,interval:null,sort:true},node:{show:true,nodetype:null,linecolor:null,linewidth:null,length:null,fillcolor:null},tip:{merge:true,spotdistance:10,content:function(d){var e=function(a,b){if(!b){return''}var c=a.toString();if(b=='d'){c=a.format('yyyy-MM-dd')}else if(b=='t'){c=a.format('MM-dd hh:mm')}return c+'<br/>'};return'<div>'+(d.llabel!=null?d.llabel+'<br/>':e(d.lvalue,this.labelAxis.valueType))+(d.text?d.text+" : ":'')+e(d.vvalue,this.valueType||'n')+'</div>'}},alignline:{verticalline:true,horizontalline:true,linecolor:null},scale:{drawvertical:true}});return this},Draw:function(J,K){var L=this;if(arguments.length===1){if(!DChart.Methods.IsArray(arguments[0])){K=arguments[0];J=undefined}}L.SetOptions(K);L._checkOptions();var M=L.innerOptions;var N=DChart.Const.Language[L.Language];var O=M.labelAxis.valueType;if(O=='p'){throw new Error(N.WrongParam+N.LabelAxisValueTypeCannotBePercent);}if(M.valueType=='p'){throw new Error(N.WrongParam+N.ValueTypeMustNotBePercent);}L.SetData(J);L._onStart();L.tempData.recreateAssists=true;L.tempData.valueAxiaDataIsRange=true;var P=M.upturnAxis;L.tempData.upturnAxis=P;L.shapes.nodes=[];var Q=L._formatAxisData();var R=L._calculateOutersValid();var S=L._computeAxis(R);var T=L._getDrawableCoordinate();L.coordinates.draw=T;L.coordinates.rangearea={nodes:[]};var U=(M.area.fillcolors&&M.area.fillcolors.length>0?M.area.fillcolors:null)||DChart.Const.Defaults.TransparentColors;var V=(M.area.linecolors&&M.area.linecolors.length>0?M.area.linecolors:null)||DChart.Const.Defaults.FillColors;L.tempData.legendColors=V;var W=M.tip.merge;var X=DChart.Methods.IsNumber(M.tip.spotdistance)&&M.tip.spotdistance>0?M.tip.spotdistance:10;var Y=M.alignline.linecolor||DChart.Const.Defaults.AlignLineColor;var Z=(P?S.maxX-S.minX:S.maxY-S.minY);var ba=(P?S.maxY-S.minY:S.maxX-S.minX);var bb=M.node.length||DChart.Methods.CapValue(ba/100,10,6);var bc=M.area.smoothline;var bd=bc?L.DrawFigures.createSmoothLine:L.DrawFigures.createPointsLine;var be=function(d,f,g,h,i){this.index=d;this.centerX=f;this.centerY=g;this.isHovered=false;this.nodelength=h;this.data=i;this.click=function(e){var a=typeof this.data.click=='function'?this.data.click:(M.click||null);if(a){a(this.data,e)}};if(M.tip.show&&typeof M.tip.content=='function'){this.tip=null;this.showTip=function(){if(this.tip){this.tip.style.display='inline'}else{var a=this.centerX+bb+5;var b=this.centerY-bb-10;this.tip=L._createTip(M.tip.content.call(M,this.data,false),a,b);if(this.centerX+this.tip.clientWidth>S.maxX){L._changeTip(this.tip,a-5-bb-this.tip.clientWidth)}var c=this;c.tip.onclick=function(e){c.click(e)}}};this.hideTip=function(){if(this.tip){this.tip.style.display='none'}}}};var bf=function(x,y,a,b){var c=M.node;if(c.show){var d=b.nodelength||bb;var e=b.nodetype||c.nodetype||'c';var f=b.nodelinecolor||c.linecolor||a;var g=b.nodelinewidth||c.linewidth;var h=b.nodefillcolor||c.fillcolor||a;L.DrawFigures.createPointElement(e,x,y,d,h,true,f,g,true,true)}};var bg=function(a,b,c){var d=a.__copy();for(var i=b.length-1;i>=0;i--){d.push(b[i])}L.DrawFigures.createCloseFigure(d,c,0,null,bc,P)};var bh={};var bi=function(m,n){var o=function(a){var b=(M.animation?m:1)*Z*L._getFormatDiff(Q.vValueType,Q.vMinValue,a)/L._getFormatDiff(Q.vValueType,Q.vMinValue,Q.vMaxValue);return b};var p=function(a){if(O){return ba*L._getFormatDiff(Q.lValueType,Q.lMinValue,a)/L._getFormatDiff(Q.lValueType,Q.lMinValue,Q.lMaxValue)}else{if(Q.multiple){return ba*a/(L.innerData[0].value.length-1)}else{return ba*a/(L.innerData.length-1)}}};var q=function(a,b,x,y,c,d,e,f,g,h,i,j){if(n>=1){var k={vvalue:d,lvalue:e,llabel:f,text:g};if(typeof h=='function'){k.click=h}if(typeof i=='function'){k.mouseover=i}if(typeof j=='function'){k.mouseleave=j}var l=new be(b,x,y,c,k);L.shapes.nodes.push(l);L.coordinates.rangearea.nodes[b]={isSmall:a,centerX:x,centerY:y,length:c}}};var r,vvalue,center1,center2Small,center2Big;if(Q.multiple){var s=[];var t=[];var u=[];for(var i=0,item;item=L.innerData[i];i++){var v=item.linewidth||M.area.linewidth||DChart.Const.Defaults.LineWidth;var w=item.color||V[i%V.length];var z=item.fillcolor||U[i%U.length];var A=item.text||'';var B=item.value.length;var C=B/(Q.lLabels.length-1);for(var k=0;k<B;k++){subitem=item.value[k];r=O?subitem[0]:k;vvalue=O?subitem[1]:subitem;var D=vvalue[0];var E=vvalue[1];if(D>E){E=D;D=vvalue[1]}center1=(P?S.minY:S.minX)+p(r);center2Small=P?S.minX+o(D):S.maxY-o(D);center2Big=P?S.minX+o(E):S.maxY-o(E);s.push(P?[center2Small,center1]:[center1,center2Small]);t.push(P?[center2Big,center1]:[center1,center2Big]);var F=O?null:Q.lLabels[parseInt(k/C+0.5)];var G=i*B*2+k*2;q(true,G,P?center2Small:center1,P?center1:center2Small,item.nodelength||bb,D,r,F,A,item.click,item.mouseover,item.mouseleave);q(false,G+1,P?center2Big:center1,P?center1:center2Big,item.nodelength||bb,E,r,F,A,item.click,item.mouseover,item.mouseleave)}bg(s,t,z);var H={pointsSmall:s,pointsBig:t,fillcolor:z,linewidth:v,linecolor:w,nodetype:item.nodetype,nodelength:item.nodelength,nodelinecolor:item.nodelinecolor,nodelinewidth:item.nodelinewidth,nodefillcolor:item.nodefillcolor};u.push(H);if(n>=1){if(!bh.areainfos){bh.areainfos=[]}bh.areainfos[i]=H}s=[];t=[]}for(var i=0;i<u.length;i++){var s=u[i].pointsSmall;bd(s,u[i].linewidth,u[i].linecolor,P);for(var j=0;j<s.length;j++){var I=s[j];bf(I[0],I[1],u[i].linecolor,u[i])}var t=u[i].pointsBig;bd(t,u[i].linewidth,u[i].linecolor,P);for(var j=0;j<t.length;j++){var I=t[j];bf(I[0],I[1],u[i].linecolor,u[i])}}}else{var v=M.area.linewidth||DChart.Const.Defaults.LineWidth;var w=V[0];var z=U[0];var s=[];var t=[];var B=L.innerData.length;for(var i=0;i<B;i++){subitem=L.innerData[i];var A=subitem.text||'';r=O?subitem.value[0]:i;vvalue=O?subitem.value[1]:subitem.value;var D=vvalue[0];var E=vvalue[1];if(D>E){E=D;D=vvalue[1]}center1=(P?S.minY:S.minX)+p(r);center2Small=P?S.minX+o(D):S.maxY-o(D);center2Big=P?S.minX+o(E):S.maxY-o(E);s.push(P?[center2Small,center1]:[center1,center2Small]);t.push(P?[center2Big,center1]:[center1,center2Big]);var F=O?null:Q.lLabels[i%Q.lLabels.length];q(true,i*2,P?center2Small:center1,P?center1:center2Small,subitem.nodelength||bb,D,r,F,A,subitem.click,subitem.mouseover,subitem.mouseleave);q(false,i*2+1,P?center2Big:center1,P?center1:center2Big,subitem.nodelength||bb,E,r,F,A,subitem.click,subitem.mouseover,subitem.mouseleave)}if(n>=1){bh.pointsSmall=s;bh.pointsBig=t;bh.linewidth=v;bh.linecolor=w;bh.fillcolor=z}bg(s,t,z);bd(s,v,w,P);for(var j=0;j<s.length;j++){var I=s[j];bf(I[0],I[1],w,L.innerData[j])}bd(t,v,w,P);for(var j=0;j<t.length;j++){var I=t[j];bf(I[0],I[1],w,L.innerData[j])}}};var bj=function(){if(Q.multiple){var a=bh.areainfos;for(var i=0;i<a.length;i++){var b=a[i];bg(b.pointsSmall,b.pointsBig,b.fillcolor)}for(var i=0;i<a.length;i++){var b=a[i];bd(b.pointsSmall,b.linewidth,b.linecolor,P);bd(b.pointsBig,b.linewidth,b.linecolor,P);for(var j=0;j<b.pointsSmall.length;j++){bf(b.pointsSmall[j][0],b.pointsSmall[j][1],b.linecolor,b)}for(var j=0;j<b.pointsSmall.length;j++){bf(b.pointsBig[j][0],b.pointsBig[j][1],b.linecolor,b)}}}else{var c=bh.pointsSmall;var d=bh.pointsBig;bg(c,d,bh.fillcolor);bd(bh.pointsSmall,bh.linewidth,bh.linecolor,P);bd(bh.pointsBig,bh.linewidth,bh.linecolor,P);for(var j=0;j<bh.pointsSmall.length;j++){bf(bh.pointsSmall[j][0],bh.pointsSmall[j][1],bh.linecolor,L.innerData[j])}for(var j=0;j<bh.pointsBig.length;j++){bf(bh.pointsBig[j][0],bh.pointsBig[j][1],bh.linecolor,L.innerData[j])}}};var bk=function(){var h=function(x,y){var a=null;for(var i=L.shapes.nodes.length-1;i>=0;i--){var b=L.shapes.nodes[i];if(Math.sqrt(Math.pow(x-b.centerX,2)+Math.pow(y-b.centerY,2))<=b.nodelength/2){a=b;break}}return a};var j=function(x,y){var a=[];var b=-1;var c=(P?y:x);if(y<=S.maxY&&y>=S.minY&&x>=S.minX&&x<=S.maxX){for(var i=0,shape;shape=L.shapes.nodes[i];i++){var d=P?shape.centerY:shape.centerX;if(Math.abs(d-c)<X){b=d}}for(var i=0,shape;shape=L.shapes.nodes[i];i++){var d=P?shape.centerY:shape.centerX;if(Math.abs(d-b)<0.00001){a.push(shape)}}}return{shapes:a,loc:b}};L.canvas.onclick=function(e){var e=window.event||e;var a=L._getMouseLoction(e);var b=h(a.X,a.Y);if(b){b.click(e)}};L.canvas.onmousemove=function(e){var e=window.event||e;var a=L._getMouseLoction(e);var b=h(a.X,a.Y);if(L.tempData.currentMouseShape!=b){var c=L.tempData.currentMouseShape;if(c){var d=typeof c.data.mouseleave=='function'?c.data.mouseleave:(M.mouseleave||null);if(d){d(c.data,e)}}L.tempData.currentMouseShape=b;for(var i=0,c;c=L.shapes.nodes[i];i++){if(c!=b&&c.isHovered){c.isHovered=false;if(!W&&c.hideTip){c.hideTip()}}}if(b){b.isHovered=true;if(M.mouseoverChangeCursor){L.canvas.style.cursor='pointer'}if(M.alignline.verticalline||M.alignline.horizontalline){L._createAssists(R);L._createScales(R);bj()}if(M.alignline.verticalline){L.DrawFigures.createLine(b.centerX,S.minY,b.centerX,S.maxY+1,1,Y)}if(M.alignline.horizontalline){L.DrawFigures.createLine(S.minX,b.centerY,S.maxX,b.centerY,1,Y)}if(b.showTip&&!W){b.showTip()}var f=typeof b.data.mouseover=='function'?b.data.mouseover:(M.mouseover||null);if(f){f(b.data,e)}}else{if(M.mouseoverChangeCursor){L.canvas.style.cursor='auto'}if(M.alignline.verticalline||M.alignline.horizontalline){L._createAssists(R);L._createScales(R);bj()}}}if(W){var g=j(a.X,a.Y);if(L.tempData.loc!=g.loc){L.tempData.loc=g.loc;for(var i=0,c;c=L.shapes.nodes[i];i++){if(c.hideTip){c.hideTip()}}if(P&&M.alignline.horizontalline||!P&&M.alignline.verticalline){L._createAssists(R);L._createScales(R);bj()}if(g.shapes.length){if(!P&&M.alignline.verticalline){L.DrawFigures.createLine(g.loc,S.minY,g.loc,S.maxY+1,1,Y)}if(P&&M.alignline.horizontalline){L.DrawFigures.createLine(S.minX,g.loc,S.maxX,g.loc,1,Y)}for(var i=0,c;c=g.shapes[i];i++){if(c.showTip){c.showTip()}}}}}}};L._startDrawAndAnimation(bi,bk)},_spreadSkin:function(a,b){var c=DChart.Const.Skins;if(c[a]&&c[a].RangeArea){var d=c[a].RangeArea;b.node={};b.alignline={};b.node.linecolor=d.NodeLineColor||null;b.node.fillcolor=d.NodeFillColor||null;b.alignline.linecolor=d.AlignlineLineColor||null}},_getCheckOptions:function(){return{__top:[['upturnAxis','b']],area:[['linecolors','ca'],['linewidth','n'],['smoothline','b'],['fillcolors','ca']],labelAxis:[['valueType','s'],['content','f'],['minvalue','n'],['maxvalue','n'],['interval','n'],['sort','b']],node:[['show','b'],['nodetype','s'],['linecolor','c'],['linewidth','n'],['length','n'],['fillcolor','c']],tip:[['merge','b'],['spotdistance','n']],alignline:[['verticalline','b'],['horizontalline','b'],['linecolor','c']],scale:[['drawvertical','b']]}}});