if(!window.DChart){throw new Error('未能加载dragonchart.core.js，该js必须在其他DChart框架的js加载之前被引用。\n'+'Not loaded dragonchart.core.js which must be loaded before other DChart\'s js.');}else{DChart.Const.Skins.BlackAndWhite.QueueBar={LabelColor:null}}DChart.QueueBar=DChart.getCore().__extends({GraphType:'QueueBar',SetDefaultOptions:function(){this._resetSharedOpions();this.innerOptions=DChart.Methods.Extend(this.originalDefaultOptions,{animateY:true,animateX:true,splitpoint:null,contrastmode:true,bar:{colors:null,length:null,gap:null},label:{show:true,content:function(a){if(this.valueType=='d'){return a.value.format('MM-dd')}else if(this.valueType=='t'){return a.value.format('HH:mm')}else{return a.value.toString()}},color:null,fontweight:null,fontsize:null,fontfamily:null}});return this},Draw:function(w,z){var A=this;if(arguments.length===1){if(!DChart.Methods.IsArray(arguments[0])){z=arguments[0];w=undefined}}A.SetOptions(z);A._checkOptions();var B=A.innerOptions;var C=DChart.Const.Language[A.Language];if(!B.animateY&&!B.animateX){B.animation=false}A.SetData(w);if(!A.innerData[0].value.length||A.innerData[0].value.length<=1){throw new Error(C.WrongData+C.DataMustBeMultipleArray);}if(B.valueType=='p'){throw new Error(C.WrongParam+C.ValueTypeMustNotBePercent);}A._onStart();A.tempData.invertAxis=true;var D=B.splitpoint;var E=D==null;A.tempData.computeSplitPoint=E;var F=A._formatAxisData();if(!E&&(F.vValueType=='d'||F.vValueType=='t')&&!DChart.Methods.IsDate(D)){D=DChart.Methods.ParseDate(D.toString())}if(E){D=F.splitpoint}else{F.splitpoint=D}if(A.innerData.length>1&&D>=F.vMaxval||D<=F.vMinval){throw new Error(C.WrongSet+C.WrongSplitPoint);}var G=A._calculateOutersValid();var H=A._computeAxis(G);var I=A._getDrawableCoordinate();A.coordinates.draw=I;A.shapes.bars=[];var J=B.shadow.show;var K=function(a){var b=null;if(J){var c=Math.max(Math.abs(B.shadow.blur),Math.abs(B.shadow.offsetX));b=DChart.Methods.DeepCopy(B.shadow);b.offsetX=a?-c:c}return b};var L=function(a,b,c,d,e,f,g,h){A.DrawFigures.createRectangleFill(b,c,d,e,f,h||K(a));if(g&&B.label.show){var i=B.label;var j=typeof i.content=='function'?i.content.call(B,g):'';if(j){var k=i.fontsize||DChart.Methods.CapValue(e,18,11);var l=a?b-k/2:b+d+k/2;var m=c+e/2+k/3;A.DrawFigures.createText(j,l,m,a?'right':'left',g.fontweight||i.fontweight,g.fontsize||k,i.fontfamily,g.fontcolor||i.color)}}};var M=function(d,f,g,h,i,j,k,l,m){this.isSmall=d;this.indexX=f;this.indexY=g;this.left=h;this.top=i;this.width=j;this.height=k;this.data=m;this.isHovered=false;this.color=l;this.redraw=function(a){var b=K(this.isSmall);if(b&&a){b.color=a}L(this.isSmall,this.left,this.top,this.width,this.height,a||this.color,J?this.data:null,b)};this.click=function(e){var a=typeof this.data.click=='function'?this.data.click:(B.click||null);if(a){a(this.data,e)}};if(B.tip.show&&typeof B.tip.content=='function'){this.tip=null;this.showTip=function(){if(this.tip){this.tip.style.display='inline'}else{var a=this.left+this.width/2+5;var b=this.top+this.height/2;this.tip=A._createTip(B.tip.content.call(B,this.data),a,b);var c=this;c.tip.onclick=function(e){c.click(e)}}};this.hideTip=function(){if(this.tip){this.tip.style.display='none'}}}};var N=(B.bar.colors&&B.bar.colors.length>0?B.bar.colors:null)||DChart.Const.Defaults.FillColors;A.tempData.legendColors=N;var O=B.contrastmode;var P=O?Math.ceil(F.demanCount/2.0-0.1):F.demanCount;var Q=0;var R=null;var S=P>1;var T=function(d,e){if(S&&!Q){var f=B.bar.gap;if(f&&f>0){var g=(H.labelDistance-P*2)/(P+1);Q=Math.min(f,g)}else{Q=H.labelDistance/20}}if(!R){var h=B.bar.length;if(h&&h>0){var j=S?((H.labelDistance-(P+1)*Q)/P):H.labelDistance*0.8;R=Math.min(h,j)}else{R=(H.labelDistance-(P+1)*Q)/(S?(P+0.5):1.5)}}var l=function(a){var b=Math.abs(A._getFormatDiff(F.vValueType,D,a));var c=(B.animateX?d:1)*(H.maxX-H.minX)*b/A._getFormatDiff(F.vValueType,F.vMinValue,F.vMaxValue);return c};A.coordinates.bars=[];for(var i=0,item;item=A.innerData[i];i++){var m=(B.animateY?d:1)*R;var n=item.color||N[i%N.length];for(var k=0;k<item.value.length;k++){var o=item.value[k];var p=o<D;var q=P/2-(O?parseInt(i/2):i);var r=H.startPos-H.labelDistance*k-q*R-(q-0.5)*Q;var s=l(o);var t=p?H.splitLinePos-s:H.splitLinePos;if(e>=1){var u={text:item.text,value:o,indexX:k,indexY:i,fontsize:item.fontsize,fontcolor:item.fontcolor,fontweight:item.fontweight,click:item.click,mouseover:item.mouseover,mouseleave:item.mouseleave};var v=new M(p,k,i,t,r,s,m,n,u);A.shapes.bars.push(v);L(p,t,r,s,m,n,u);if(!A.coordinates.bars[k]){A.coordinates.bars[k]=[]}A.coordinates.bars[k][i]={left:t,top:r,width:s,height:m,color:n}}else{L(p,t,r,s,m,n)}}}};var U=function(){var h=function(x,y){var a=null;for(var i=0,shape;shape=A.shapes.bars[i];i++){if(shape.left<=x&&shape.left+shape.width>=x&&shape.top<=y&&shape.top+shape.height>=y){a=shape;break}}return a};A.canvas.onclick=function(e){var e=window.event||e;var a=A._getMouseLoction(e);var b=h(a.X,a.Y);if(b){b.click(e)}};A.canvas.onmousemove=function(e){var e=window.event||e;var a=A._getMouseLoction(e);var b=h(a.X,a.Y);if(A.tempData.currentMouseShape!=b){var c=A.tempData.currentMouseShape;if(c){var d=typeof c.data.mouseleave=='function'?c.data.mouseleave:(B.mouseleave||null);if(d){d(c.data,e)}}A.tempData.currentMouseShape=b;if(J){A._clearDrawable(I);A._createScales(G)}for(var i=0,c;c=A.shapes.bars[i];i++){if(c!=b&&(J||c.isHovered)){c.isHovered=false;c.redraw();if(c.hideTip){c.hideTip()}}}if(b){b.isHovered=true;if(B.mouseoverChangeCursor){A.canvas.style.cursor='pointer'}b.redraw();var f=B.mouseoverTransparency;b.redraw('rgba(255,255,255,'+(f>0&&f<1?f:0.2)+')');if(b.showTip){b.showTip()}var g=typeof b.data.mouseover=='function'?b.data.mouseover:(B.mouseover||null);if(g){g(b.data,e)}}else{if(B.mouseoverChangeCursor){A.canvas.style.cursor='auto'}}}}};A._startDrawAndAnimation(T,U)},_spreadSkin:function(a,b){var c=DChart.Const.Skins;if(c[a]&&c[a].QueueBar){var d=c[a].QueueBar;b.label={};b.label.color=d.LabelColor||null}},_getCheckOptions:function(){return{__top:[['animateY','b'],['animateX','b'],['contrastmode','b']],bar:[['colors','ca'],['length','n'],['gap','n']],label:[['show','b'],['content','f'],['color','c'],['fontweight','s'],['fontsize','n'],['fontfamily','s']]}}});