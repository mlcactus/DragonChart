if(!window.DChart){throw new Error('未能加载dragonchart.core.js，该js必须在其他DChart框架的js加载之前被引用。\n'+'Not loaded dragonchart.core.js which must be loaded before other DChart\'s js.');}else{DChart.Const.Skins.BlackAndWhite.Radar={ScaleLineColor:null,StaffFontColor:null,StaffBackColor:'rgba(255,255,255,0.3)',RadarNodeLinecolors:['#ffffff'],LabelsFontColors:'#666666'}}DChart.Radar=DChart.getCore().__extends({GraphType:'Radar',SetDefaultOptions:function(){this._resetSharedOpions();this.innerOptions=DChart.Methods.Extend(this.originalDefaultOptions,{offX:0,offY:0,radius:null,margin:null,startDirection:null,scale:{linewidth:0.5,minvalue:null,maxvalue:null,interval:null},staff:{show:true,content:function(a){return a.toString()},fontcolor:null,fontfamily:null,fontsize:null,fontweight:null,backcolor:'rgba(255,255,255,0.3)'},radar:{fillcolors:null,linecolors:null,nodefillcolors:null,nodelinecolors:['#ffffff'],linewidth:null,nodetype:null,nodelinewidth:1,nodelength:null},labels:{labels:null,fontcolors:null,fontweight:null,fontsize:null,fontfamily:null,showtips:true},tip:{content:function(a){var b=a.value.toString();return'<div>'+(a.text?a.text+'<br/>':'&nbsp;')+a.label+'：'+b+'&nbsp;</div>'}}});return this},Draw:function(Q,R){var S=this;if(arguments.length===1){if(!DChart.Methods.IsArray(arguments[0])){R=arguments[0];Q=undefined}}S.SetOptions(R);S._checkOptions();var T=S.innerOptions;S.SetData(Q);S._onStart();var U=S._computeSegmentTotal();var V=U.multiple;var W=S._getComputed(0,'n',T.scale,U.minval,U.maxval,8);var X=S._computeRadiusForPies(T);var Y=T.radius&&T.radius<X.maxRadius?T.radius:X.maxRadius;S.coordinates.draw=X.coordinate;S.coordinates.radar={radius:Y,centerX:X.centerX,centerY:X.centerY};var Z=(T.radar.fillcolors&&T.radar.fillcolors.length>0?T.radar.fillcolors:null)||DChart.Const.Defaults.TransparentColors;var ba=(T.radar.linecolors&&T.radar.linecolors.length>0?T.radar.linecolors:null)||DChart.Const.Defaults.FillColors;var bb=(T.radar.nodefillcolors&&T.radar.nodefillcolors.length>0?T.radar.nodefillcolors:null)||ba;var bc=(T.radar.nodelinecolors&&T.radar.nodelinecolors.length>0?T.radar.nodelinecolors:null)||bb;S.tempData.legendColors=ba;var bd=T.labels.fontcolors&&T.labels.fontcolors.length>0?T.labels.fontcolors:null;var be=T.startDirection||'n';var bf=be=='e'?0:(be=='s'?Math.PI/2:(be=='w'?Math.PI:-Math.PI/2));var bg=V?S.innerData[0].value.length:S.innerData.length;var bh=Math.PI*2/bg;var bi=function(a){return(a-W.minvalue)/(W.maxvalue-W.minvalue)};S.shapes.nodes=[];S.shapes.labels=[];var bj=T.radar.nodelength||DChart.Methods.CapValue((X.coordinate.maxX-X.coordinate.minX)/150,10,6);var bk=function(d,f,g,h,i){this.index=d;this.centerX=f;this.centerY=g;this.isHovered=false;this.nodelength=h;this.data=i;this.click=function(e){var a=typeof this.data.click=='function'?this.data.click:(T.click||null);if(a){a(this.data,e)}};if(T.tip.show&&typeof T.tip.content=='function'){this.tip=null;this.showTip=function(){if(this.tip){this.tip.style.display='inline'}else{var a=this.centerX+bj+5;var b=this.centerY-bj-10;this.tip=S._createTip(T.tip.content.call(T,this.data,false),a,b);if(this.centerX+this.tip.clientWidth>X.coordinate.maxX){S._changeTip(this.tip,a-5-bj-this.tip.clientWidth)}var c=this;c.tip.onclick=function(e){c.click(e)}}};this.hideTip=function(){if(this.tip){this.tip.style.display='none'}}}};S.coordinates.radar.nodes=[];S.coordinates.radar.labels=[];S.coordinates.radar.staff=[];var bl=function(a,b,c,d){var e=T.radar;var f=(V?c.color:null)||Z[d%Z.length];var g=(V?c.linecolor:null)||ba[d%ba.length];var h=(V?c.linewidth:null)||e.linewidth||1;var j=[];for(var i=0;i<(V?c.value.length:c.length);i++){var k=V?c:c[i];var l=V?c.value[i]:k.value;var m=k.nodefillcolor||bb[d%bb.length];var n=k.nodelinecolor||bc[d%bc.length];var o=k.nodelinewidth||e.nodelinewidth||0;var p=k.nodelength||bj;var q=k.nodetype||e.nodetype||'c';var r=a*Y*bi(l);var s=bf+i*bh;var t=X.centerX+r*Math.cos(s);var u=X.centerY+r*Math.sin(s);j.push([t,u,m,n,o,p,q]);if(b){var v={value:l,click:k.click,mouseover:k.mouseover,mouseleave:k.mouseleave};v.text=V?c.text:'';v.label=V?(T.labels.labels?T.labels.labels[i%T.labels.labels.length]:''):k.text;var w=new bk(V?d*c.value.length+i:i,t,u,p,v);S.shapes.nodes.push(w)}}S.DrawFigures.createCloseFigure(j,f,h,g);for(var i=0,point;point=j[i];i++){S.DrawFigures.createPointElement(point[6],point[0],point[1],point[5],point[2],true,point[3],point[4],true,true);if(b){var x={centerX:point[0],centerY:point[1],length:point[5]};if(V){if(!S.coordinates.radar.nodes[d]){S.coordinates.radar.nodes[d]=[]}S.coordinates.radar.nodes[d][i]=x}else{S.coordinates.radar.nodes[i]=x}}}};var bm=function(g){var h=T.scale;var j=h.linewidth;if(!(h.linewidth>0)){return}var l=T.labels;var m=l.labels||[];if(!V){for(var i=0,item;item=S.innerData[i];i++){m[i]=item.text||' '}}var n=l.fontsize||Y/8;var o=h.linecolor||'rgb(190,190,190)';var p=0.1;var q=5;for(var k=0;k<bg;k++){var r=bf+k*bh;var s=r+bh;var t=0;var u=0;for(var v=W.minvalue+W.interval;v<=W.maxvalue;v+=W.interval){var w=Y*bi(v);t=X.centerX+w*Math.cos(r);u=X.centerY+w*Math.sin(r);var x=X.centerX+w*Math.cos(s);var y=X.centerY+w*Math.sin(s);S.DrawFigures.createLine(t,u,x,y,j,o)}S.DrawFigures.createLine(X.centerX,X.centerY,t,u,j,o);var z=DChart.Methods.JudgeBetweenAngle(-Math.PI*0.5,Math.PI*0.5,r);var A=DChart.Methods.JudgeBetweenAngle(-Math.PI,0,r);var B=DChart.Methods.JudgeBetweenAngle(-Math.PI/2-p,-Math.PI/2+p,r)||DChart.Methods.JudgeBetweenAngle(Math.PI/2-p,Math.PI/2+p,r);var C=DChart.Methods.JudgeBetweenAngle(Math.PI-p,Math.PI+p,r)||DChart.Methods.JudgeBetweenAngle(-p,p,r);var D=t;var E=u;if(!B){if(z){D+=q+q*Math.abs(Math.sin(r))}else{D-=q+q*Math.abs(Math.sin(r))}if(C){E+=n/3}else{if(A){E-=q*Math.abs(Math.cos(r))}else{E+=n/2+q*Math.abs(Math.cos(r))}}}else{if(A){E-=n*0.7}else{E+=n}}var F=(bd?bd[k%bd.length]:null)||o;var G=S.DrawFigures.createText(m[k],D,E,B?'center':(z?'left':'right'),l.fontweight,n,l.fontfamily,F);if(g){var H={index:k,centerX:(B?D:(z?D+G/2:D-G/2)),centerY:E-n/2,size:n,length:G};S.shapes.labels.push(H);S.coordinates.radar.labels.push({index:k,text:m[k],left:H.centerX-G/2,right:H.centerX+G/2,top:E-n,bottom:E,size:n,length:G})}}var I=T.staff;var J=I.content;if(!I.show||typeof J!='function'){return}var K=I.fontsize||Y/W.scalecount*0.8;var L=I.backcolor;var M=0;if(L){for(var v=W.minvalue+W.interval;v<=W.maxvalue;v+=W.interval){var N=S.DrawFigures.measureText(J(v),I.fontweight,K,I.fontfamily);M=Math.max(M,N)}}var O=function(a,b,c){var d=(b=='n'||b=='s')?X.centerX:(b=='w'?X.centerX-c:X.centerX+c);var e=(b=='w'||b=='e')?X.centerY+K/2.5:(b=='n'?X.centerY-c+K/2.5:X.centerY+c+K/2.5);if(L){S.DrawFigures.createRectangleFill(d-M/2-1,e-K+1,M+2,K+2,L)}var f=S.DrawFigures.createText(a,d,e,'center',I.fontweight,K,I.fontfamily,F);if(g){S.coordinates.radar.staff.push({text:a,left:d-f/2,right:d+f/2,top:e-K,bottom:e,size:n,length:f})}};for(var v=W.minvalue+W.interval;v<=W.maxvalue;v+=W.interval){var F=I.fontcolor||'#000000';var P=Y*bi(v);O(J(v),be,P)}};var bn=function(a,b){var c=b>=1;if(!T.scaleOverlay){bm(c)}if(V){for(var i=0,data;data=S.innerData[i];i++){bl(a,c,data,i)}}else{bl(a,c,S.innerData,0)}if(T.scaleOverlay){bm(c)}};var bo=function(){var h=function(x,y){var a=null;for(var i=S.shapes.nodes.length-1;i>=0;i--){var b=S.shapes.nodes[i];if(Math.sqrt(Math.pow(x-b.centerX,2)+Math.pow(y-b.centerY,2))<=b.nodelength/2){a=b;break}}return a};var j=function(x,y){var a=null;for(var i=S.shapes.labels.length-1;i>=0;i--){var b=S.shapes.labels[i];if(Math.abs(x-b.centerX)<b.length/2&&Math.abs(y-b.centerY)<b.size/2){a=b;break}}return a};S.canvas.onclick=function(e){var e=window.event||e;var a=S._getMouseLoction(e);var b=h(a.X,a.Y);if(b){b.click(e)}};S.canvas.onmousemove=function(e){var e=window.event||e;var a=S._getMouseLoction(e);var b=h(a.X,a.Y)||j(a.X,a.Y);if(S.tempData.currentMouseShape!=b){var c=S.tempData.currentMouseShape;if(c&&c.data){var d=typeof c.data.mouseleave=='function'?c.data.mouseleave:(T.mouseleave||null);if(d){d(c.data,e)}}S.tempData.currentMouseShape=b;for(var i=0,c;c=S.shapes.nodes[i];i++){if(c!=b&&c.isHovered){c.isHovered=false;if(c.hideTip){c.hideTip()}}}if(b){if(b.data){if(T.mouseoverChangeCursor){S.canvas.style.cursor='pointer'}b.isHovered=true;if(b.showTip){b.showTip()}var f=typeof b.data.mouseover=='function'?b.data.mouseover:(T.mouseover||null);if(f){f(b.data,e)}}else{if(T.labels.showtips){if(T.mouseoverChangeCursor){S.canvas.style.cursor='pointer'}var g=b.index;for(var i=S.shapes.nodes.length-1;i>=0;i--){var c=S.shapes.nodes[i];if(c.index%bg==g&&c.showTip){c.isHovered=true;c.showTip()}}}}}else{if(T.mouseoverChangeCursor){S.canvas.style.cursor='auto'}}}}};S._startDrawAndAnimation(bn,bo)},_spreadSkin:function(a,b){var c=DChart.Const.Skins;if(c[a]&&c[a].Radar){var d=c[a].Radar;b.scale={};b.staff={};b.radar={};b.labels={};b.scale.linecolor=d.ScaleLineColor||null;b.staff.fontcolor=d.StaffFontColor||null;b.staff.backcolor=d.StaffBackColor||null;b.radar.nodelinecolors=d.RadarNodeLinecolors||null;b.labels.fontcolors=d.LabelsFontColors||null}},_getCheckOptions:function(){return{__top:[['radius','n'],['margin','n'],['startDirection','s']],scale:[['minvalue','n'],['maxvalue','n'],['interval','n']],staff:[['show','b'],['content','f'],['fontcolor','c'],['fontfamily','s'],['fontsize','n'],['fontweight','s'],['backcolor','c']],radar:[['fillcolors','ca'],['linecolors','ca'],['nodefillcolors','ca'],['nodelinecolors','ca'],['linewidth','n'],['nodetype','s'],['nodelinewidth','n'],['nodelength','n']],labels:[['labels','sa'],['fontcolors','ca'],['fontweight','s'],['fontsize','n'],['fontfamily','s'],['showtips','b']]}}});