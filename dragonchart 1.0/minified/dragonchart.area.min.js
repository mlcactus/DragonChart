if(!window.DChart){throw new Error('未能加载dragonchart.core.js，该js必须在其他DChart框架的js加载之前被引用。\n'+'Not loaded dragonchart.core.js which must be loaded before other DChart\'s js.');}else{DChart.Const.Skins.BlackAndWhite.Area={NodeLineColor:'#ffffff',AlignlineLineColor:null}}DChart.Area=DChart.getCore().__extends({GraphType:'Area',SetDefaultOptions:function(){this._resetSharedOpions();this.innerOptions=DChart.Methods.Extend(this.originalDefaultOptions,{area:{linecolors:null,linewidth:null,fillcolors:null},labelAxis:{valueType:null,content:function(a){if(this.valueType=='d'){return a.format('yyyy-MM-dd')}else if(this.valueType=='t'){return a.format('MM-dd hh:mm')}else{return a.toString()}},minvalue:null,maxvalue:null,interval:null,sort:true},valueAxis:{heap:false},node:{show:true,nodetype:null,linecolor:null,linewidth:null,length:null,fillcolor:null},tip:{merge:false,content:function(a,b){if(b){var c='<div>';for(var i=0;i<a.length;i++){var d=this.valueType=='p'?a[i].vpercent.toFixed(2)+'%':a[i].vvalue.toString();c+=(i>0?'<br/>':'')+a[i].text+" : "+d}c+='&nbsp;</div>';return c}else{var d=this.valueType=='p'?a.vpercent.toFixed(2)+'%':a.vvalue.toString();if(this.valueType=='d'){d=a.vvalue.format('yyyy-MM-dd')}else if(this.valueType=='t'){d=a.vvalue.format('MM-dd hh:mm')}return'<div>&nbsp;'+(a.text?a.text+'：':'')+d+'&nbsp;</div>'}}},alignline:{verticalline:true,horizontalline:true,linecolor:null},scale:{drawvertical:true}});return this},Draw:function(F,G){var H=this;if(arguments.length===1){if(!DChart.Methods.IsArray(arguments[0])){G=arguments[0];F=undefined}}H.SetOptions(G);H._checkOptions();var I=H.innerOptions;if(I.labelAxis.valueType=='p'){throw new Error(DChart.Const.Language[H.Language].WrongParam+DChart.Const.Language[H.Language].LabelAxisValueTypeCannotBePercent);}H.SetData(F);H._onStart();H.tempData.recreateAssists=true;H.shapes.nodes=[];var J=I.labelAxis.valueType;var K=H._formatAxisData(I.valueAxis.heap);var L=K.vValueType=='p';var M=K.heapCompute;if(M){H.tempData.heaps=[];for(var i=0;i<K.tuftCount;i++){H.tempData.heaps[i]=[];var N=0;for(var k=0;k<K.demanCount;k++){var O=H.innerData[k];var P=O.value[i];var Q=L?O.percent[i]:(J?P[1]:P);N+=Q;H.tempData.heaps[i][k]=N}N=0}}var R=H._calculateOutersValid();var S=H._computeAxis(R);var T=H._getDrawableCoordinate();H.coordinates.draw=T;H.coordinates.area={nodes:[]};var U=H.ctx;var V=I.node.length||DChart.Methods.CapValue((S.maxX-S.minX)/100,10,6);var W=(I.area.fillcolors&&I.area.fillcolors.length>0?I.area.fillcolors:null)||DChart.Const.Defaults.TransparentColors;var X=(I.area.linecolors&&I.area.linecolors.length>0?I.area.linecolors:null)||DChart.Const.Defaults.FillColors;H.tempData.legendColors=X;var Y=function(d,f,g,h,i){this.index=d;this.centerX=f;this.centerY=g;this.isHovered=false;this.nodelength=h;this.data=i;this.click=function(e){var a=typeof this.data.click=='function'?this.data.click:(I.click||null);if(a){a(this.data,e)}};if(I.tip.show&&typeof I.tip.content=='function'){this.tip=null;this.showTip=function(){if(this.tip){this.tip.style.display='inline'}else{var a=this.centerX+V+5;var b=this.centerY-V-10;this.tip=H._createTip(I.tip.content.call(I,this.data,false),a,b);if(this.centerX+this.tip.clientWidth>S.maxX){H._changeTip(this.tip,a-5-V-this.tip.clientWidth)}var c=this;c.tip.onclick=function(e){c.click(e)}}};this.hideTip=function(){if(this.tip){this.tip.style.display='none'}}}};var Z=function(x,y,a,b){var c=I.node;if(c.show){var d=b.nodelength||V;var e=b.nodetype||c.nodetype||'c';var f=b.nodelinecolor||c.linecolor||a;var g=b.nodelinewidth||c.linewidth;var h=b.nodefillcolor||c.fillcolor||a;H.DrawFigures.createPointElement(e,x,y,d,h,true,f,g,true,true)}};var ba=function(a,b,c){var d=a.__copy();for(var i=b.length-1;i>=0;i--){d.push(b[i])}H.DrawFigures.createCloseFigure(d,c)};var bb={};var bc=function(m,n){var o=function(a){var b=(I.animation?m:1)*(S.maxY-S.minY)*H._getFormatDiff(K.vValueType,K.vMinValue,a)/H._getFormatDiff(K.vValueType,K.vMinValue,K.vMaxValue);return b};var p=function(a){if(J){return(S.maxX-S.minX)*H._getFormatDiff(K.lValueType,K.lMinValue,a)/H._getFormatDiff(K.lValueType,K.lMinValue,K.lMaxValue)}else{if(K.multiple){return(S.maxX-S.minX)*a/(H.innerData[0].value.length-1)}else{return(S.maxX-S.minX)*a/(H.innerData.length-1)}}};var q=function(i,a,x,y,b,c,d,e,f,g,h,j){if(n>=1){var k={vvalue:c,lvalue:d,text:e};if(f!=null){k.vpercent=f}if(typeof g=='function'){k.click=g}if(typeof h=='function'){k.mouseover=h}if(typeof j=='function'){k.mouseleave=j}var l=new Y(a,x,y,b,k);H.shapes.nodes.push(l);if(i>=0){H.coordinates.area.nodes[i][a]={centerX:x,centerY:y,length:b}}else{H.coordinates.area.nodes[a]={centerX:x,centerY:y,length:b}}}};var r,Q,vpercent,centerX,centerY;if(K.multiple){var s=[];var t=[];var u=[];for(var i=0,O;O=H.innerData[i];i++){var v=O.linewidth||I.area.linewidth||DChart.Const.Defaults.LineWidth;var w=O.color||X[i%X.length];var z=W[i%W.length];var A=O.text||'';if(n>=1){H.coordinates.area.nodes[i]=[]}var B=O.value.length;for(var k=0;k<B;k++){P=O.value[k];r=J?P[0]:k;Q=J?P[1]:P;vpercent=L?O.percent[k]:null;centerX=S.minX+p(r);centerY=S.maxY-o(M?H.tempData.heaps[k][i]:(L?vpercent:Q));if(k==0){s.push([centerX,S.maxY])}s.push([centerX,centerY]);if(k==B-1){s.push([centerX,S.maxY])}q(i,k,centerX,centerY,O.nodelength||V,Q,r,A,vpercent,O.click,O.mouseover,O.mouseleave)}var C=s.slice(1,s.length-1);if(M&&i>0){ba(C,t,z)}else{H.DrawFigures.createCloseFigure(s,z)}var D={linepoints:C,points:s,fillcolor:z,linewidth:v,linecolor:w,nodetype:O.nodetype,nodelength:O.nodelength,nodelinecolor:O.nodelinecolor,nodelinewidth:O.nodelinewidth,nodefillcolor:O.nodefillcolor};u.push(D);if(n>=1){if(!bb.areainfos){bb.areainfos=[]}bb.areainfos[i]=D}t=C.__copy();s=[]}for(var i=0;i<u.length;i++){var C=u[i].linepoints;H.DrawFigures.createPointsLine(C,u[i].linewidth,u[i].linecolor);for(var j=0;j<C.length;j++){var E=C[j];Z(E[0],E[1],u[i].linecolor,u[i])}}}else{var v=I.area.linewidth||DChart.Const.Defaults.LineWidth;var w=X[0];var z=W[0];var s=[];var B=H.innerData.length;for(var i=0;i<B;i++){P=H.innerData[i];var A=P.text||'';r=J?P.value[0]:i;Q=J?P.value[1]:P.value;vpercent=L?H.innerData[i].percent:null;centerX=S.minX+p(r);centerY=S.maxY-o(L?vpercent:Q);if(i==0){s.push([centerX,S.maxY])}s.push([centerX,centerY]);if(i==B-1){s.push([centerX,S.maxY])}q(-1,i,centerX,centerY,P.nodelength||V,Q,r,A,vpercent,P.click,P.mouseover,P.mouseleave)}if(n>=1){bb.points=s;bb.linewidth=v;bb.linecolor=w;bb.fillcolor=z}H.DrawFigures.createCloseFigure(s,z);var C=s.slice(1,s.length-1);H.DrawFigures.createPointsLine(C,v,w);for(var j=0;j<C.length;j++){var E=C[j];Z(E[0],E[1],w,H.innerData[j])}}};var bd=function(){if(K.multiple){var a=bb.areainfos;for(var i=0;i<a.length;i++){var b=a[i].points;var c=b.slice(1,b.length-1);if(M&&i>0){ba(c,d,a[i].fillcolor)}else{H.DrawFigures.createCloseFigure(b,a[i].fillcolor)}var d=c.__copy()}for(var i=0;i<a.length;i++){var b=a[i].points;var c=b.slice(1,b.length-1);H.DrawFigures.createPointsLine(c,a[i].linewidth,a[i].linecolor);for(var j=0;j<c.length;j++){Z(c[j][0],c[j][1],a[i].linecolor,a[i])}}}else{var b=bb.points;H.DrawFigures.createCloseFigure(b,bb.fillcolor);var c=b.slice(1,b.length-1);H.DrawFigures.createPointsLine(c,bb.linewidth,bb.linecolor);for(var j=0;j<c.length;j++){Z(c[j][0],c[j][1],bb.linecolor,H.innerData[j])}}};var be=[];var bf=function(){var p=function(x,y){var a=null;for(var i=H.shapes.nodes.length-1;i>=0;i--){var b=H.shapes.nodes[i];if(Math.sqrt(Math.pow(x-b.centerX,2)+Math.pow(y-b.centerY,2))<=b.nodelength/2){a=b;break}}return a};var q=function(x,y){var a=[];var b=0;if(y<=S.maxY&&y>=S.minY&&x>=S.minX&&x<=S.maxX){var c=0;var d=(S.maxX-S.minX)/(K.tuftCount-1);for(var i=1;i<K.tuftCount;i++){var e=S.minX+(i-1)*d;var f=S.minX+i*d;if(e<=x&&f>=x){if(Math.abs(e-x)<=Math.abs(f-x)){c=i-1;b=e}else{c=i;b=f}break}}for(var i=0,shape;shape=H.shapes.nodes[i];i++){if(shape.index==c){a.push(shape)}}}return{shapes:a,locX:b}};H.canvas.onclick=function(e){var e=window.event||e;var a=H._getMouseLoction(e);var b=p(a.X,a.Y);if(b){b.click(e)}};H.canvas.onmousemove=function(e){var e=window.event||e;var a=H._getMouseLoction(e);var b=K.lValueType||!K.multiple;var c=p(a.X,a.Y);if(H.tempData.currentMouseShape!=c){var d=H.tempData.currentMouseShape;if(d){var f=typeof d.data.mouseleave=='function'?d.data.mouseleave:(I.mouseleave||null);if(f){f(d.data,e)}}H.tempData.currentMouseShape=c;for(var i=0,d;d=H.shapes.nodes[i];i++){if(d!=c&&d.isHovered){d.isHovered=false;if(b&&d.hideTip){d.hideTip()}}}if(c){c.isHovered=true;if(I.mouseoverChangeCursor){H.canvas.style.cursor='pointer'}if(b){if(I.alignline.verticalline||I.alignline.horizontalline){H._createAssists(R);H._createScales(R);bd()}if(I.alignline.verticalline){var g=I.alignline.linecolor||DChart.Const.Defaults.AlignLineColor;H.DrawFigures.createLine(c.centerX,S.minY,c.centerX,S.maxY+1,1,g)}if(I.alignline.horizontalline){var g=I.alignline.linecolor||DChart.Const.Defaults.AlignLineColor;H.DrawFigures.createLine(S.minX,c.centerY,S.maxX,c.centerY,1,g)}if(c.showTip&&b){c.showTip()}}var h=typeof c.data.mouseover=='function'?c.data.mouseover:(I.mouseover||null);if(h){h(c.data,e)}}else{if(I.mouseoverChangeCursor){H.canvas.style.cursor='auto'}if(b&&(I.alignline.verticalline||I.alignline.horizontalline)){H._createAssists(R);H._createScales(R);bd()}}}if(!b){var j=q(a.X,a.Y);if(H.tempData.locX!=j.locX){H.tempData.locX=j.locX;if(I.tip.merge){for(var i=0;i<be.length;i++){if(be[i]){be[i].style.display='none'}}}else{for(var i=0,d;d=H.shapes.nodes[i];i++){if(d.hideTip){d.hideTip()}}}if(I.alignline.verticalline){H._createAssists(R);H._createScales(R);bd()}if(j.shapes.length){if(I.alignline.verticalline){var g=I.alignline.linecolor||DChart.Const.Defaults.AlignLineColor;H.DrawFigures.createLine(j.locX,S.minY,j.locX,S.maxY+1,1,g)}if(I.tip.merge){if(j.shapes[0].showTip){var k=be[j.shapes[0].index];if(!k){var l=[];var m=0;for(var i=0,d;d=j.shapes[i];i++){l.push(d.data);m+=d.centerY}var n=j.locX+V+5;var o=m/j.shapes.length;k=H._createTip(I.tip.content.call(I,l,true),n,o);H._changeTip(k,null,o-k.clientHeight/2+10);if(n+k.clientWidth>S.maxX){H._changeTip(k,n-5-V-k.clientWidth)}be[j.shapes[0].index]=k}k.style.display='inline'}}else{for(var i=0,d;d=j.shapes[i];i++){if(d.showTip){d.showTip()}}}}}}}};H._startDrawAndAnimation(bc,bf)},_spreadSkin:function(a,b){var c=DChart.Const.Skins;if(c[a]&&c[a].Area){var d=c[a].Area;b.node={};b.alignline={};b.node.linecolor=d.NodeLineColor||null;b.alignline.linecolor=d.AlignlineLineColor||null}},_getCheckOptions:function(){return{area:[['linecolors','ca'],['linewidth','n'],['fillcolors','ca']],labelAxis:[['valueType','s'],['content','f'],['minvalue','n'],['maxvalue','n'],['interval','n'],['sort','b']],valueAxis:[['heap','b']],node:[['show','b'],['nodetype','s'],['linecolor','c'],['linewidth','n'],['length','n'],['fillcolor','c']],tip:[['merge','b']],alignline:[['verticalline','b'],['horizontalline','b'],['linecolor','c']],scale:[['drawvertical','b']]}}});