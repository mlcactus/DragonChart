Function.prototype.__extends=function(a){for(var b in a){this.prototype[b]=a[b]}return this};Date.prototype.format=function(a){var o={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"S":this.getMilliseconds()};if(/(y+)/.test(a)){a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))}for(var k in o){if(new RegExp("("+k+")").test(a)){a=a.replace(RegExp.$1,(RegExp.$1.length==1)?(o[k]):(("00"+o[k]).substr((""+o[k]).length)))}}return a};Date.prototype.addMinutes=function(a){var b=this.getMinutes();this.setMinutes(b+a);return this};Date.prototype.addDays=function(a){var b=this.getDate();this.setDate(b+a);return this};Date.prototype.shortOf=function(a,b){switch(a){case"s":return parseInt((b-this)/1000);case"n":return parseInt((b-this)/60000);case"h":return parseInt((b-this)/3600000);case"d":return parseInt((b-this)/86400000);case"w":return parseInt((b-this)/(86400000*7));case"m":return(b.getMonth()+1)+((b.getFullYear()-this.getFullYear())*12)-(this.getMonth()+1);case"y":return b.getFullYear()-this.getFullYear();default:return undefined}};Array.prototype.__copy=function(){var a=[];for(var i=0;i<this.length;i++){a.push(this[i])}return a};Array.prototype.__multiply=function(a){for(var i=0;i<this.length;i++){this[i]=this[i]*a}};Array.prototype.__contains=function(a){var b=false;for(var i=0;i<this.length;i++){if(this[i]===a){b=true;break}}return b};Array.prototype.__only=function(a){var b=true;for(var i=0;i<this.length;i++){if(this[i]!==a){b=false;break}}return b};window.DChart={};DChart.Methods={JudgeNormalObject:function(a){return a&&typeof a=='object'&&!DChart.Methods.IsArray(a)},DeepCopy:function(e){var f={};var g=function(a,b,c){backupPath=c;for(var d in b){c+=d+'.';if(DChart.Methods.JudgeNormalObject(b[d])&&!DChart.Const.Exceps.__contains(c.substring(0,c.length-1))){a[d]={};g(a[d],b[d],c)}else{if(b.hasOwnProperty(d)){a[d]=b[d]}}c=backupPath}};g(f,e,'');return f},Override:function(f,g){var h=DChart.Methods.DeepCopy(f);var i=function(a,b,c){var d=c;for(var e in b){c+=e+'.';if(a[e]!==undefined&&b.hasOwnProperty(e)){if(DChart.Methods.JudgeNormalObject(b[e])&&DChart.Methods.JudgeNormalObject(a[e])&&!DChart.Const.Exceps.__contains(c.substring(0,c.length-1))){i(a[e],b[e],c)}else{a[e]=b[e]}}c=d}};i(h,g,'');return h},Extend:function(f,g){var h=DChart.Methods.DeepCopy(f);var i=function(a,b,c){var d=c;for(var e in b){if(b.hasOwnProperty(e)){if(DChart.Methods.JudgeNormalObject(b[e])&&!DChart.Const.Exceps.__contains(c.substring(0,c.length-1))){if(!DChart.Methods.JudgeNormalObject(a[e])){a[e]={}}i(a[e],b[e])}else{a[e]=b[e]}}c=d}};i(h,g,'');return h},CapValue:function(a,b,c){if(DChart.Methods.IsNumber(b)&&a>b){return b}if(DChart.Methods.IsNumber(c)&&a<c){return c}return a},GetRandomString:function(){return Math.random().toString().substring(2)},GetCurrentAngle:function(x,y,a,b){var c=Math.asin((y-b)/Math.sqrt(Math.pow(x-a,2)+Math.pow(y-b,2)));if(c!=0){if(x<a&&y>b){c=Math.PI-c}else if(x<a&&y<b){c=-Math.PI-c}}else{if(x<a){c=Math.PI}}return c},JudgeBetweenAngle:function(a,b,c){var d=false;var e=Math.PI;while(c<=b){if(c>=a){d=true;break}c+=e*2}if(!d){while(c>=a){if(c<=b){d=true;break}c-=e*2}}return d},CopyInnerValue:function(a,b){if(a=='d'||a=='t'){return new Date(b.getTime())}return b},AddInnerValue:function(a,b,c){if(a=='d'){b=b.addDays(c)}else if(a=='t'){b=b.addMinutes(c)}else{b+=c}return b},FormatLinePosition:function(b,x,y){var b=Math.ceil(b);var c=function(a){var i=Math.floor(a);if(b%2==0){return a-i>0.5?i+1:i}else{return i+0.5}};if(arguments.length==3){return{x:c(x),y:c(y)}}else{return c(x)}},ObjectHaveSameValues:function(a,b,c){var d=true;for(var i=0,field;field=c[i];i++){if(a[field]!==b[field]){d=false;break}}return d},IsArray:function(a){return Object.prototype.toString.call(a)==='[object Array]'},IsNumber:function(n){return!isNaN(parseFloat(n))&&isFinite(n)},IsColor:function(a){return DChart.Const.RegExps.HexColor.test(a)||DChart.Const.RegExps.RGBColor.test(a)||DChart.Const.RegExps.RGBAColor.test(a)}};DChart.Const={Language:{CN:{WrongParam:'参数错误！',WrongData:'数据错误！',WrongSet:'设置错误！',NeedDiv:'需传入一个div节点元素或其id。',DataMustBeArray:'数据不能为空且必须为数组格式。',HexColorMalformed:'十六进制的颜色表达形式格式错误。',RGBColorMalformed:'rgb的颜色表达形式格式错误。',RGBAChangeTransparencyWrongParam:'RGBA表达式格式错误，或透明度值错误，必须>=0且<=1。',NeedDateData:'数据必须是日期格式。',NeedNumberData:'数据必须是数字格式。',OuterRadiusShouldBigger:'环状图外部半径应大于内部半径',AxisMaxLessThanMin:'坐标设定的最大值应该大于最小值。',AxisMaxLessThanActual:'坐标设定的最大值应该大于实际数据的最大值。',AxisMinMoreThanActual:'坐标设定的最小值应该小于实际数据的最小值。',LabelAxisValueTypeCannotBePercent:'文本轴的数据类型不能为百分数。',ValueTypeMustBeNumberOrPercent:'值轴的数据类型必须为n或p。',AxisVauleShouldBeDArray:'数据必须为二维数组（第一个元素为文本轴值，第二个元素为值轴值）。',DataMustGreaterThanZero:'数据必须为不小于零的数字。',DataMustBeMultipleArray:'数据必须为多维数组。',SumOfLengthsMustBeLessThanRadius:'环状图的宽度之和应小于半径',OptionShouldNotBeUndefined:'选项值不能为undefined',OptionShouldBeString:'选项值必须为字符串格式。',OptionShouldBeBoolean:'选项值必须为布尔格式。',OptionShouldBeNumber:'选项值必须为数字格式。',OptionShouldBeColorStr:'选项值必须为颜色格式的字符串。',OptionShouldBeFunction:'选项值必须为一个function。',OptionShouldBeColorArray:'选项值必须为由颜色字符串组成的数组。',OptionShouldBeStringArray:'选项值必须为由字符串组成的数组。',OptionShouldBeNumberArray:'选项值必须为由数字组成的数组。',WrongLegendSet:'错误的图例位置设置，不允许X和Y方向上都居中或者当type为\"row\"时Y方向居中。'},EN:{WrongParam:'Wrong parameter!',WrongData:'Wrong data!',WrongSet:'Wrong set！',NeedDiv:'A div DOM element or its id is needed.',DataMustBeArray:'data must not be empty and be an array.',HexColorMalformed:'Hex color expression is wrong.',RGBColorMalformed:'Rgb color expression is wrong.',RGBAChangeTransparencyWrongParam:'RGBA expression is wrong，or transparency number is unqualified, it must be >=0 and <=1.',NeedDateData:'Data must be a date format.',NeedNumberData:'Data must be a number format.',OuterRadiusShouldBigger:'Ring graphic outer radius should be larger than the internal radius',AxisMaxLessThanMin:'The maximum value set of axis should be greater than the minimum value.',AxisMaxLessThanActual:'The maximum value set of axis should be greater than the actual maximum value.',AxisMinMoreThanActual:'The minimum value set of axis should be less than the actual minimum value.',LabelAxisValueTypeCannotBePercent:'The valueType of text-axis cannot be percent。',ValueTypeMustBeNumberOrPercent:'The valueType of value-axis must be n or p.',AxisVauleShouldBeDArray:'Data must be double-array（first value for label axis，second for value axis）',DataMustGreaterThanZero:'Data must not be less than zero.',DataMustBeMultipleArray:'Data must be multiple array.',SumOfLengthsMustBeLessThanRadius:'The sum of lengths in multiring picture must be less than the radius set',OptionShouldNotBeUndefined:'Option value should not be undefined.',OptionShouldBeString:'Option value should be a string.',OptionShouldBeBoolean:'Option value should be a boolean.',OptionShouldBeNumber:'Option value should be a number.',OptionShouldBeColorStr:'Option value should be a string array.',OptionShouldBeFunction:'Option value should be a function.',OptionShouldBeColorArray:'Option value should be a color array.',OptionShouldBeStringArray:'Option value should be a string array.',OptionShouldBeNumberArray:'Option value should be a number array.',WrongLegendSet:'Wrong legend position sets, direction X and direction Y cannot be center(middle) at the same time, and when type is \"row\" direction Y cannot be middle.'}},CustomCss:{tip_blue:'{box-shadow: 0px 0px 4px rgb(102, 102, 102); border: 2px solid rgb(13, 142, 207); border-radius: 5px 5px 5px 5px; position: absolute; z-index: 999; text-align: left; padding: 4px 5px; cursor: default; background-color: rgba(239, 239, 239, 0.85); font-size: 12px; color: rgb(13, 142, 207); opacity: 1; transition: opacity 0.3s ease-out 0s, top 0.1s ease-out 0s, left 0.1s ease-out 0s; top: 245.66px; left: 308.333px; visibility: visible;}',tip_red:'{box-shadow: 0px 0px 4px rgb(102, 102, 102); border: 2px solid rgb(176, 23,  31); border-radius: 5px 5px 5px 5px; position: absolute; z-index: 999; text-align: left; padding: 4px 5px; cursor: default; background-color: rgba(239, 239, 239, 0.85); font-size: 12px; color: rgb(176, 23,  31); opacity: 1; transition: opacity 0.3s ease-out 0s, top 0.1s ease-out 0s, left 0.1s ease-out 0s; top: 245.66px; left: 308.333px; visibility: visible;}',tip_dark:'{box-shadow: 0px 0px 4px rgb(102, 102, 102); border: 2px solid rgb(79 , 79, 79  ); border-radius: 5px 5px 5px 5px; position: absolute; z-index: 999; text-align: left; padding: 4px 5px; cursor: default; background-color: rgba(239, 239, 239, 0.85); font-size: 12px; color: rgb(79 , 79, 79  ); opacity: 1; transition: opacity 0.3s ease-out 0s, top 0.1s ease-out 0s, left 0.1s ease-out 0s; top: 245.66px; left: 308.333px; visibility: visible;}',tip_purple:'{box-shadow: 0px 0px 4px rgb(102, 102, 102); border: 2px solid rgb(138,43,226); border-radius: 5px 5px 5px 5px; position: absolute; z-index: 999; text-align: left; padding: 4px 5px; cursor: default; background-color: rgba(239, 239, 239, 0.85); font-size: 12px; color: rgb(138,43,226); opacity: 1; transition: opacity 0.3s ease-out 0s, top 0.1s ease-out 0s, left 0.1s ease-out 0s; top: 245.66px; left: 308.333px; visibility: visible;}',tip_yellow:'{box-shadow: 0px 0px 4px rgb(102, 102, 102); border: 2px solid rgb(255,128,0); border-radius: 5px 5px 5px 5px; position: absolute; z-index: 999; text-align: left; padding: 4px 5px; cursor: default; background-color: rgba(239, 239, 239, 0.85); font-size: 12px; color: rgb(255,128,0); opacity: 1; transition: opacity 0.3s ease-out 0s, top 0.1s ease-out 0s, left 0.1s ease-out 0s; top: 245.66px; left: 308.333px; visibility: visible;}',tip_bisque:'{box-shadow: 0px 0px 4px rgb(102, 102, 102); border: 2px solid #BEBEBE; border-radius: 5px 5px 5px 5px; position: absolute; z-index: 999; text-align: left; padding: 4px 5px; cursor: default; background-color: rgba(239, 239, 239, 0.85); font-size: 12px; color: rgb(190,190,190);; opacity: 1; transition: opacity 0.3s ease-out 0s, top 0.1s ease-out 0s, left 0.1s ease-out 0s; top: 245.66px; left: 308.333px; visibility: visible;}'},AnimationAlgorithms:{linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){if((t/=1/2)<1)return 1/2*t*t;return-1/2*((--t)*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){if((t/=1/2)<1)return 1/2*t*t*t;return 1/2*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){if((t/=1/2)<1)return 1/2*t*t*t*t;return-1/2*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){if((t/=1/2)<1)return 1/2*t*t*t*t*t;return 1/2*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-1/2*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return(t==0)?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return(t==1)?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){if(t==0)return 0;if(t==1)return 1;if((t/=1/2)<1)return 1/2*Math.pow(2,10*(t-1));return 1/2*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){if(t>=1)return t;return-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){if((t/=1/2)<1)return-1/2*(Math.sqrt(1-t*t)-1);return 1/2*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var s=1.70158;var p=0;var a=1;if(t==0)return 0;if((t/=1)==1)return 1;if(!p)p=1*.3;if(a<Math.abs(1)){a=1;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(1/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*1-s)*(2*Math.PI)/p))},easeOutElastic:function(t){var s=1.70158;var p=0;var a=1;if(t==0)return 0;if((t/=1)==1)return 1;if(!p)p=1*.3;if(a<Math.abs(1)){a=1;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(1/a);return a*Math.pow(2,-10*t)*Math.sin((t*1-s)*(2*Math.PI)/p)+1},easeInOutElastic:function(t){var s=1.70158;var p=0;var a=1;if(t==0)return 0;if((t/=1/2)==2)return 1;if(!p)p=1*(.3*1.5);if(a<Math.abs(1)){a=1;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(1/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*1-s)*(2*Math.PI)/p));return a*Math.pow(2,-10*(t-=1))*Math.sin((t*1-s)*(2*Math.PI)/p)*.5+1},easeInBack:function(t){var s=1.70158;return 1*(t/=1)*t*((s+1)*t-s)},easeOutBack:function(t){var s=1.70158;return 1*((t=t/1-1)*t*((s+1)*t+s)+1)},easeInOutBack:function(t){var s=1.70158;if((t/=1/2)<1)return 1/2*(t*t*(((s*=(1.525))+1)*t-s));return 1/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)},easeInBounce:function(t){return 1-DChart.Const.AnimationAlgorithms.easeOutBounce(1-t)},easeOutBounce:function(t){if((t/=1)<(1/2.75)){return 1*(7.5625*t*t)}else if(t<(2/2.75)){return 1*(7.5625*(t-=(1.5/2.75))*t+.75)}else if(t<(2.5/2.75)){return 1*(7.5625*(t-=(2.25/2.75))*t+.9375)}else{return 1*(7.5625*(t-=(2.625/2.75))*t+.984375)}},easeInOutBounce:function(t){if(t<1/2)return DChart.Const.AnimationAlgorithms.easeInBounce(t*2)*.5;return DChart.Const.AnimationAlgorithms.easeOutBounce(t*2-1)*.5+1*.5}},RegExps:{BlankCharacter:/\s/g,HexColor:/^#[a-fA-F0-9]{5}[a-fA-F0-9]$/,RGBColor:/^(rgb)\([0-9]{0,3},[0-9]{0,3},[0-9]{0,3}\)/,RGBAColor:/^(rgba)\([0-9]{0,3},[0-9]{0,3},[0-9]{0,3},(0.)?[0-9]+\)/,ReturnFunction:/function *\(.*\) *\{.*return.*\}$/,NormalFunction:/function *\(.*\) *\{.*\}$/},Defaults:{FillColors:['rgba(47,79,79,1)','rgba(0,128,128,1)','rgba(0,206,209,1)','rgba(112,128,144,1)','rgba(30,144,255,1)','rgba(39,64,139,1)','rgba(93,71,139,1)','rgba(188,143,143,1)','rgba(178,34,34,1)','rgba(255,140,0,1)','rgba(139,134,130,1)','rgba(70,130,180,1)','rgba(65,105,225,1)','rgba(220,220,220,1)','rgba(100,149,23,1)','rgba(72,209,204,1)','rgba(0,191,255,1)','rgba(176,196,222,1)','rgba(255,182,193,1)','rgba(30,144,255,1)'],TransparentColors:['rgba(39,64,139,0.3)','rgba(220,220,220,0.3)','rgba(151,187,205,0.3)','rgba(0,206,209,0.3)','rgba(100,149,23,0.3)','rgba(112,128,144,0.3)','rgba(30,144,255,0.3)','rgba(93,71,139,0.3)','rgba(188,143,143,0.3)','rgba(178,34,34,0.3)','rgba(255,140,0,0.3)','rgba(139,134,130,0.3)','rgba(70,130,180,0.3)','rgba(65,105,225,0.3)','rgba(220,220,220,0.3)','rgba(72,209,204,0.3)','rgba(0,191,255,0.3)','rgba(176,196,222,0.3)','rgba(255,182,193,0.3)','rgba(30,144,255,0.3)'],Language:'CN',SavedPicName:'exportCanvas_'+(new Date()).getTime(),LineColor:'#BEBEBE',FontColor:'#000000',FontSize:13,FontFamily:'Arial',LineWidth:1,LegendType:'s',TipType:'tip_blue',InnerLabelColor:'#ffffff',OuterLabelColor:'#000000',ValueType:'n',ScaleLineColor:'#BEBEBE',AxisFontFamily:'Arial',AxisLineColor:'#000000',FooterFontColor:'#8B8386',AlignLineColor:'#21251e',FooterBottomDistance:0.01,FooterRightDistance:0.03,LengthReferCutForPies:60,LengthReferCutForAxis:90,OffXCutForPies:20,OffXCutForAxis:70,AxisXDrawableCut:6,AxisYDrawableCut:{n:9,p:9,d:7,t:7},AxisYTitleLocation:{n:0.7,p:0.7,d:0.75,t:0.75},AxisXTitleLocation:{n:0.8,p:0.8,d:0.8,t:0.8}},Exceps:['background.fillstyle'],DrawAxis:['Bar','HeapBar','Histogram','HeapHistogram','Line','Points','Area'],AxisFromFirstLeft:['Line','Area','Points'],Skins:{BlackAndWhite:{BackGround:{BorderWidth:1,BorderColor:null,BackColor:'#ffffff',LinearGradient:null,RadialGradient:null},TipType:null,FontColor:null,LineColor:null,FontFamily:null,TitleColor:null,SubTitleColor:null,LegendFontColor:null,LegendBorderColor:null,ScaleLineColor:null,ScaleBackColors:['rgba(150,150,150,0.3)','rgba(210,210,210,0.3)'],LabelAxisLineColor:null,LabelAxisFontColor:null,ValueAxisLineColor:null,ValueAxisFontColor:null,CrossLineColor:null,CloseLineColor:null,CaptionFontColor:null,XAxisTitleFontColor:null,YAxisTitleFontColor:null,FooterFontColor:'rgba(110,110,110,0.8)',ShadowColor:'#000000'}},Interval:{n:[1,2,3,4,5,8,10,20,30,40,50,80,100,200,300,500,800,1000],p:[1,2,3,4,5,8,10,20,25,50],d:[1,2,3,5,7,10,14,20,21,30,60,90,365],t:[1,2,5,10,20,30,60,120,180,240,300,480,720,1440]}};DChart.getCore=function(){var V=function(N,O){var P=this;P.Language=DChart.Const.Language[O]!=undefined?O:'CN';P.onStart=null;P.onBeforeAnimation=null;P.onAnimation=null;P.onFinish=null;var Q=null;var R=false;if(N){if(typeof N=='string'&&N.constructor==String){var S=document.getElementById(N);if(S!=null&&S.nodeName.toLowerCase()=='div'){Q=S}else{R=true}}else if(typeof N=='object'&&N.nodeName!=undefined&&N.nodeName.toLowerCase()=='div'){Q=N}else{R=true}}else{R=true}if(R){throw new Error(DChart.Const.Language[P.Language].WrongParam+DChart.Const.Language[P.Language].NeedDiv);}else{if(Q.clientWidth==0){Q.style.width="800px"}if(Q.clientHeight==0){Q.style.height=(Q.clientWidth/2).toString()+"px"}Q.style.padding=''}var T=function(a){if(a!=null){return a<0?0:a}else{return null}};var U={Off:0,OffLeft:null,OffRight:null,OffTop:null,OffBottom:null,Width:null,Height:null};P._computeBasic=function(a){var b=a||U;var c=T(b.Off);var d=T(b.OffLeft)||c||0;var e=T(b.offright)||c||0;var f=T(b.offtop)||c||0;var g=T(b.offbottom)||c||0;var h=T(Q.clientWidth-d-e);var i=T(Q.clientHeight-f-g);var j=DChart.Methods.CapValue(b.Width||h,Q.clientWidth,0);var k=DChart.Methods.CapValue(b.Height||i,Q.clientHeight,0);var l={offleft:d,offright:e,offtop:f,offbottom:g,width:j,height:k};if(!a){P.calculatedBasic=l}return l};P._resetSharedOpions=function(){P.originalDefaultOptions={valueType:null,animation:true,animationSteps:100,animationEasing:'easeInOutQuart',scaleOverlay:false,lineColor:null,fontFamily:null,fontColor:null,background:{bordercolor:null,borderwidth:null,fillstyle:null},title:{show:true,content:null,color:null,fontfamily:null,fontsize:null,fontweight:null,offtop:null,height:null},subTitle:{show:true,content:null,color:null,fontfamily:null,fontsize:null,fontweight:null,height:null},legend:{show:true,type:null,elementtype:null,placeX:null,placeY:null,sidelength:null,offX:null,offY:null,bordercolor:null,borderwidth:1,fontcolor:null,fontsize:null,fontfamily:null},scale:{linewidth:1,linecolor:null,backcolors:null},labelAxis:{labels:null,length:null,linewidth:1,linecolor:null,fontcolor:null,fontsize:null,fontfamily:null,fontweight:null,fontrotate:null},valueAxis:{length:null,content:function(a){if(this.valueType=='d'){return a.format('yyyy-MM-dd')}else if(this.valueType=='t'){return a.format('MM-dd hh:mm')}else if(this.valueType=='p'){return a.toFixed(0).toString()+'%'}else{return a.toString()}},minvalue:null,maxvalue:null,interval:null,verticalcomputeP:false,linewidth:null,linecolor:null,fontcolor:null,fontsize:null,fontfamily:null,fontweight:null,fontrotate:null},cross:{show:true,length:null,linewidth:null,linecolor:null},close:{show:true,linewidth:null,linecolor:null},caption:{content:null,fontcolor:null,fontsize:null,fontfamily:null,fontweight:null},xAxisTitle:{content:null,fontcolor:null,fontsize:null,fontfamily:null,fontweight:null,titlelocation:null},yAxisTitle:{content:null,fontcolor:null,fontsize:null,fontfamily:null,fontweight:null,titlelocation:null},footer:{content:null,fontcolor:null,fontsize:null,fontfamily:null,fontweight:null,rightdistance:null,bottomdistance:null},shadow:{show:true,color:null,blur:null,offsetX:null,offsetY:null},supportMouseEvents:true,tip:{show:true,content:function(a){var b=a.value.toString();if(this.valueType=='d'){b=a.value.format('yyyy-MM-dd')}else if(this.valueType=='t'){b=a.value.format('MM-dd hh:mm')}return'<div>&nbsp;'+a.text+'：'+b+'&nbsp;</div>'},tiptype:null},click:null,mouseover:null,mouseleave:null,mouseoverTransparency:0.3,mouseoverChangeCursor:true,onAnimationComplete:null}};P.SetBasicOptions=function(a){var b=P._computeBasic(a);if(P.calculatedBasic&&DChart.Methods.ObjectHaveSameValues(P.calculatedBasic,b,['offleft','offright','offtop','offbottom','height','width'])){return}U=DChart.Methods.Override(U,a);P.Initial();return P};P.SetData=function(a){if((!a||!DChart.Methods.IsArray(a))&&(!P.innerData||!DChart.Methods.IsArray(P.innerData))){throw new Error(DChart.Const.Language[P.Language].WrongParam+DChart.Const.Language[P.Language].DataMustBeArray);}if(a){if(DChart.Methods.IsArray(a[0])&&a[0].length>0){var b=[];for(var i=0,item;item=a[i];i++){var c={};if(item[0]){c.text=item[0]}if(item[1]){c.value=item[1]}if(item[2]){c.color=item[2]}if(typeof item[3]=='function'){c.click=item[3]}if(typeof item[4]=='function'){c.mouseover=item[4]}if(typeof item[5]=='function'){c.mouseleave=item[5]}b.push(c)}a=b}P.innerData=a}return P};P.SetOptions=function(a){if(!P.innerOptions){P.SetDefaultOptions()}if(a){P.innerOptions=DChart.Methods.Override(P.innerOptions,a)}return P};P._onStart=function(){P.coordinates={};P.tempData={};P.canvas.onclick=null;P.canvas.onmousemove=null;if(P.onStart){P.onStart()}};P._checkOptions=function(){var j=function(c,d,e){var f=function(a){var b=DChart.Const.Language[P.Language];throw new Error(b.WrongParam+c+b[a]);};if(d===null){return}else if(d===undefined){f('OptionShouldNotBeUndefined');}var g=null;switch(e){case's':if(typeof d!='string'){f('OptionShouldBeString');}break;case'b':if(typeof d!='boolean'){f('OptionShouldBeBoolean');}break;case'c':if(typeof d!='string'||!DChart.Methods.IsColor(d)){f('OptionShouldBeColorStr');}break;case'f':if(typeof d!='function'){f('OptionShouldBeFunction');}break;case'ca':if(typeof d=='string'&&DChart.Methods.IsColor(d)){g=[d]}else{var h=true;if(DChart.Methods.IsArray(d)&&d.length){for(var i=0,str;str=d[i];i++){if(typeof str!='string'||!DChart.Methods.IsColor(str)){h=false}}}else{h=false}if(!h){f('OptionShouldBeColorArray');}}break;case'sa':if(typeof d=='string'){g=[d]}else{var h=true;if(DChart.Methods.IsArray(d)&&d.length){for(var i=0,str;str=d[i];i++){if(typeof str!='string'){h=false}}}else{h=false}if(!h){f('OptionShouldBeStringArray');}}break;case'na':if(typeof d=='number'&&DChart.Methods.IsNumber(d)){g=[d]}else{var h=true;if(DChart.Methods.IsArray(d)&&d.length){for(var i=0;i<d.length;i++){if(typeof d[i]!='number'||!DChart.Methods.IsNumber(d[i])){h=false}}}else{h=false}if(!h){f('OptionShouldBeNumberArray');}}break;default:if(typeof d!='number'||!DChart.Methods.IsNumber(d)){f('OptionShouldBeNumber');}break}return g};var k={__top:[['valueType','s'],['animation','b'],['animationSteps','n'],['animationEasing','s'],['scaleOverlay','b'],['lineColor','c'],['fontFamily','s'],['fontColor','c'],['supportMouseEvents','b'],['click','f'],['mouseover','f'],['mouseleave','f'],['mouseoverTransparency','n'],['mouseoverChangeCursor','b'],['onAnimationComplete','f']],title:[['show','b'],['content','s'],['offtop','n'],['height','n'],['color','c'],['fontsize','n'],['fontfamily','s'],['fontweight','s']],subTitle:[['show','b'],['content','s'],['height','n'],['color','c'],['fontsize','n'],['fontfamily','s'],['fontweight','s']],legend:[['show','b'],['type','s'],['elementtype','s'],['placeX','s'],['placeY','s'],['sidelength','n'],['offX','n'],['offY','n'],['bordercolor','c'],['borderwidth','n'],['fontcolor','c'],['fontsize','n'],['fontfamily','s']],background:[['bordercolor','c'],['borderwidth','n']],scale:[['linewidth','n'],['linecolor','c'],['backcolors','ca']],labelAxis:[['labels','sa'],['length','n'],['linewidth','n'],['linecolor','c'],['fontcolor','c'],['fontsize','n'],['fontfamily','s'],['fontweight','s'],['fontrotate','n']],valueAxis:[['length','n'],['content','f'],['minvalue','n'],['maxvalue','n'],['interval','n'],['verticalcomputeP','b'],['linewidth','n'],['linecolor','c'],['fontcolor','c'],['fontsize','n'],['fontfamily','s'],['fontweight','s'],['fontrotate','n']],cross:[['show','b'],['length','n'],['linewidth','n'],['linecolor','c']],close:[['show','b'],['linewidth','n'],['linecolor','c']],caption:[['content','s'],['fontcolor','c'],['fontsize','n'],['fontfamily','s'],['fontweight','s']],xAxisTitle:[['content','s'],['fontcolor','c'],['fontsize','n'],['fontfamily','s'],['fontweight','s'],['titlelocation','n']],yAxisTitle:[['content','s'],['fontcolor','c'],['fontsize','n'],['fontfamily','s'],['fontweight','s'],['titlelocation','n']],footer:[['content','s'],['fontcolor','c'],['fontsize','n'],['fontfamily','s'],['fontweight','s'],['rightdistance','n'],['bottomdistance','n']],shadow:[['show','b'],['color','c'],['blur','n'],['offsetX','n'],['offsetY','n']],tip:[['show','b'],['content','f'],['tiptype','s']]};var l=function(a){for(var b in a){var c=b=='__top'?P.innerOptions:P.innerOptions[b];for(var i=0,subitem;subitem=a[b][i];i++){var d=b=='__top'?subitem[0]:b+'.'+subitem[0];var e=c[subitem[0]];var f=subitem[1];var g=j(d,e,f);if(g!=null){c[subitem[0]]=g}}}};var m=P._getCheckOptions();l(k);l(m)};P.GetCoordinate=function(a){var b=P.coordinates;if(typeof a!='string'){return b}else{var c=a.replace(DChart.Const.RegExps.BlankCharacter,'').split(".");for(var i=0,item;item=c[i];i++){if(b){b=b[item]}}return b}};P.SetSkin=function(a){if(!DChart.Const.Skins[a]){a='BlackAndWhite'}var b=DChart.Const.Skins[a];var c={};c.fontColor=b.FontColor||null;c.lineColor=b.LineColor||null;c.fontFamily=b.FontFamily||null;c.background={};c.background.fillstyle=null;if(b.BackGround){c.background.bordercolor=b.BackGround.BorderColor||null;c.background.borderwidth=b.BackGround.BorderWidth||null;if(b.BackGround.BackColor){c.background.fillstyle=b.BackGround.BackColor}else{var d=b.BackGround.LinearGradient;if(d&&d.Location&&d.ColorStops&&d.ColorStops.length){var e=d.Location;var f=P.ctx.createLinearGradient(e.minX||0,e.minY||0,e.maxX||P.canvas.width,e.maxY||P.canvas.height);for(var i=0,stop;stop=d.ColorStops[i];i++){f.addColorStop(stop.offset,stop.color)}c.background.fillstyle=f}else{d=b.BackGround.RadialGradient;if(d&&d.Location&&d.ColorStops&&d.ColorStops.length){var e=d.Location;var f=P.ctx.createRadialGradient(e.x0||P.canvas.width/2,e.y0||P.canvas.height/2,e.r0||0,e.x1||P.canvas.width/2,e.y1||P.canvas.height/2,e.r1||Math.max(P.canvas.width,P.canvas.height));for(var i=0,stop;stop=d.ColorStops[i];i++){f.addColorStop(stop.offset,stop.color)}c.background.fillstyle=f}}}}c.title={};c.title.color=b.TitleColor||null;c.subTitle={};c.subTitle.color=b.SubTitleColor||null;c.legend={};c.legend.fontcolor=b.LegendFontColor||null;c.legend.bordercolor=b.LegendBorderColor||null;c.title={};c.title.color=b.TitleColor||null;c.scale={};c.scale.linecolor=b.ScaleLineColor||null;c.scale.backcolors=b.ScaleBackColors||null;c.labelAxis={};c.labelAxis.linecolor=b.LabelAxisLineColor||null;c.labelAxis.fontcolor=b.LabelAxisFontColor||null;c.valueAxis={};c.valueAxis.linecolor=b.ValueAxisLineColor||null;c.valueAxis.fontcolor=b.ValueAxisFontColor||null;c.cross={};c.cross.linecolor=b.CrossLineColor||null;c.close={};c.close.linecolor=b.CloseLineColor||null;c.caption={};c.caption.fontcolor=b.CaptionFontColor||null;c.xAxisTitle={};c.xAxisTitle.fontcolor=b.XAxisTitleFontColor||null;c.yAxisTitle={};c.yAxisTitle.fontcolor=b.YAxisTitleFontColor||null;c.footer={};c.footer.fontcolor=b.FooterFontColor||null;c.shadow={};c.shadow.color=b.ShadowColor||null;c.tip={};c.tip.tiptype=b.TipType||null;P._spreadSkin(a,c);P.innerOptions=DChart.Methods.Override(P.innerOptions,c);return P};P.randoms={};P.shapes={};P.Initial=function(){var a=Q.children;for(var i=0,child;child=a[i];i++){if(child.nodeName.toLowerCase()=='canvas'){Q.removeChild(child);break}}var b=document.getElementsByTagName('head')[0];var c=b.getElementsByTagName('style');for(var i=0,d;d=c[i];i++){if(d.id.indexOf('DChart')==0){b.removeChild(d)}}var d=document.createElement('style');var e='DChart'+DChart.Methods.GetRandomString();d.id=e;P.randoms.styleID=e;b.appendChild(d);var f=DChart.Const.CustomCss;for(var g in f){if(f.hasOwnProperty(g)){var h=g+DChart.Methods.GetRandomString();P.randoms[g]=h;var j='.'+h+f[g]+'\n';if(d.styleSheet){d.styleSheet.cssText+=j}else{d.appendChild(document.createTextNode(j))}}}P._computeBasic();var k=document.createElement('canvas');var l='DChart'+DChart.Methods.GetRandomString();P.ID=l;k.setAttribute('id',l);P.randoms.canvasID=l;k.width=P.calculatedBasic.width;k.height=P.calculatedBasic.height;d='margin:'+P.calculatedBasic.offtop+'px '+P.calculatedBasic.offright+'px '+P.calculatedBasic.offbottom+'px '+P.calculatedBasic.offleft+'px;';k.innerHTML='<p>您的浏览器不支持HTML5</p>';k.setAttribute('style',d);Q.appendChild(k);P.canvas=k;P.ctx=k.getContext('2d');P.innerData=[];P.SetDefaultOptions();P.ClearBackGround()};P.SavePic=function(e,f){f=f||'png';var g=function(a){a=a.toLowerCase().replace(/jpg/i,'jpeg');var r=a.match(/png|jpeg|bmp|gif/)[0];return'image/'+r};var h=function(a,b){var c=document.createElementNS('http://www.w3.org/1999/xhtml','a');c.href=a;c.download=b;var d=document.createEvent('MouseEvents');d.initMouseEvent('click',true,false,window,0,0,0,0,0,false,false,false,false,0,null);c.dispatchEvent(d)};var i=P.canvas.toDataURL(g(f));i=i.replace(g(f),'image/octet-stream');var e=(e||DChart.Const.Defaults.SavedPicName)+'.'+f;h(i,e)};P._clearTips=function(){var a=Q.children;for(var i=0,child;child=a[i];i++){if(child.nodeName&&child.nodeName.toLowerCase()!='canvas'){Q.removeChild(child);i--}}};P.DrawFigures={};P.DrawFigures.createPointElement=function(a,X,Y,b,c,d,e,f,g,h){if(arguments.length<5){return}if(d==null){d=true}var i=P.ctx;i.save();i.beginPath();switch(a){case'c':if(h){i.arc(X,Y,b/2,0,Math.PI*2)}else{i.arc(X+b/2,Y+b/2,b/2,0,Math.PI*2)}break;case't':if(h){i.moveTo(X-b/2,Y+b/2);i.lineTo(X+b/2,Y+b/2);i.lineTo(X,Y-b/2);i.lineTo(X-b/2,Y+b/2)}else{i.moveTo(X,Y+b);i.lineTo(X+b,Y+b);i.lineTo(X+b/2,Y);i.lineTo(X,Y+b)}break;case'x':b+=f;if(h){i.moveTo(X-b/2,Y-b/2);i.lineTo(X+b/2,Y+b/2);i.moveTo(X-b/2,Y+b/2);i.lineTo(X+b/2,Y-b/2)}else{i.moveTo(X,Y);i.lineTo(X+b,Y+b);i.moveTo(X,Y+b);i.lineTo(X+b,Y)}break;default:if(h){i.rect(X-b/2,Y-b/2,b,b)}else{i.rect(X,Y,b,b)}break}i.closePath();if(g&&(f>0||a=='x')){i.strokeStyle=(a=='x'?c:e);i.lineWidth=f*2;i.stroke()}if(d&&a!='x'){i.fillStyle=c;i.fill()}i.restore()};P.DrawFigures.createArc=function(a,b,c,d,e,f,g,h,i){if(arguments.length<4){return}var j=P.ctx;g=g||0;h=h||Math.PI*2;j.save();j.beginPath();j.arc(a,b,c,g,h);if(i&&Math.abs(h-g)<Math.PI*2-0.01){j.lineTo(a,b)}j.closePath();if(d>0){j.strokeStyle=e||DChart.Const.Defaults.LineColor;j.lineWidth=d;j.stroke()}if(f){j.fillStyle=f;j.fill()}j.restore()};P.DrawFigures.measureText=function(a,b,c,d){var e=P.ctx;e.save();e.font=(b||'normal')+' '+(c||DChart.Const.Defaults.FontSize)+'px '+(d||P.innerOptions.fontFamily||DChart.Const.Defaults.FontFamily);var f=e.measureText(a).width;e.restore();return f};P.DrawFigures.createText=function(a,x,y,b,c,d,e,f,g,h){var i=P.ctx;i.save();i.textAlign=b||'left';i.font=(c||'normal')+' '+(d||DChart.Const.Defaults.FontSize)+'px '+(e||P.innerOptions.fontFamily||DChart.Const.Defaults.FontFamily);var j=i.measureText(a).width;i.fillStyle=f||P.innerOptions.fontColor||DChart.Const.Defaults.FontColor;if(g){if(b=='center'&&h=='right'){y-=Math.sin(g*Math.PI)*j/2}i.translate(x,y);i.rotate(g*Math.PI);i.fillText(a,0,0)}else{i.fillText(a,x,y)}i.restore();return j};P.DrawFigures.createRectangleFill=function(a,b,c,d,e,f){if(c<=0||d<=0){return}var g=P.ctx;g.save();g.fillStyle=e;if(f){if(f.color){g.shadowColor=f.color}if(f.blur){g.shadowBlur=f.blur}if(f.offsetX){g.shadowOffsetX=f.offsetX}if(f.offsetY){g.shadowOffsetY=f.offsetY}}g.fillRect(a,b,c,d);g.restore()};P.DrawFigures.createRectangleBorder=function(a,b,c,d,e,f){var g=P.ctx;g.save();g.beginPath();g.lineWidth=e||DChart.Const.Defaults.LineWidth;g.rect(a,b,c,d);g.closePath();g.strokeStyle=f||P.innerOptions.lineColor||DChart.Const.Defaults.LineColor;g.stroke();g.restore()};P.DrawFigures.createLine=function(a,b,c,d,e,f){var e=Math.ceil(e);if(a==c){a=c=DChart.Methods.FormatLinePosition(e,a)}else if(b==d){b=d=DChart.Methods.FormatLinePosition(e,b)}var g=P.ctx;g.save();g.lineWidth=e||DChart.Const.Defaults.LineWidth;g.strokeStyle=f||P.innerOptions.lineColor||DChart.Const.Defaults.LineColor;g.beginPath();g.moveTo(a,b);g.lineTo(c,d);g.stroke();g.restore()};P.DrawFigures.createQuadraticCurve=function(a,b,c,d,e,f,g,h){var g=Math.ceil(g);var i=P.ctx;i.save();i.beginPath();i.moveTo(a,b);i.quadraticCurveTo(c,d,e,f);i.lineWidth=g||DChart.Const.Defaults.LineWidth;i.strokeStyle=h||P.innerOptions.lineColor||DChart.Const.Defaults.LineColor;i.stroke();i.restore()};P.DrawFigures.createCloseFigure=function(a,b,c,d){var e=P.ctx;e.save();e.beginPath();for(var i=0,point;point=a[i];i++){if(i==0){e.moveTo(point[0],point[1])}else{e.lineTo(point[0],point[1])}}e.closePath();e.fillStyle=b;e.fill();if(c>0&&d){e.lineWidth=c;e.strokeStyle=d;e.stroke()}e.restore()};P.DrawFigures.createPointsLine=function(a,b,c){if(a.length<2){return}var d=a[0][0];var e=a[0][1];for(var i=1,point;point=a[i];i++){var f=a[i][0];var g=a[i][1];P.DrawFigures.createLine(d,e,f,g,b,c);d=f;e=g}};P.ClearBackGround=function(){Q.style.backgroundColor='';P.ctx.clearRect(0,0,P.canvas.width,P.canvas.height);P._clearTips();for(var a in P.shapes){if(a&&P.shapes[a].length){P.shapes[a].length=0}}};P._createBackground=function(){var a=P.innerOptions.background;var b=P.canvas;if(a.fillstyle){P.DrawFigures.createRectangleFill(0,0,b.width,b.height,a.fillstyle)}else{P.ctx.clearRect(0,0,P.canvas.width,P.canvas.height)}var c=a.borderwidth||0;if(c>0){P.DrawFigures.createRectangleBorder(0,0,b.width,b.height,c*2,a.bordercolor)}P.coordinates.canvas={width:b.width,height:b.height,borderwidth:c}};P._createTip=function(a,b,c){var d=document.createElement('span');var e=P.innerOptions.tip.tiptype||DChart.Const.Defaults.TipType;d.setAttribute('class',P.randoms[e]);d.style.position='absolute';d.style.left=Q.offsetLeft+b+P.calculatedBasic.offleft+'px';d.style.top=Q.offsetTop+c+P.calculatedBasic.offtop+'px';d.innerHTML=a;Q.appendChild(d);return d};P._changeTip=function(a,b,c){if(b){a.style.left=Q.offsetLeft+b+P.calculatedBasic.offleft+'px'}if(c){a.style.top=Q.offsetTop+c+P.calculatedBasic.offtop+'px'}};P._getDrawableCoordinate=function(){if(!P.tempData.coordinate){var a=P.innerOptions;var b=P._calculateOutersValid();var c,minY,maxX,maxY;if(b.AxisValid){var d=P.axisSize||P._computeAxis(b);c=d.minX-1;minY=d.minY-1;maxX=d.maxX+1;maxY=d.maxY+1}else{var e=b.legendValid?P._computeLegend():null;c=(e?e.occupyLeft:0);maxX=P.canvas.width-(e?e.occupyRight:0);if(b.titleValid){minY=P._computeTitle(b).occupyTop}else{minY=0}minY+=(e?e.occupyTop:0);maxY=P.canvas.height-(e?e.occupyBottom:0);var f=a.background.borderwidth||0;c+=f;maxX-=f;minY+=f;maxY-=f}var g=(maxX+c)/2;var h=(maxY+minY)/2;P.tempData.coordinate={minX:Math.ceil(c),maxX:Math.ceil(maxX),minY:Math.ceil(minY),maxY:Math.ceil(maxY),centerX:g,centerY:h}}return P.tempData.coordinate};P._clearDrawable=function(a){var b=P.innerOptions.background;a=a||P._getDrawableCoordinate();P.ctx.clearRect(a.minX+1,a.minY+1,a.maxX-a.minX-2,a.maxY-a.minY-2);if(b.fillstyle){P.DrawFigures.createRectangleFill(a.minX+1,a.minY+1,a.maxX-a.minX-2,a.maxY-a.minY-2,b.fillstyle)}};P._computeTitle=function(a){var a=a||P._calculateOutersValid();var b=P.innerOptions.title;var c=P.innerOptions.background.borderwidth||0;var d=Math.min(P.canvas.height-c*2,P.canvas.width/2-c);var e=b.offtop!=null?b.offtop:0;var f=b.height!=null?b.height:d/15;var g=b.fontsize||d/18;b=P.innerOptions.subTitle;var h=b.height!=null?b.height:d/18;var i=b.fontsize!=null?b.fontsize:d/21;var j=(a.titleValid?f+e:0)+(a.titleValid&&a.subTitleValid?h:0)+g/4;return{title:{height:f,offtop:e,fontsize:g},subTitle:{height:h,fontsize:i},occupyTop:j}};P._createTitle=function(a){var a=a||P._calculateOutersValid();var b=P.innerOptions.title;if(!a.titleValid){return}var c=P._computeTitle(a);var d=P.innerOptions.background.borderwidth||0;var e=P.canvas.width/2;var f=d+c.title.offtop+c.title.height;var g=P.DrawFigures.createText(b.content,e,f,'center',(b.fontweight||'bold'),c.title.fontsize,b.fontfamily,b.color);P.coordinates.title={left:e-g/2,right:e+g/2,top:f-c.title.fontsize,bottom:f,fontsize:c.title.fontsize,length:g};b=P.innerOptions.subTitle;if(!a.subTitleValid){return}f=d+c.title.offtop+c.title.height+c.subTitle.height;g=P.DrawFigures.createText(b.content,e,f,'center',(b.fontweight||'bold'),c.subTitle.fontsize,b.fontfamily,b.color);P.coordinates.subTitle={left:e-g/2,right:e+g/2,top:f-c.subTitle.fontsize,bottom:f,fontsize:c.subTitle.fontsize,length:g}};P._computeLegend=function(a){if(P.tempData.legendSize){return P.tempData.legendSize}var a=a||P._calculateOutersValid();var b=P.innerOptions.background.borderwidth||0;var c=P.canvas.width-b*2;var d=P.canvas.height-b*2;var e=P.innerOptions.legend;var f=P.innerData;var g=0;var h=0;var j=e.type!='row'?'column':e.type;var k=e.placeX!='left'&&e.placeX!='center'?'right':e.placeX;var l=e.placeY!='top'&&e.placeY!='bottom'?'middle':e.placeY;if(l=='middle'&&k=='center'||j=='row'&&l=='middle'){throw new Error(DChart.Const.Language[P.Language].WrongLegendSet);}var m=e.elementtype||DChart.Const.Defaults.LegendType;var n=e.sidelength||Math.max(c,d)/(a.AxisValid?DChart.Const.Defaults.LengthReferCutForAxis:DChart.Const.Defaults.LengthReferCutForPies);var o=n/2;var p=j=='row'?n/3:n;var q=n/2;var r=e.borderwidth&&e.borderwidth>0?e.borderwidth:0;var s=e.fontsize||n*1.2;var t=e.fontfamily||P.innerOptions.fontFamily||DChart.Const.Defaults.FontFamily;var u=0;var v=[];for(var i=0,item;item=f[i];i++){v[i]=item.text||'';if(typeof item.text=='string'){var w=P.DrawFigures.measureText(item.text,null,s,t);if(u<w){u=w}}}var x=e.offX==null?c/(a.AxisValid?DChart.Const.Defaults.OffXCutForAxis:DChart.Const.Defaults.OffXCutForPies):e.offX;var y=e.offY==null?n/2:e.offY;if(m=='l'){n*=2}if(j=='column'){g=q*2+n+o+u+r*2;h=f.length*((m=='l'?n/2:n)+o)-o+p*2+r*2}else{g=f.length*(n+o*2+u)-o+q*2+r*2;h=p*2+(m=='l'?n/2:n)+r*2}var z=(k=='left'?x:(k=='center'?c/2-g/2:c+b-x-g))+r;var A=a.titleValid?P._computeTitle(a).occupyTop:0;var B=y+b+A;var C=(a.AxisValid?d/7.5:0);if(l=='bottom'){B=d+b-h-y-(k=='center'||j=='row'?0:C)}else if(l=='middle'){B=(d-A-h)/2+b+A-C/2}var D=l=='top'&&(j=='row'||j=='column'&&k=='center')?h+y+b+n/3:0;var E=l=='bottom'&&(j=='row'||j=='column'&&k=='center')?h+y+b+n/3:0;var F=k=='left'&&j=='column'?g+x:0;var G=k=='right'&&j=='column'?g+x:0;P.tempData.legendSize={legendWidth:g,legendHeight:h,type:j,placeX:k,placeY:l,elementtype:m,sidelength:n,sidedistance:o,sideoffY:p,sideoffX:q,borderwidth:r,fontsize:s,fontfamily:t,maxTextLength:u,texts:v,left:z,top:B,occupyTop:D,occupyBottom:E,occupyLeft:F,occupyRight:G};return P.tempData.legendSize};P._createLegend=function(a){var a=a||P._calculateOutersValid();if(!a.legendValid){return}var b=P.innerOptions.legend;var c=P._computeLegend();var d=P.tempData.legendColors||DChart.Const.Defaults.FillColors;var e=c.elementtype=='l';for(var i=0,item;item=P.innerData[i];i++){var f=c.left+c.sideoffX+c.borderwidth;if(c.type=='row'){f+=i*(c.sidelength+c.sidedistance*2+c.maxTextLength)}var g=c.top+c.sideoffY+c.borderwidth;if(c.type=='column'){g+=i*((e?c.sidelength/2:c.sidelength)+c.sidedistance)}var h=item.color||d[i%d.length];if(e){P.DrawFigures.createLine(f,g+c.sidelength*0.3,f+c.sidelength,g+c.sidelength*0.3,2,h)}else{P.DrawFigures.createPointElement(c.elementtype,f,g,c.sidelength,h,c.elementtype!='x',h,1,c.elementtype=='x')}P.DrawFigures.createText(c.texts[i],f+c.sidelength+(c.elementtype=='x'?5:3),g+c.sidelength*(e?0.45:0.9),null,null,c.fontsize,c.fontfamily,b.fontcolor,null)}var j=c.borderwidth;var k={borderwidth:j,left:c.left+j/2,top:c.top+j/2,width:c.legendWidth-j,height:c.legendHeight-j};P.coordinates.legend=k;if(j>0){P.DrawFigures.createRectangleBorder(k.left,k.top,k.width,k.height,j,b.bordercolor)}};P._getFormatDiff=function(a,b,c){if(a=='d'){return b.shortOf('d',c)}else if(a=='t'){return b.shortOf('n',c)}else{return c-b}};P._getComputed=function(g,h,j,k,l,m){var n=DChart.Const.Language[P.Language];var o=function(a,b,c){var d=P._getFormatDiff(c,a,b)/m;var e=DChart.Const.Interval[c].__copy();var f=false;while(!f){if(d<e[0]){e.__multiply(0.1)}if(d>e[e.length-1]){e.__multiply(10)}for(var i=1;i<e.length;i++){if(e[i-1]<=d&&e[i]>=d){f=true;d=d-e[i-1]<e[i]-d?e[i-1]:e[i];break}}}return d};var p=j.interval;if(!p){p=o(k,l,h)}var q=j.minvalue;if(q==null){if(h=='d'||h=='t'){var r=p*60000*(h=="d"?1440:1);q=new Date(k-r*g);if(h=='d'){q=new Date(Date.parse(q.format('yyyy/MM/dd')))}}else if(h=='p'){q=0}else{q=(Math.floor(k/p)-g)*p}}if(g&&q<0&&P.tempData.notAllowValueNegative){q=0}var s=j.maxvalue;if(s==null){if(h=='d'||h=='t'){var r=p*60000*(h=="d"?1440:1);s=new Date(q.getTime()+(Math.ceil((l.getTime()-q.getTime())/r)+g)*r)}else{s=q+(Math.ceil((l-q)/p)+g)*p}}if(h=='p'&&s>100){s=100}var t=0;var u=DChart.Methods.CopyInnerValue(h,q);var v=DChart.Methods.AddInnerValue(h,u,p);while(v<=s||((h=='p'||h=='n')&&Math.abs(s-v)<0.0001)){v=DChart.Methods.AddInnerValue(h,v,p);t++}s=v-p;if(s<=q){throw new Error(n.WrongParam+n.AxisMaxLessThanMin);}if(s<l){throw new Error(n.WrongParam+n.AxisMaxLessThanActual);}if(q>k){throw new Error(n.WrongParam+n.AxisMinMoreThanActual);}return{interval:p,maxvalue:s,minvalue:q,scalecount:t}};P._formatAxisData=function(e){var f=P.innerOptions;var g=P.innerData;var h=DChart.Const.Language[P.Language];var l=f.labelAxis.valueType;var m=(!l&&g[0].value.length>1)||(l&&g[0].value.length&&g[0].value[0].length==2);var n=f.valueType||DChart.Const.Defaults.ValueType;var e=e&&m&&!l&&(n=='p'||n=='n');var o=(e||f.valueAxis.verticalcomputeP&&m&&!l)&&n=='p';var p=null;var q=null;var r=null;var s=null;var t=g.length;if(m){t=g[0].value.length}var u=1;if(m){u=g.length}var v=[];if(n=='p'||e){if(m){if(o||e){for(var i=0;i<t;i++){var w=0;for(var j=0,item;item=g[j];j++){w+=(l?item.value[i][1]:item.value[i])}v[i]=w}}else{for(var i=0,item;item=g[i];i++){var w=0;for(var j=0;j<item.value.length;j++){w+=(l?item.value[j][1]:item.value[j])}v[i]=w}}}else{v=0;for(var i=0,item;item=g[i];i++){v+=(l?item.value[1]:item.value)}}}var z=function(a,b,c,i,j,k){if((b=='d'||b=='t')&&!c.getDate){var d=Date.parse(c.toString().replace(/-/g,"/"));if(isNaN(d)){throw new Error(h.WrongData+"'"+c+"'"+h.NeedDateData);}else{c=new Date(d);if(k==undefined){if(j==undefined){g[i].value=c}else{g[i].value[j]=c}}else{g[i].value[j][k]=c}}}else if(b=='n'||b=='p'){if(typeof c!='number'){throw new Error(h.WrongData+"'"+c+"'"+h.NeedNumberData);}if(b=='p'){if(c<0){throw new Error(h.WrongData+'\''+c+'\''+h.DataMustGreaterThanZero);}if(k==undefined){if(j==undefined){c=(c/v)*100;g[i].percent=c}else{c=(c/(m?(o?v[j]:v[i]):v))*100;if(m&&!g[i].percent){g[i].percent=[]}if(m){g[i].percent[j]=c}else{g[i].percent=c}}}else{c=(c/(o?v[j]:v[i]))*100;if(!g[i].percent){g[i].percent=[]}g[i].percent[j]=c}}else{if(a&&P.tempData.notAllowValueNegative&&c<0){throw new Error(h.WrongData+'\''+c+'\''+h.DataMustGreaterThanZero);}}}return c};var A=function(a){if(r===null||a>r){r=a}if(s===null||a<s){s=a}};var B=function(a){if(p===null||a>p){p=a}if(q===null||a<q){q=a}};if(m){for(var i=0,item;item=g[i];i++){for(var j=0;j<item.value.length;j++){var C=item.value[j];var D=null;var E=C;if(l){if(C.length!=2){throw new Error(h.WrongData+"'"+C+"'"+h.AxisVauleShouldBeDArray);}D=C[0];E=C[1]}if(D){D=z(false,l,D,i,j,0);A(D)}E=z(true,n,E,i,j,l?1:undefined);B(E)}}if(e){if(n=='n'){for(var i=0;i<t;i++){B(v[i])}}else{p=100;q=0}}}else{for(var i=0,item;item=g[i];i++){var D=null;var E=item.value;if(l){if(item.value.length!=2){throw new Error(h.WrongData+"'"+item.value+"'"+h.AxisVauleShouldBeDArray);}D=item.value[0];E=item.value[1]}if(D){D=z(false,l,D,i,0);A(D)}var E=z(true,n,E,i,l?1:undefined);B(E)}}if(l&&f.labelAxis.sort){var F=function(x,y){if(y.value){if(y.value[0]>x.value[0]){return-1}else{return 1}}else{if(y[0]>x[0]){return-1}else{return 1}}};if(m){for(var i=0,item;item=g[i];i++){item.value.sort(F)}}else{g.sort(F)}}var G=P._getComputed(1,n,f.valueAxis,q,p,6);var H={vValueType:n,lValueType:l,heapCompute:e,multiple:m,vInterval:G.interval,vMaxValue:G.maxvalue,vMinValue:G.minvalue,vScalecount:G.scalecount,tuftCount:t,demanCount:u};if(l){G=P._getComputed(0,l,f.labelAxis,s,r,6);H.lValueType=l;H.lInterval=G.interval;H.lMaxValue=G.maxvalue;H.lMinValue=G.minvalue;H.lScalecount=G.scalecount}var I=function(){var a=[];var b=f.valueAxis.content;var c=DChart.Methods.CopyInnerValue(H.vValueType,H.vMinValue);for(var i=0;i<=H.vScalecount;i++){a[i]=b.call(f,DChart.Methods.AddInnerValue(H.vValueType,c,H.vInterval*i));c=DChart.Methods.CopyInnerValue(H.vValueType,H.vMinValue)}return a};var J=function(){var a=[];if(H.lValueType){var b=[];var c=f.labelAxis.content;if(typeof c=='function'){var d=DChart.Methods.CopyInnerValue(H.lValueType,H.lMinValue);for(var i=0;i<=H.lScalecount;i++){b[i]=c.call(f.labelAxis,DChart.Methods.AddInnerValue(H.lValueType,d,H.lInterval*i));d=DChart.Methods.CopyInnerValue(H.lValueType,H.lMinValue)}}a=b}else{if(H.multiple){a=f.labelAxis.labels||[]}else{for(var i=0,data;data=P.innerData[i];i++){a[i]=data.text||' '}if(a.__only(' ')&&f.labelAxis.labels&&f.labelAxis.labels.length){a=f.labelAxis.labels}}}return a};H.vLabels=I();H.vScalecount=H.vLabels.length-1;H.lLabels=J();H.lScalecount=H.lLabels.length-1;P.tempData.axisData=H;return H};P._computeAxis=function(a){if(!a.AxisValid){return null}var b=P.innerOptions;var c=P.tempData.axisData;var d=P.tempData.upturnAxis;var e=P.innerOptions.background.borderwidth||0;var a=a||P._calculateOutersValid();var f=a.legendValid?P._computeLegend():null;var g=P.canvas.height/35;if(a.titleValid){g=P._computeTitle(a).occupyTop}var h=P.canvas.width-e*2-(f?f.occupyLeft:0)-(f?f.occupyRight:0);var i=P.canvas.height-e*2-g-(f?f.occupyTop:0)-(f?f.occupyBottom:0);var j=h/(d?8:DChart.Const.Defaults.AxisYDrawableCut[c.vValueType]);var k=i/DChart.Const.Defaults.AxisXDrawableCut;var l=b.labelAxis.length||(d?j:k);var m=b.valueAxis.length||(d?k:j);var n=d?l:m;var o=d?m:l;var p=d?n/8:(a.titleValid||f&&f.occupyTop>0?o/8:g*2.5);var q=(a.legendValid&&f.placeY=='middle'?p/2:n/3);var r=b.scale.linewidth==null?1:b.scale.linewidth;var s=b.close.linewidth||r||1;var t=b.labelAxis.linewidth==null?1:b.labelAxis.linewidth;var u=b.valueAxis.linewidth==null?1:b.valueAxis.linewidth;var v=d?u:t;var w=d?t:u;var x=(d?h-q-n-p:i-o-p)/c.vScalecount;var y=b.cross.length||m/15;var z=P.canvas.width-e-q-(f?f.occupyRight:0)-(d?p:0);var A=P.canvas.height-o-e-(f?f.occupyBottom:0);var B=d?(z-c.vScalecount*x):(e+n+(f?f.occupyLeft:0));var C=d?(e+g+(f&&f.occupyTop>0?f.occupyTop:o/10)):(A-c.vScalecount*x);var D=c.multiple;var E=c.lLabels.length||(D?P.innerData[0].value.length:P.innerData.length);var F=DChart.Const.AxisFromFirstLeft.__contains(P.GraphType);var G=(d?A-C:z-B)/(E+(F?-1:(D?1/(P.innerData.length+1):1/3)));var H=(d?C:B)+(F?0:G*(D?(P.innerData.length/2+1)/(P.innerData.length+1):2/3));P.axisSize={labelAxisLength:l,valueAxisLength:m,yAxisWidth:n,xAxisHeight:o,minX:Math.ceil(B),maxX:Math.ceil(z),minY:Math.ceil(C),maxY:Math.ceil(A),axisValueCut:x,crossLength:y,scaleLineWidth:r,closeLineWidth:s,labelAxisLineWidth:t,valueAxisLineWidth:u,xAxisLineWidth:v,yAxisLineWidth:w,startPos:H,labelDistance:G};return P.axisSize};P._createAxis=function(o){var o=o||P._calculateOutersValid();if(!o.AxisValid){return}P.coordinates.axis={};var p=P.innerOptions;var q=p.background.borderwidth||0;if(typeof p.valueAxis.content!='function'){return}var r=P.tempData.axisData;var s=P.axisSize||P._computeAxis(o);var t=P.tempData.upturnAxis;var u=r.vValueType=='d'||r.vValueType=='t';var v=r.lValueType=='d'||r.lValueType=='t';var w=p.valueAxis.fontsize||(t?1.3:1)*(s.valueAxisLength-s.valueAxisLineWidth)/(u?9:6);var z=(p.valueAxis.fontweight||'normal');var A=(p.valueAxis.fontfamily||p.fontFamily||DChart.Const.Defaults.AxisFontFamily);var B=p.valueAxis.fontcolor;var C=p.valueAxis.linecolor||DChart.Const.Defaults.AxisLineColor;var D=(p.cross.show?s.crossLength:3)+s.valueAxisLineWidth+3;var E=function(a,b,c,d,e,f){if(a==null){a=0;var g=true;while(g){var h=false;var j=Math.cos(a*Math.PI);var k=Math.abs(a*Math.PI);for(var i=0;i<=c.length-1;i++){var l=P.DrawFigures.measureText(c[i],d,e,f);if(b){if(l*j>s.yAxisWidth-D){h=true;break}}else{var m=i==0?0:P.DrawFigures.measureText(c[i-1],d,e,f);var n=t?s.valueAxisLength:s.labelDistance;if(i>0&&n*k<e&&(l+m>2*n/j)){h=true;break}}}g=h;if(h){a-=0.01}}}return a};var F=function(a,x,y,b){var c=r.vLabels;var d=s.minX-D;var e=s.maxY+(p.cross.show?s.crossLength:3)+s.valueAxisLineWidth+3+w;var f=E(p.valueAxis.fontrotate,!t,c,z,w,A);P.coordinates.axis.vlabels=[];for(var i=0;i<=r.vScalecount;i++){if(t){var g=s.minX+i*s.axisValueCut;var h=P.DrawFigures.createText(c[i],g,e,'center',z,w,A,B,f,'right');P.coordinates.axis.vlabels[i]={index:i,left:g-h/2,right:g+h/2,top:e-w,bottom:e,fontsize:w,length:h}}else{var j=s.maxY-i*s.axisValueCut+s.scaleLineWidth/2+w/3;var h=P.DrawFigures.createText(c[i],d,j,'right',z,w,A,B,f);P.coordinates.axis.vlabels[i]={index:i,left:d-h,right:d,top:j-w,bottom:j,fontsize:w,length:h}}}};var G=function(){if(!p.cross.show){return}var a=p.scale.backcolors&&p.scale.backcolors.length>1;var b=p.cross.linewidth;var c=p.cross.linecolor||C;var d=s.crossLength;if(t){var e=s.maxY+s.valueAxisLineWidth;var f=s.maxY+s.valueAxisLineWidth+s.crossLength;var g=Math.floor((s.scaleLineWidth+0.1)/2);for(var i=1;i<=r.vScalecount;i++){var x=s.maxX-i*s.axisValueCut;if(i==r.vScalecount&&x<s.minX){x=s.minX}if(a&&i<r.vScalecount){x-=g}P.DrawFigures.createLine(x+s.axisValueCut,e,x+s.axisValueCut,f,p.cross.linewidth,c)}P.DrawFigures.createLine(s.minX-1,e,s.minX-1,f,p.cross.linewidth,c)}else{var h=s.minX-s.valueAxisLineWidth;var j=h-s.crossLength;for(var i=1;i<=r.vScalecount;i++){var y=s.maxY-i*s.axisValueCut;if(a){y+=s.scaleLineWidth/2}P.DrawFigures.createLine(j,y,h,y,b,c)}P.DrawFigures.createLine(j,s.maxY+1,h,s.maxY+1,b,c)}};if(s.valueAxisLineWidth&&s.valueAxisLineWidth>0){if(t){var y=s.maxY+s.valueAxisLineWidth/2;P.DrawFigures.createLine(s.minX-s.labelAxisLineWidth,y,s.maxX+s.valueAxisLength/20,y,s.valueAxisLineWidth,C)}else{var x=s.minX-s.valueAxisLineWidth/2;P.DrawFigures.createLine(x,s.maxY+s.labelAxisLineWidth+1,x,s.minY-s.valueAxisLength/20,s.valueAxisLineWidth,C)}}var H=function(){var a=r.lLabels;var b=p.labelAxis.fontsize||(v?s.xAxisHeight/6:s.xAxisHeight/4.5);var c=p.labelAxis.fontweight||z;var d=p.labelAxis.fontfamily||A;var e=p.labelAxis.fontcolor||B;var f=E(p.labelAxis.fontrotate,t,a,c,b,d);P.coordinates.axis.llabels=[];for(var i=0,label;label=a[i];i++){if(t){var g=s.minX-s.valueAxisLineWidth-b*(f<0?1:0.5);var h=s.startPos+(s.labelDistance)*i+b/2;var j=P.DrawFigures.createText(label,g,h,'right',c,b,d,e,f);P.coordinates.axis.llabels[i]={index:i,left:g-j,right:g,top:h-b,bottom:h,fontsize:b,length:j}}else{var k=s.startPos+(s.labelDistance)*i;var h=s.maxY+s.labelAxisLineWidth+b*1.2;var j=P.DrawFigures.createText(label,k,h,'center',c,b,d,e,f,'right');P.coordinates.axis.llabels[i]={index:i,left:k-j/2,right:k+j/2,top:h-b,bottom:h,fontsize:b,length:j}}}};if(s.labelAxisLineWidth&&s.labelAxisLineWidth>0){if(t){var x=s.minX-s.labelAxisLineWidth/2;P.DrawFigures.createLine(x,s.minY-(p.close.show?s.closeLineWidth:0),x,s.maxY,s.labelAxisLineWidth,p.labelAxis.linecolor||DChart.Const.Defaults.AxisLineColor)}else{var y=s.maxY+s.labelAxisLineWidth/2+1;P.DrawFigures.createLine(s.minX-1,y,s.maxX+(p.close.show?s.closeLineWidth:0),y,s.labelAxisLineWidth,p.labelAxis.linecolor||DChart.Const.Defaults.AxisLineColor)}}var I=function(){var a=p.yAxisTitle;if(!a.content){return}var b=a.fontsize||s.yAxisWidth/5;var c=a.fontcolor||B;var d=a.fontweight||'bold';var e=a.fontfamily||A;var f=(s.minY+s.maxY)/2;var g=s.minX-s.yAxisLineWidth-(s.yAxisWidth-s.yAxisLineWidth)*(a.titlelocation||(t?0.75:DChart.Const.Defaults.AxisYTitleLocation[r.vValueType]));var h=P.DrawFigures.createText(a.content,g,f,'center',d,b,e,c,-0.5);P.coordinates.axis.yAxisTitle={top:f-h/2,bottom:f+h/2,left:g-b,right:g,fontsize:b,length:h}};var J=function(){if(!p.xAxisTitle.content){return}var a=p.xAxisTitle.fontsize||s.xAxisHeight/5;var b=p.xAxisTitle.fontcolor||B;var c=p.xAxisTitle.fontweight||'bold';var d=p.xAxisTitle.fontfamily||A;var e=P.canvas.width/2;var f=s.maxY+s.xAxisLineWidth+(s.xAxisHeight-s.xAxisLineWidth)*(p.xAxisTitle.titlelocation||(t?0.75:DChart.Const.Defaults.AxisXTitleLocation[r.vValueType]));var g=P.DrawFigures.createText(p.xAxisTitle.content,e,f,'center',c,a,d,b);P.coordinates.axis.xAxisTitle={top:f-a,bottom:f,left:e-g/2,right:e+g/2,fontsize:a,length:g}};var K=function(){if(typeof p.caption.content!='string'){return}var a=p.caption.fontsize||(w+(u?2:-1));if(t){var b=Math.min(s.maxX+a*2,P.canvas.width-q-a);var c=s.maxY+s.xAxisLineWidth/2;var d=P.DrawFigures.createText(p.caption.content,b,c,'center',p.caption.fontweight,a,p.caption.fontfamily,p.caption.fontcolor||B,0.5);P.coordinates.axis.caption={left:b,right:b+a,top:c-d/2,bottom:c+d/2,fontsize:a,length:d}}else{var b=s.minX-s.valueAxisLineWidth/2;var e=s.minY-a;var d=P.DrawFigures.createText(p.caption.content,b,e,'center',p.caption.fontweight,a,p.caption.fontfamily,p.caption.fontcolor||B);P.coordinates.axis.caption={left:b-d/2,right:b+d/2,top:e-a,bottom:e,fontsize:a,length:d}}};var L=function(){if(!(p.close.show&&s.closeLineWidth&&s.closeLineWidth>0)){return}var a=p.close.linecolor||p.scale.linecolor||DChart.Const.Defaults.ScaleLineColor;if(t){var b=s.minY-s.closeLineWidth/2;P.DrawFigures.createLine(s.minX,b,s.maxX,b,s.closeLineWidth,a)}else{var c=s.maxX+s.closeLineWidth/2;P.DrawFigures.createLine(c,s.maxY+1,c,s.minY,s.closeLineWidth,a)}};var M=function(){var a=p.footer;if(!a.content){return}var b=P.coordinates.canvas;var c=a.fontsize||Math.min(b.height/25,b.width/50);var d=b.height*(1-(a.bottomdistance||DChart.Const.Defaults.FooterBottomDistance))-b.borderwidth-c/2;var e=b.width*(1-(a.rightdistance||DChart.Const.Defaults.FooterRightDistance))-b.borderwidth;var f=a.fontcolor||DChart.Const.Defaults.FooterFontColor;var g=P.DrawFigures.createText(a.content,e,d,'right',a.fontweight,c,a.fontfamily,f);P.coordinates.footer={top:d-c,bottom:d,right:e,left:e-g,fontsize:c,length:g}};K();I();J();F();H();G();L();M();P.coordinates.axis.yAxis={width:s.yAxisWidth};P.coordinates.axis.xAxis={height:s.xAxisHeight}};P._createScales=function(a){var a=a||P._calculateOutersValid();if(!a.AxisValid){return}var b=P.innerOptions;var c=P.axisSize||P._computeAxis(a);var d=P.tempData.axisData;var e=c.scaleLineWidth;var f=Math.floor((e+0.1)/2);var g=b.scale.linecolor||DChart.Const.Defaults.ScaleLineColor;var h=b.scale.backcolors;var j=P.tempData.upturnAxis;if(h&&h.length==1){P.DrawFigures.createRectangleFill(c.minX,c.minY,c.maxX-c.minX,c.maxY-c.minY,h[0])}for(var i=1;i<=d.vScalecount;i++){if(j){var x=c.maxX-i*c.axisValueCut;if(i==d.vScalecount&&x<c.minX){x=c.minX}if(h&&h.length>1){var k=h.length?h[(i-1)%h.length]:null;if(i<d.vScalecount){x-=f}P.DrawFigures.createRectangleFill(x,c.minY,c.axisValueCut-f,c.maxY-c.minY,k)}if(e>0){P.DrawFigures.createLine(x+c.axisValueCut,c.minY,x+c.axisValueCut,c.maxY,e,g)}}else{var y=c.maxY-i*c.axisValueCut;if(h&&h.length>1){var k=h.length?h[(i-1)%h.length]:null;y+=e/2;var l=c.axisValueCut-e/2;if(i==1){l+=1}P.DrawFigures.createRectangleFill(c.minX,y,c.maxX-c.minX,l,k)}if(e>0){P.DrawFigures.createLine(c.minX,y,c.maxX,y,e,g)}}}if(b.scale.drawvertical){var m=b.close.show&&c.closeLineWidth&&c.closeLineWidth>0;for(var i=1;i<d.lScalecount+(m?0:1);i++){if(j){}else{var x=c.startPos+i*c.labelDistance;if(e>0){P.DrawFigures.createLine(x,c.minY,x,c.maxY+1,e,g)}}}}};P._calculateOutersValid=function(){var a=P.innerOptions;var b=a.legend.show;if(P.tempData.axisData&&!P.tempData.axisData.multiple||P.tempData.legendInvalid){b=false}var c=a.title&&a.title.show&&a.title.content;var d=c&&a.subTitle&&a.subTitle.show&&a.subTitle.content;var e=DChart.Const.DrawAxis.__contains(P.GraphType);return{legendValid:b,titleValid:c,subTitleValid:d,AxisValid:e}};P._createAssists=function(a){P._createBackground();P._createTitle(a);P._createLegend();P._createAxis(a)};P._startDrawAndAnimation=function(b,c){var d=P.innerOptions;var e=(d.animation)?1/DChart.Methods.CapValue(d.animationSteps,100,1):1;var f=DChart.Const.AnimationAlgorithms[d.animationEasing];var g=(d.animation)?0:1;var h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1000/60)};var i=P._calculateOutersValid();P.ClearBackGround();if(!P.tempData.recreateAssists){P._createAssists(i)}var j=P._getDrawableCoordinate();if(P.onBeforeAnimation){P.onBeforeAnimation()}var k=function(){g+=e;if(P.onAnimation){P.onAnimation(g)}var a=(d.animation)?DChart.Methods.CapValue(f(g),null,0):1;P._clearDrawable(j);if(d.scaleOverlay){if(P.tempData.recreateAssists){P._createAssists(i)}b(a,g);P._createScales(i)}else{if(P.tempData.recreateAssists){P._createAssists(i)}P._createScales(i);b(a,g)}if(g<1){h(k)}else{if(d.supportMouseEvents&&typeof c=='function'){c()}if(typeof d.onAnimationComplete=='function'){d.onAnimationComplete()}if(P.onFinish){P.onFinish()}}};h(k)};P._getMouseLoction=function(e){if(e.offsetX!=null){return{X:e.offsetX,Y:e.offsetY}}else{var c=function(a){var b={x:0,y:0};while(a){b.x+=a.offsetLeft;b.y+=a.offsetTop;a=a.offsetParent}return b};var d=e.target;if(d.offsetLeft==undefined){d=d.parentNode}var f=c(d);var g={x:window.pageXOffset+e.clientX,y:window.pageYOffset+e.clientY};return{X:g.x-f.x,Y:g.y-f.y}}};P.Initial()};return V};(function(){function loadScript(a){var b;if(window.XMLHttpRequest){b=new XMLHttpRequest()}else{b=new ActiveXObject("Microsoft.XMLHTTP")}var c=document.getElementsByTagName("script");for(var i=0,_script;_script=c[i];i++){if(_script.src.indexOf('dragonchart.all.')>=0){c=_script;break}}try{var a=c.src.replace('dragonchart.all.',a);b.open("Get",a,false);b.send();eval(b.responseText)}catch(ex){throw new Error('请确保文件：'+a+' 在服务器中存在！\n'+'Please make sure that：'+a+'  exists in the server!');}}DChart.Pie=function(a,b){loadScript('dragonchart.pie.');return new DChart.Pie(a,b)};DChart.Ring=function(a,b){loadScript('dragonchart.ring.');return new DChart.Ring(a,b)};DChart.MultiRing=function(a,b){loadScript('dragonchart.multiring.');return new DChart.MultiRing(a,b)};DChart.Polar=function(a,b){loadScript('dragonchart.polar.');return new DChart.Polar(a,b)};DChart.Bar=function(a,b){loadScript('dragonchart.bar.');return new DChart.Bar(a,b)};DChart.Histogram=function(a,b){loadScript('dragonchart.histogram.');return new DChart.Histogram(a,b)};DChart.HeapBar=function(a,b){loadScript('dragonchart.heapbar.');return new DChart.HeapBar(a,b)};DChart.HeapHistogram=function(a,b){loadScript('dragonchart.heaphistogram.');return new DChart.HeapHistogram(a,b)};DChart.Line=function(a,b){loadScript('dragonchart.line.');return new DChart.Line(a,b)};DChart.Points=function(a,b){loadScript('dragonchart.points.');return new DChart.Points(a,b)};DChart.Area=function(a,b){loadScript('dragonchart.area.');return new DChart.Area(a,b)};DChart.Radar=function(a,b){loadScript('dragonchart.radar.');return new DChart.Radar(a,b)}})();