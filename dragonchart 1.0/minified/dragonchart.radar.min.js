if(!window.DChart){throw new Error('未能加载dragonchart.core.js，该js必须在其他DChart框架的js加载之前被引用。\n'+'Not loaded dragonchart.core.js which must be loaded before other DChart\'s js.');}else{DChart.Const.Skins.BlackAndWhite.Radar={ScaleLineColor:null,StaffFontColor:null,StaffBackColor:'rgba(255,255,255,0.3)',RadarNodeLinecolors:['#ffffff'],LabelsFontColors:'#666666'}}DChart.Radar=DChart.getCore().__extends({GraphType:'Radar',SetDefaultOptions:function(){this._resetSharedOpions();this.innerOptions=DChart.Methods.Extend(this.originalDefaultOptions,{radius:null,margin:null,startDirection:null,scale:{linewidth:0.5,minvalue:null,maxvalue:null,interval:null},staff:{show:true,content:function(a){return a.toString()},fontcolor:null,fontfamily:null,fontsize:null,fontweight:null,backcolor:'rgba(255,255,255,0.3)'},radar:{fillcolors:null,linecolors:null,nodefillcolors:null,nodelinecolors:['#ffffff'],linewidth:null,nodetype:null,nodelinewidth:1,nodelength:null},labels:{labels:null,fontcolors:null,fontweight:null,fontsize:null,fontfamily:null,showtips:true},tip:{content:function(a){var b=a.value.toString();return'<div>'+(a.text?a.text+'<br/>':'&nbsp;')+a.label+'：'+b+'&nbsp;</div>'}}});return this},Draw:function(Q,R){var S=this;if(arguments.length===1){if(!DChart.Methods.IsArray(arguments[0])){R=arguments[0];Q=undefined}}S.SetOptions(R);S._checkOptions();var T=S.innerOptions;S.SetData(Q);S._onStart();var U=null;var V=null;var W=S.innerData[0].value.length!=undefined;if(!W){S.tempData.legendInvalid=true}var X=function(a){if(typeof a!='number'){throw new Error(DChart.Const.Language[S.Language].WrongData+'\''+a+'\''+DChart.Const.Language[S.Language].NeedNumberData);}else if(a<0){throw new Error(DChart.Const.Language[S.Language].WrongData+'\''+a+'\''+DChart.Const.Language[S.Language].DataMustGreaterThanZero);}else{if(V==null){U=V=a}else{if(a>V){V=a}else if(a<U){U=a}}}};for(var i=0;i<S.innerData.length;i++){var Y=S.innerData[i];if(W){for(var k=0;k<Y.value.length;k++){X(Y.value[k])}}else{X(Y.value)}}var Z=S._getComputed(0,'n',T.scale,U,V,8);var ba=S._getDrawableCoordinate();var bb=DChart.Methods.IsNumber(T.margin)&&T.margin>0?T.margin:15;var bc=Math.min((ba.maxX-ba.minX)/3,(ba.maxY-ba.minY)/2)-bb*2;var bd=T.radius&&T.radius<bc?T.radius:bc;S.coordinates.draw=ba;S.coordinates.radar={radius:bd,centerX:ba.centerX,centerY:ba.centerY};var be=(T.radar.fillcolors&&T.radar.fillcolors.length>0?T.radar.fillcolors:null)||DChart.Const.Defaults.TransparentColors;var bf=(T.radar.linecolors&&T.radar.linecolors.length>0?T.radar.linecolors:null)||DChart.Const.Defaults.FillColors;var bg=(T.radar.nodefillcolors&&T.radar.nodefillcolors.length>0?T.radar.nodefillcolors:null)||bf;var bh=(T.radar.nodelinecolors&&T.radar.nodelinecolors.length>0?T.radar.nodelinecolors:null)||bg;S.tempData.legendColors=bf;var bi=T.labels.fontcolors&&T.labels.fontcolors.length>0?T.labels.fontcolors:null;var bj=T.startDirection||'n';var bk=bj=='e'?0:(bj=='s'?Math.PI/2:(bj=='w'?Math.PI:-Math.PI/2));var bl=W?S.innerData[0].value.length:S.innerData.length;var bm=Math.PI*2/bl;var bn=S.ctx;var bo=function(a){return(a-Z.minvalue)/(Z.maxvalue-Z.minvalue)};S.shapes.nodes=[];S.shapes.labels=[];var bp=T.radar.nodelength||DChart.Methods.CapValue((ba.maxX-ba.minX)/150,10,6);var bq=function(d,f,g,h,i){this.index=d;this.centerX=f;this.centerY=g;this.isHovered=false;this.nodelength=h;this.data=i;this.click=function(e){var a=typeof this.data.click=='function'?this.data.click:(T.click||null);if(a){a(this.data,e)}};if(T.tip.show&&typeof T.tip.content=='function'){this.tip=null;this.showTip=function(){if(this.tip){this.tip.style.display='inline'}else{var a=this.centerX+bp+5;var b=this.centerY-bp-10;this.tip=S._createTip(T.tip.content.call(T,this.data,false),a,b);if(this.centerX+this.tip.clientWidth>ba.maxX){S._changeTip(this.tip,a-5-bp-this.tip.clientWidth)}var c=this;c.tip.onclick=function(e){c.click(e)}}};this.hideTip=function(){if(this.tip){this.tip.style.display='none'}}}};S.coordinates.radar.nodes=[];S.coordinates.radar.labels=[];S.coordinates.radar.staff=[];var br=function(a,b,c,d){var e=T.radar;var f=(W?c.color:null)||be[d%be.length];var g=(W?c.linecolor:null)||bf[d%bf.length];var h=(W?c.linewidth:null)||e.linewidth||1;var j=[];for(var i=0;i<(W?c.value.length:c.length);i++){var k=W?c:c[i];var l=W?c.value[i]:k.value;var m=k.nodefillcolor||bg[d%bg.length];var n=k.nodelinecolor||bh[d%bh.length];var o=k.nodelinewidth||e.nodelinewidth||0;var p=k.nodelength||bp;var q=k.nodetype||e.nodetype||'c';var r=a*bd*bo(l);var s=bk+i*bm;var t=ba.centerX+r*Math.cos(s);var u=ba.centerY+r*Math.sin(s);j.push([t,u,m,n,o,p,q]);if(b>=1){var v={value:l,click:k.click,mouseover:k.mouseover,mouseleave:k.mouseleave};v.text=W?c.text:'';v.label=W?(T.labels.labels?T.labels.labels[i%T.labels.labels.length]:''):k.text;var w=new bq(W?d*c.value.length+i:i,t,u,p,v);S.shapes.nodes.push(w)}}S.DrawFigures.createCloseFigure(j,f,h,g);for(var i=0,point;point=j[i];i++){S.DrawFigures.createPointElement(point[6],point[0],point[1],point[5],point[2],true,point[3],point[4],true,true);if(b>=1){var x={centerX:point[0],centerY:point[1],length:point[5]};if(W){if(!S.coordinates.radar.nodes[d]){S.coordinates.radar.nodes[d]=[]}S.coordinates.radar.nodes[d][i]=x}else{S.coordinates.radar.nodes[i]=x}}}};var bs=function(g){var h=T.scale;var j=h.linewidth;if(!(h.linewidth>0)){return}var l=T.labels;var m=l.labels||[];if(!W){for(var i=0,Y;Y=S.innerData[i];i++){m[i]=Y.text||' '}}var n=l.fontsize||bd/8;var o=h.linecolor||'rgb(190,190,190)';var p=0.1;var q=5;for(var k=0;k<bl;k++){var r=bk+k*bm;var s=r+bm;var t=0;var u=0;for(var v=Z.minvalue+Z.interval;v<=Z.maxvalue;v+=Z.interval){var w=bd*bo(v);t=ba.centerX+w*Math.cos(r);u=ba.centerY+w*Math.sin(r);var x=ba.centerX+w*Math.cos(s);var y=ba.centerY+w*Math.sin(s);S.DrawFigures.createLine(t,u,x,y,j,o)}S.DrawFigures.createLine(ba.centerX,ba.centerY,t,u,j,o);var z=DChart.Methods.JudgeBetweenAngle(-Math.PI*0.5,Math.PI*0.5,r);var A=DChart.Methods.JudgeBetweenAngle(-Math.PI,0,r);var B=DChart.Methods.JudgeBetweenAngle(-Math.PI/2-p,-Math.PI/2+p,r)||DChart.Methods.JudgeBetweenAngle(Math.PI/2-p,Math.PI/2+p,r);var C=DChart.Methods.JudgeBetweenAngle(Math.PI-p,Math.PI+p,r)||DChart.Methods.JudgeBetweenAngle(-p,p,r);var D=t;var E=u;if(!B){if(z){D+=q+q*Math.abs(Math.sin(r))}else{D-=q+q*Math.abs(Math.sin(r))}if(C){E+=n/3}else{if(A){E-=q*Math.abs(Math.cos(r))}else{E+=n/2+q*Math.abs(Math.cos(r))}}}else{if(A){E-=n*0.7}else{E+=n}}var F=(bi?bi[k%bi.length]:null)||o;var G=S.DrawFigures.createText(m[k],D,E,B?'center':(z?'left':'right'),l.fontweight,n,l.fontfamily,F);if(g>=1){var H={index:k,centerX:(B?D:(z?D+G/2:D-G/2)),centerY:E-n/2,size:n,length:G};S.shapes.labels.push(H);S.coordinates.radar.labels.push({index:k,text:m[k],left:H.centerX-G/2,right:H.centerX+G/2,top:E-n,bottom:E,size:n,length:G})}}var I=T.staff;var J=I.content;if(!I.show||typeof J!='function'){return}var K=I.fontsize||bd/Z.scalecount*0.8;var L=I.backcolor;var M=0;if(L){for(var v=Z.minvalue+Z.interval;v<=Z.maxvalue;v+=Z.interval){var N=S.DrawFigures.measureText(J(v),I.fontweight,K,I.fontfamily);M=Math.max(M,N)}}var O=function(a,b,c){var d=(b=='n'||b=='s')?ba.centerX:(b=='w'?ba.centerX-c:ba.centerX+c);var e=(b=='w'||b=='e')?ba.centerY+K/2.5:(b=='n'?ba.centerY-c+K/2.5:ba.centerY+c+K/2.5);if(L){S.DrawFigures.createRectangleFill(d-M/2-1,e-K+1,M+2,K+2,L)}var f=S.DrawFigures.createText(a,d,e,'center',I.fontweight,K,I.fontfamily,F);if(g>=1){S.coordinates.radar.staff.push({text:a,left:d-f/2,right:d+f/2,top:e-K,bottom:e,size:n,length:f})}};for(var v=Z.minvalue+Z.interval;v<=Z.maxvalue;v+=Z.interval){var F=I.fontcolor||'#000000';var P=bd*bo(v);O(J(v),bj,P)}};var bt=function(a,b){if(!T.scaleOverlay){bs(b)}if(W){for(var i=0,data;data=S.innerData[i];i++){br(a,b,data,i)}}else{br(a,b,S.innerData,0)}if(T.scaleOverlay){bs(b)}};var bu=function(){var h=function(x,y){var a=null;for(var i=S.shapes.nodes.length-1;i>=0;i--){var b=S.shapes.nodes[i];if(Math.sqrt(Math.pow(x-b.centerX,2)+Math.pow(y-b.centerY,2))<=b.nodelength/2){a=b;break}}return a};var j=function(x,y){var a=null;for(var i=S.shapes.labels.length-1;i>=0;i--){var b=S.shapes.labels[i];if(Math.abs(x-b.centerX)<b.length/2&&Math.abs(y-b.centerY)<b.size/2){a=b;break}}return a};S.canvas.onclick=function(e){var e=window.event||e;var a=S._getMouseLoction(e);var b=h(a.X,a.Y);if(b){b.click(e)}};S.canvas.onmousemove=function(e){var e=window.event||e;var a=S._getMouseLoction(e);var b=h(a.X,a.Y)||j(a.X,a.Y);if(S.tempData.currentMouseShape!=b){var c=S.tempData.currentMouseShape;if(c&&c.data){var d=typeof c.data.mouseleave=='function'?c.data.mouseleave:(T.mouseleave||null);if(d){d(c.data,e)}}S.tempData.currentMouseShape=b;for(var i=0,c;c=S.shapes.nodes[i];i++){if(c!=b&&c.isHovered){c.isHovered=false;if(c.hideTip){c.hideTip()}}}if(b){if(b.data){if(T.mouseoverChangeCursor){S.canvas.style.cursor='pointer'}b.isHovered=true;if(b.showTip){b.showTip()}var f=typeof b.data.mouseover=='function'?b.data.mouseover:(T.mouseover||null);if(f){f(b.data,e)}}else{if(T.labels.showtips){if(T.mouseoverChangeCursor){S.canvas.style.cursor='pointer'}var g=b.index;for(var i=S.shapes.nodes.length-1;i>=0;i--){var c=S.shapes.nodes[i];if(c.index%bl==g&&c.showTip){c.isHovered=true;c.showTip()}}}}}else{if(T.mouseoverChangeCursor){S.canvas.style.cursor='auto'}}}}};S._startDrawAndAnimation(bt,bu)},_spreadSkin:function(a,b){var c=DChart.Const.Skins;if(c[a]&&c[a].Radar){var d=c[a].Radar;b.scale={};b.staff={};b.radar={};b.labels={};b.scale.linecolor=d.ScaleLineColor||null;b.staff.fontcolor=d.StaffFontColor||null;b.staff.backcolor=d.StaffBackColor||null;b.radar.nodelinecolors=d.RadarNodeLinecolors||null;b.labels.fontcolors=d.LabelsFontColors||null}},_getCheckOptions:function(){return{__top:[['radius','n'],['margin','n'],['startDirection','s']],scale:[['minvalue','n'],['maxvalue','n'],['interval','n']],staff:[['show','b'],['content','f'],['fontcolor','c'],['fontfamily','s'],['fontsize','n'],['fontweight','s'],['backcolor','c']],radar:[['fillcolors','ca'],['linecolors','ca'],['nodefillcolors','ca'],['nodelinecolors','ca'],['linewidth','n'],['nodetype','s'],['nodelinewidth','n'],['nodelength','n']],labels:[['labels','sa'],['fontcolors','ca'],['fontweight','s'],['fontsize','n'],['fontfamily','s'],['showtips','b']]}}});